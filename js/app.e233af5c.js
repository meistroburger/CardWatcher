(function(e){function t(t){for(var c,s,n=t[0],r=t[1],o=t[2],d=0,b=[];d<n.length;d++)s=n[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&b.push(i[s][0]),i[s]=0;for(c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c]);u&&u(t);while(b.length)b.shift()();return l.push.apply(l,o||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],c=!0,s=1;s<a.length;s++){var n=a[s];0!==i[n]&&(c=!1)}c&&(l.splice(t--,1),e=r(r.s=a[0]))}return e}var c={},s={app:0},i={app:0},l=[];function n(e){return r.p+"js/"+({}[e]||e)+"."+{"chunk-0173399f":"2366f0d6","chunk-13be29f5":"ac94a91e","chunk-28a89ab6":"a527599e","chunk-2d0e2721":"39716f46","chunk-2fe52e9a":"5ea4ab9e","chunk-62ad9a69":"08657534","chunk-7229211b":"89560697","chunk-781b0d1e":"3c9ab5b2","chunk-8a95aeea":"7093d32d","chunk-c066c090":"989c5d97"}[e]+".js"}function r(t){if(c[t])return c[t].exports;var a=c[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],a={"chunk-0173399f":1,"chunk-13be29f5":1,"chunk-28a89ab6":1,"chunk-2fe52e9a":1,"chunk-62ad9a69":1,"chunk-7229211b":1,"chunk-781b0d1e":1,"chunk-8a95aeea":1,"chunk-c066c090":1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var c="css/"+({}[e]||e)+"."+{"chunk-0173399f":"fd69787a","chunk-13be29f5":"e02c82d6","chunk-28a89ab6":"01871f80","chunk-2d0e2721":"31d6cfe0","chunk-2fe52e9a":"2c59716c","chunk-62ad9a69":"dfca84cb","chunk-7229211b":"16dc44ee","chunk-781b0d1e":"52bd11de","chunk-8a95aeea":"09cdc2b4","chunk-c066c090":"2b6b2e4d"}[e]+".css",i=r.p+c,l=document.getElementsByTagName("link"),n=0;n<l.length;n++){var o=l[n],d=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(d===c||d===i))return t()}var b=document.getElementsByTagName("style");for(n=0;n<b.length;n++){o=b[n],d=o.getAttribute("data-href");if(d===c||d===i)return t()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=t,u.onerror=function(t){var c=t&&t.target&&t.target.src||i,l=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");l.code="CSS_CHUNK_LOAD_FAILED",l.request=c,delete s[e],u.parentNode.removeChild(u),a(l)},u.href=i;var O=document.getElementsByTagName("head")[0];O.appendChild(u)})).then((function(){s[e]=0})));var c=i[e];if(0!==c)if(c)t.push(c[2]);else{var l=new Promise((function(t,a){c=i[e]=[t,a]}));t.push(c[2]=l);var o,d=document.createElement("script");d.charset="utf-8",d.timeout=120,r.nc&&d.setAttribute("nonce",r.nc),d.src=n(e);var b=new Error;o=function(t){d.onerror=d.onload=null,clearTimeout(u);var a=i[e];if(0!==a){if(a){var c=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;b.message="Loading chunk "+e+" failed.\n("+c+": "+s+")",b.name="ChunkLoadError",b.type=c,b.request=s,a[1](b)}i[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:d})}),12e4);d.onerror=d.onload=o,document.head.appendChild(d)}return Promise.all(t)},r.m=e,r.c=c,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)r.d(a,c,function(t){return e[t]}.bind(null,c));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=t,o=o.slice();for(var b=0;b<o.length;b++)t(o[b]);var u=d;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"06ad":function(e,t,a){},"0731":function(e,t,a){},"0be8":function(e,t,a){},"0c68":function(e,t,a){"use strict";a("b6cb")},"0e58":function(e,t,a){"use strict";a("0fae")},"0fae":function(e,t,a){},"15a5":function(e,t,a){"use strict";a("44d1")},"1f14":function(e,t,a){},"204a":function(e,t,a){"use strict";a("9fb6")},2064:function(e,t,a){"use strict";var c=a("cee4");const s="0c4b0264-73d6-4ada-8edf-ef3ec5db80ea",i="https://api.pokemontcg.io/v2",l=c["a"].create({baseURL:i,headers:{"X-Api-Key":s,"Content-Type":"application/json"}});t["a"]={async getCards(e={}){const t=await l.get("/cards",{params:{pageSize:250,page:e.page||1,q:e.query||"",orderBy:e.orderBy||"name",select:"id,name,images,types,rarity,cardmarket,set",...e}});return t.data},async getSets(){const e=await l.get("/sets",{params:{orderBy:"-releaseDate",select:"id,name,images,releaseDate,series"}});return e.data},async getCardById(e){const t=await l.get("/cards/"+e);return t.data},async getCardsByQuery(e){const t=await l.get("/cards",{params:{q:e}});return t.data},getCard(e){return l.get("/cards/"+e)}}},2161:function(e,t,a){"use strict";a("7770")},"34f1":function(e,t,a){},"36a6":function(e,t,a){"use strict";a("1f14")},"36e4":function(e,t,a){},"395c":function(e,t,a){},"3b4f":function(e,t,a){"use strict";a("f76e")},"3e12":function(e,t,a){"use strict";a("a98f")},"3f47":function(e,t,a){},"3f66":function(e,t,a){},"44d1":function(e,t,a){},"487e":function(e,t,a){},"4a66":function(e,t,a){},"4ab2":function(e,t,a){"use strict";a("0be8")},5121:function(e,t,a){"use strict";a("395c")},"56d7":function(e,t,a){"use strict";a.r(t);var c=a("7a23");const s={class:"app"},i={class:"main-content"},l={key:1,class:"loading-screen"};function n(e,t,a,n,r,o){const d=Object(c["D"])("AppHeader"),b=Object(c["D"])("router-view"),u=Object(c["D"])("NotificationCenter");return Object(c["x"])(),Object(c["h"])("div",s,[n.auth.state.initialized?(Object(c["x"])(),Object(c["f"])(d,{key:0})):Object(c["g"])("",!0),Object(c["i"])("main",i,[n.auth.state.initialized?(Object(c["x"])(),Object(c["f"])(b,{key:0})):(Object(c["x"])(),Object(c["h"])("div",l,t[0]||(t[0]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"autorenew",-1),Object(c["k"])(" Loading... ")])))]),Object(c["l"])(u)])}const r={class:"app-header"},o={class:"nav-container"},d={class:"nav-left"},b={class:"nav-links"},u={class:"nav-right"},O={key:0,class:"cart-badge"},j={class:"notification-menu"},m={key:0,class:"notification-badge"},p={key:0,class:"notifications-dropdown"},h={class:"dropdown-header"},v={class:"notifications-list"},g={key:0,class:"empty-notifications"},f={class:"icon material-symbols-rounded"},y={class:"content"},k={class:"timestamp"},w=["onClick"],C={class:"username"},S={key:0,class:"user-dropdown"},_={key:0,class:"mobile-nav"},x={class:"mobile-nav-header"},A={class:"mobile-nav-links"};function M(e,t,a,s,i,l){const n=Object(c["D"])("router-link"),M=Object(c["D"])("CartSlideOver");return Object(c["x"])(),Object(c["h"])("header",r,[Object(c["i"])("nav",o,[Object(c["i"])("div",d,[Object(c["l"])(n,{to:"/",class:"logo"},{default:Object(c["O"])(()=>t[8]||(t[8]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"style",-1),Object(c["k"])(" CardWatcher ")])),_:1}),Object(c["i"])("div",b,[Object(c["l"])(n,{to:"/collection"},{default:Object(c["O"])(()=>t[9]||(t[9]=[Object(c["k"])("Browse")])),_:1}),Object(c["l"])(n,{to:"/store"},{default:Object(c["O"])(()=>t[10]||(t[10]=[Object(c["k"])("Store")])),_:1}),s.isLoggedIn?(Object(c["x"])(),Object(c["h"])(c["a"],{key:0},[Object(c["l"])(n,{to:"/my-collection"},{default:Object(c["O"])(()=>t[11]||(t[11]=[Object(c["k"])("My Collection")])),_:1}),Object(c["l"])(n,{to:"/wishlist"},{default:Object(c["O"])(()=>t[12]||(t[12]=[Object(c["k"])("Wishlist")])),_:1})],64)):Object(c["g"])("",!0)])]),Object(c["i"])("div",u,[Object(c["l"])(n,{to:"/cart",class:"cart-button"},{default:Object(c["O"])(()=>[t[13]||(t[13]=Object(c["i"])("span",{class:"material-symbols-rounded"},"shopping_cart",-1)),s.cart.state.items.length?(Object(c["x"])(),Object(c["h"])("span",O,Object(c["H"])(s.cart.state.items.length),1)):Object(c["g"])("",!0)]),_:1}),Object(c["i"])("div",j,[Object(c["i"])("button",{class:"nav-button notification-button",onClick:t[0]||(t[0]=(...e)=>s.toggleNotifications&&s.toggleNotifications(...e))},[t[14]||(t[14]=Object(c["i"])("span",{class:"material-symbols-rounded"},"notifications",-1)),s.unreadNotifications?(Object(c["x"])(),Object(c["h"])("span",m,Object(c["H"])(s.unreadNotifications),1)):Object(c["g"])("",!0)]),s.showNotifications?(Object(c["x"])(),Object(c["h"])("div",p,[Object(c["i"])("div",h,[t[15]||(t[15]=Object(c["i"])("h3",null,"Notifications",-1)),s.notifications.length?(Object(c["x"])(),Object(c["h"])("button",{key:0,onClick:t[1]||(t[1]=(...e)=>s.clearNotifications&&s.clearNotifications(...e)),class:"clear-button"}," Clear All ")):Object(c["g"])("",!0)]),Object(c["i"])("div",v,[s.notifications.length?Object(c["g"])("",!0):(Object(c["x"])(),Object(c["h"])("div",g,t[16]||(t[16]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"notifications_off",-1),Object(c["i"])("p",null,"No notifications",-1)]))),(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.notifications,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:Object(c["r"])(["notification-item",e.type])},[Object(c["i"])("span",f,Object(c["H"])(s.getNotificationIcon(e.type)),1),Object(c["i"])("div",y,[Object(c["i"])("p",null,Object(c["H"])(e.message),1),Object(c["i"])("span",k,Object(c["H"])(s.formatTime(e.timestamp)),1)]),Object(c["i"])("button",{class:"dismiss-button",onClick:Object(c["R"])(t=>s.dismissNotification(e.id),["stop"])},t[17]||(t[17]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1)]),8,w)],2))),128))])])):Object(c["g"])("",!0)]),s.isLoggedIn?(Object(c["x"])(),Object(c["h"])(c["a"],{key:0},[Object(c["i"])("button",{class:"user-menu",onClick:t[2]||(t[2]=(...e)=>s.toggleUserMenu&&s.toggleUserMenu(...e))},[t[18]||(t[18]=Object(c["i"])("span",{class:"material-symbols-rounded"},"account_circle",-1)),Object(c["i"])("span",C,[Object(c["k"])(Object(c["H"])(s.userDisplayName)+" ",1),Object(c["i"])("span",{class:Object(c["r"])(["role-badge",s.userRole])},Object(c["H"])(s.userRole),3)]),t[19]||(t[19]=Object(c["i"])("span",{class:"material-symbols-rounded"},"expand_more",-1))]),s.showUserMenu?(Object(c["x"])(),Object(c["h"])("div",S,[Object(c["l"])(n,{to:"/profile",class:"dropdown-item"},{default:Object(c["O"])(()=>t[20]||(t[20]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"person",-1),Object(c["k"])(" Profile ")])),_:1}),Object(c["l"])(n,{to:"/orders",class:"dropdown-item"},{default:Object(c["O"])(()=>t[21]||(t[21]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"receipt_long",-1),Object(c["k"])(" My Orders ")])),_:1}),s.isAdmin?(Object(c["x"])(),Object(c["f"])(n,{key:0,to:"/admin",class:"dropdown-item"},{default:Object(c["O"])(()=>t[22]||(t[22]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"admin_panel_settings",-1),Object(c["k"])(" Admin Panel ")])),_:1})):Object(c["g"])("",!0),Object(c["i"])("button",{onClick:t[3]||(t[3]=(...e)=>s.handleSignOut&&s.handleSignOut(...e)),class:"dropdown-item"},t[23]||(t[23]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"logout",-1),Object(c["k"])(" Sign Out ")]))])):Object(c["g"])("",!0)],64)):(Object(c["x"])(),Object(c["h"])(c["a"],{key:1},[Object(c["l"])(n,{to:"/register",class:"auth-button secondary"},{default:Object(c["O"])(()=>t[24]||(t[24]=[Object(c["k"])("Register")])),_:1}),Object(c["l"])(n,{to:"/login",class:"auth-button primary"},{default:Object(c["O"])(()=>t[25]||(t[25]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"login",-1),Object(c["k"])(" Sign In ")])),_:1})],64))])]),Object(c["l"])(M,{show:e.showCart,onClose:t[4]||(t[4]=t=>e.showCart=!1)},null,8,["show"]),s.showMobileNav?(Object(c["x"])(),Object(c["h"])("div",_,[Object(c["i"])("div",x,[Object(c["i"])("button",{onClick:t[5]||(t[5]=(...e)=>s.toggleMobileNav&&s.toggleMobileNav(...e)),class:"close-button"},t[26]||(t[26]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1)]))]),Object(c["i"])("div",A,[Object(c["l"])(n,{to:"/collection",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[27]||(t[27]=[Object(c["k"])("Browse")])),_:1},8,["onClick"]),Object(c["l"])(n,{to:"/store",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[28]||(t[28]=[Object(c["k"])("Store")])),_:1},8,["onClick"]),Object(c["l"])(n,{to:"/cart",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[29]||(t[29]=[Object(c["k"])("Cart")])),_:1},8,["onClick"]),Object(c["l"])(n,{to:"/notifications",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[30]||(t[30]=[Object(c["k"])("Notifications")])),_:1},8,["onClick"]),s.isLoggedIn?(Object(c["x"])(),Object(c["h"])(c["a"],{key:0},[Object(c["l"])(n,{to:"/my-collection",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[31]||(t[31]=[Object(c["k"])("My Collection")])),_:1},8,["onClick"]),Object(c["l"])(n,{to:"/wishlist",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[32]||(t[32]=[Object(c["k"])("Wishlist")])),_:1},8,["onClick"]),Object(c["l"])(n,{to:"/profile",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[33]||(t[33]=[Object(c["k"])("Profile")])),_:1},8,["onClick"]),Object(c["l"])(n,{to:"/orders",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[34]||(t[34]=[Object(c["k"])("My Orders")])),_:1},8,["onClick"]),s.isAdmin?(Object(c["x"])(),Object(c["f"])(n,{key:0,to:"/admin",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[35]||(t[35]=[Object(c["k"])("Admin Panel")])),_:1},8,["onClick"])):Object(c["g"])("",!0),Object(c["i"])("button",{onClick:t[6]||(t[6]=(...e)=>s.handleSignOut&&s.handleSignOut(...e)),class:"dropdown-item"},"Sign Out")],64)):(Object(c["x"])(),Object(c["h"])(c["a"],{key:1},[Object(c["l"])(n,{to:"/register",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[36]||(t[36]=[Object(c["k"])("Register")])),_:1},8,["onClick"]),Object(c["l"])(n,{to:"/login",onClick:s.toggleMobileNav},{default:Object(c["O"])(()=>t[37]||(t[37]=[Object(c["k"])("Sign In")])),_:1},8,["onClick"])],64))])])):Object(c["g"])("",!0),Object(c["i"])("button",{class:"mobile-nav-toggle",onClick:t[7]||(t[7]=(...e)=>s.toggleMobileNav&&s.toggleMobileNav(...e))},t[38]||(t[38]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"menu",-1)]))])}var P=a("889e"),H=a("8c2f");const I={class:"cart-header"},D={key:0,class:"empty-cart"},U={key:1,class:"cart-items"},T=["src","alt"],N={class:"item-details"},F={class:"item-price"},q={class:"quantity-controls"},R=["onClick"],E=["onClick"],L=["onClick"],V={key:2,class:"cart-footer"},W={class:"subtotal"};function B(e,t,a,s,i,l){return e.show?(Object(c["x"])(),Object(c["h"])("div",{key:0,class:"cart-overlay",onClick:t[3]||(t[3]=t=>e.$emit("close"))},[Object(c["i"])("div",{class:"cart-slideover",onClick:t[2]||(t[2]=Object(c["R"])(()=>{},["stop"]))},[Object(c["i"])("div",I,[t[5]||(t[5]=Object(c["i"])("h2",null,"Shopping Cart",-1)),Object(c["i"])("button",{class:"close-button",onClick:t[0]||(t[0]=t=>e.$emit("close"))},t[4]||(t[4]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1)]))]),e.cart.items.length?(Object(c["x"])(),Object(c["h"])("div",U,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(e.cart.items,a=>(Object(c["x"])(),Object(c["h"])("div",{key:a.id,class:"cart-item"},[Object(c["i"])("img",{src:a.image_url,alt:a.name},null,8,T),Object(c["i"])("div",N,[Object(c["i"])("h3",null,Object(c["H"])(a.name),1),Object(c["i"])("div",F,"$"+Object(c["H"])(a.price),1),Object(c["i"])("div",q,[Object(c["i"])("button",{onClick:t=>e.decrementQuantity(a)},"-",8,R),Object(c["i"])("span",null,Object(c["H"])(a.quantity),1),Object(c["i"])("button",{onClick:t=>e.incrementQuantity(a)},"+",8,E)])]),Object(c["i"])("button",{class:"remove-item",onClick:t=>e.removeItem(a)},t[7]||(t[7]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"delete",-1)]),8,L)]))),128))])):(Object(c["x"])(),Object(c["h"])("div",D,t[6]||(t[6]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"shopping_cart",-1),Object(c["i"])("p",null,"Your cart is empty",-1)]))),e.cart.items.length?(Object(c["x"])(),Object(c["h"])("div",V,[Object(c["i"])("div",W,[t[8]||(t[8]=Object(c["i"])("span",null,"Subtotal",-1)),Object(c["i"])("strong",null,"$"+Object(c["H"])(e.cart.total.toFixed(2)),1)]),Object(c["i"])("button",{class:"checkout-button",onClick:t[1]||(t[1]=(...t)=>e.checkout&&e.checkout(...t))},t[9]||(t[9]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"payments",-1),Object(c["k"])(" Checkout ")]))])):Object(c["g"])("",!0)])])):Object(c["g"])("",!0)}var $=a("4c16"),z=a("79a7"),Q=Object(c["m"])({name:"CartSlideOver",props:{show:Boolean},setup(){async function e(){try{const{data:e,error:t}=await z["a"].functions.invoke("create-checkout-session",{body:{items:H["a"].items}});if(t)throw t;const a=await Object($["a"])("pk_test_51QrkgR4CfmNPourcrOX3w5QB0d3oS76LrpMWcaGU8lnsj7mAc8SlPE3rEDZm8HLpezTqlTvAOwR2QOkl4xFTMAwu00SfIVQ1iY");await a.redirectToCheckout({sessionId:e.id})}catch(e){console.error("Checkout error:",e),alert("Failed to initiate checkout")}}function t(e){H["a"].updateQuantity(e.id,e.quantity+1)}function a(e){e.quantity>1&&H["a"].updateQuantity(e.id,e.quantity-1)}function c(e){H["a"].removeItem(e.id)}return{cart:H["a"],checkout:e,incrementQuantity:t,decrementQuantity:a,removeItem:c}}}),J=(a("3e12"),a("6b0d")),G=a.n(J);const K=G()(Q,[["render",B],["__scopeId","data-v-48223bb6"]]);var Z=K,X=a("6605");const Y=Object(c["z"])({notifications:[],show:!1}),ee={state:Y,notify(e,t="info",a=5e3,c=Date.now()){const s={id:c,message:e,type:t,timestamp:new Date,read:!1},i=this.state.notifications.findIndex(e=>e.id===c);return-1!==i?this.state.notifications[i]=s:this.state.notifications.push(s),"success"===t&&a&&setTimeout(()=>{this.remove(c)},a),c},success(e,t){return this.notify(e,"success",t)},error(e,t){return this.notify(e,"error",t)},warning(e,t){return this.notify(e,"warning",t)},info(e,t){return this.notify(e,"info",t)},async markAsRead(e){const t=this.state.notifications.find(t=>t.id===e);t&&(t.read=!0,"string"===typeof e&&await z["a"].from("notifications").update({read:!0}).eq("id",e))},async markAllAsRead(){this.state.notifications.forEach(e=>e.read=!0),await z["a"].from("notifications").update({read:!0}).eq("read",!1)},async loadUserNotifications(){const{data:{user:e}}=await z["a"].auth.getUser();if(!e)return;const{data:t,error:a}=await z["a"].from("notifications").select("*").or(`recipient_id.eq.${e.id},recipient_id.is.null`).order("created_at",{ascending:!1});!a&&t&&t.forEach(e=>{this.notify(e.message,e.type,null,e.id)})},remove(e){const t=this.state.notifications.findIndex(t=>t.id===e);-1!==t&&this.state.notifications.splice(t,1)},clear(){this.state.notifications=[]},async sendToAll({message:e,type:t="info",duration:a=5e3}){try{const{data:{user:c}}=await z["a"].auth.getUser(),{error:s}=await z["a"].from("notifications").insert({message:e,type:t,sender_id:c.id,recipient_id:null,duration:a});if(s)throw s}catch(c){throw console.error("Error sending notification:",c),c}},async sendToUsers({userIds:e,message:t,type:a="info",duration:c=5e3}){try{const{data:{user:s}}=await z["a"].auth.getUser(),i=e.map(e=>({message:t,type:a,sender_id:s.id,recipient_id:e,duration:c})),{error:l}=await z["a"].from("notifications").insert(i);if(l)throw l}catch(s){throw console.error("Error sending notifications:",s),s}},subscribeToNotifications(e){return z["a"].channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:"recipient_id=is.null OR recipient_id=eq."+e},e=>{this.notify(e.new.message,e.new.type,e.new.duration)}).subscribe()}};var te=ee,ae={name:"AppHeader",components:{CartSlideOver:Z},setup(){const e=Object(c["A"])(!1),t=Object(c["d"])(()=>!!P["a"].state.session),a=Object(c["d"])(()=>{if(!P["a"].state.user)return"";const e=P["a"].state.profile;return e&&e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:P["a"].state.user.email}),s=Object(c["d"])(()=>P["a"].state.isAdmin),i=Object(c["d"])(()=>P["a"].state.isAdmin?"admin":"user"),l=()=>{e.value=!e.value},n=async()=>{await P["a"].signOut(),e.value=!1};Object(X["d"])();Object(c["N"])(()=>H["a"].state.items.length,(e,t)=>{if(e>t){const e=document.querySelector(".cart-badge");e&&(e.classList.add("pulse"),setTimeout(()=>e.classList.remove("pulse"),300))}});const r=Object(c["d"])(()=>te.state.notifications.length),o=Object(c["A"])(!1),d=Object(c["d"])(()=>te.state.notifications),b=()=>{o.value=!o.value},u=e=>{te.remove(e)},O=()=>{te.clear()},j=e=>{const t={success:"check_circle",error:"error",warning:"warning",info:"info"};return t[e]||"notifications"},m=e=>new Date(e).toLocaleTimeString();Object(c["v"])(()=>{document.addEventListener("click",e=>{e.target.closest(".notification-menu")||(o.value=!1)})});const p=Object(c["A"])(!1),h=()=>{p.value=!p.value};return{isLoggedIn:t,showUserMenu:e,toggleUserMenu:l,handleSignOut:n,userDisplayName:a,isAdmin:s,userRole:i,cart:H["a"],unreadNotifications:r,toggleNotifications:b,showNotifications:o,notifications:d,dismissNotification:u,clearNotifications:O,getNotificationIcon:j,formatTime:m,showMobileNav:p,toggleMobileNav:h}}};a("a317");const ce=G()(ae,[["render",M],["__scopeId","data-v-820ecb0e"]]);var se=ce;const ie={class:"notification-center"},le=["onClick"],ne={class:"icon material-symbols-rounded"},re={class:"content"},oe={class:"timestamp"},de=["onClick"];function be(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",ie,[Object(c["l"])(c["c"],{name:"notification",tag:"div",class:"notifications-container"},{default:Object(c["O"])(()=>[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.notifications,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:Object(c["r"])(["notification",e.type,{unread:!e.read}]),onClick:t=>s.markAsRead(e.id)},[Object(c["i"])("span",ne,Object(c["H"])(s.getIcon(e.type)),1),Object(c["i"])("div",re,[Object(c["i"])("p",null,Object(c["H"])(e.message),1),Object(c["i"])("span",oe,Object(c["H"])(s.formatTime(e.timestamp)),1)]),Object(c["i"])("button",{class:"close-button",onClick:Object(c["R"])(t=>s.dismiss(e.id),["stop"])},t[0]||(t[0]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1)]),8,de)],10,le))),128))]),_:1})])}var ue={name:"NotificationCenter",setup(){const e=Object(c["d"])(()=>te.state.notifications),t=e=>{const t={success:"check_circle",error:"error",warning:"warning",info:"info"};return t[e]||"notifications"},a=e=>new Date(e).toLocaleTimeString(),s=e=>{te.remove(e)},i=async e=>{await te.markAsRead(e)};return Object(c["v"])(()=>{te.loadUserNotifications()}),{notifications:e,getIcon:t,formatTime:a,dismiss:s,markAsRead:i}}};a("a087");const Oe=G()(ue,[["render",be],["__scopeId","data-v-0296b84d"]]);var je=Oe,me={name:"App",components:{AppHeader:se,NotificationCenter:je},setup(){return{auth:P["a"]}}};a("dd72");const pe=G()(me,[["render",n]]);var he=pe;const ve={class:"home"},ge={class:"widgets-grid"},fe={class:"widget-grid"},ye={class:"widget highlight-widget"},ke={key:0,class:"card-preview"},we=["src","alt"],Ce={class:"card-info"},Se={class:"price"},_e={class:"widget"},xe={class:"trend-list"},Ae={class:"trend-name"},Me={class:"widget"},Pe={class:"news-list"},He={class:"news-date"},Ie={class:"widget"},De={class:"value-list"},Ue={key:0,class:"cta-section"},Te={class:"cta-content"},Ne={class:"cta-buttons"};function Fe(e,t,a,s,i,l){const n=Object(c["D"])("MarketWidget"),r=Object(c["D"])("TrendingCardsWidget"),o=Object(c["D"])("router-link");return Object(c["x"])(),Object(c["h"])("div",ve,[t[12]||(t[12]=Object(c["i"])("header",{class:"page-header"},[Object(c["i"])("div",{class:"header-content"},[Object(c["i"])("h1",null,"Welcome back!"),Object(c["i"])("p",{class:"subtitle"},"Track your Pokémon card collection and market trends")])],-1)),Object(c["i"])("div",ge,[Object(c["l"])(n,{class:"widget"}),Object(c["l"])(r,{class:"widget"})]),Object(c["i"])("div",fe,[Object(c["i"])("div",ye,[t[0]||(t[0]=Object(c["i"])("span",{class:"material-symbols-rounded widget-icon"},"diamond",-1)),t[1]||(t[1]=Object(c["i"])("h2",null,"Most Expensive Card",-1)),i.mostExpensiveCard?(Object(c["x"])(),Object(c["h"])("div",ke,[Object(c["i"])("img",{src:i.mostExpensiveCard.imageUrl,alt:i.mostExpensiveCard.name},null,8,we),Object(c["i"])("div",Ce,[Object(c["i"])("h3",null,Object(c["H"])(i.mostExpensiveCard.name),1),Object(c["i"])("p",Se,"$"+Object(c["H"])(i.mostExpensiveCard.price),1)])])):Object(c["g"])("",!0)]),Object(c["i"])("div",_e,[t[2]||(t[2]=Object(c["i"])("span",{class:"material-symbols-rounded widget-icon"},"trending_up",-1)),t[3]||(t[3]=Object(c["i"])("h2",null,"Market Trends",-1)),Object(c["i"])("ul",xe,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(i.trends,e=>(Object(c["x"])(),Object(c["h"])("li",{key:e.id},[Object(c["i"])("span",Ae,Object(c["H"])(e.name),1),Object(c["i"])("span",{class:Object(c["r"])(["trend-change",e.direction])},Object(c["H"])(e.change)+"% ",3)]))),128))])]),Object(c["i"])("div",Me,[t[4]||(t[4]=Object(c["i"])("span",{class:"material-symbols-rounded widget-icon"},"newspaper",-1)),t[5]||(t[5]=Object(c["i"])("h2",null,"Latest News",-1)),Object(c["i"])("div",Pe,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(i.news,e=>(Object(c["x"])(),Object(c["h"])("article",{key:e.id,class:"news-item"},[Object(c["i"])("h4",null,Object(c["H"])(e.title),1),Object(c["i"])("p",null,Object(c["H"])(e.excerpt),1),Object(c["i"])("span",He,Object(c["H"])(e.date),1)]))),128))])]),Object(c["i"])("div",Ie,[t[6]||(t[6]=Object(c["i"])("span",{class:"material-symbols-rounded widget-icon"},"star",-1)),t[7]||(t[7]=Object(c["i"])("h2",null,"Top Valued Cards",-1)),Object(c["i"])("ol",De,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(i.topValuedCards,e=>(Object(c["x"])(),Object(c["h"])("li",{key:e.id},Object(c["H"])(e.name)+" - $"+Object(c["H"])(e.price),1))),128))])])]),l.isLoggedIn?Object(c["g"])("",!0):(Object(c["x"])(),Object(c["h"])("div",Ue,[Object(c["i"])("div",Te,[t[10]||(t[10]=Object(c["i"])("h2",null,"Want to track your collection?",-1)),t[11]||(t[11]=Object(c["i"])("p",null,"Create a free account to manage your Pokémon card collection and wishlist.",-1)),Object(c["i"])("div",Ne,[Object(c["l"])(o,{to:"/register",class:"cta-button primary"},{default:Object(c["O"])(()=>t[8]||(t[8]=[Object(c["k"])(" Create Account ")])),_:1}),Object(c["l"])(o,{to:"/login",class:"cta-button secondary"},{default:Object(c["O"])(()=>t[9]||(t[9]=[Object(c["k"])(" Sign In ")])),_:1})])])]))])}const qe={class:"collection-wrapper"},Re={class:"collection"},Ee={class:"collection-header"},Le={class:"header-content"},Ve={class:"subtitle"},We={class:"filter-section"},Be={class:"search-wrapper"},$e={class:"search-bar"},ze={class:"controls"},Qe={class:"view-toggle"},Je={key:0,class:"search-filters"},Ge={class:"filter-chip"},Ke={class:"filter-chip"},Ze={class:"filter-chip"},Xe={key:0,class:"loading-overlay"},Ye={key:1},et={key:0,class:"card-actions"},tt=["onClick","title"],at={class:"material-symbols-rounded"},ct=["onClick","title"],st={class:"material-symbols-rounded"},it=["src","alt","onClick"],lt={class:"card-details"},nt={class:"card-meta"},rt={class:"card-set"},ot={key:0,class:"card-rarity"},dt={key:0,class:"card-price"},bt={key:0,class:"load-more"},ut={key:1,class:"no-results"};function Ot(e,t,a,s,i,l){const n=Object(c["D"])("SetFilter"),r=Object(c["D"])("CardDetailsModal"),o=Object(c["E"])("intersect");return Object(c["x"])(),Object(c["h"])("div",qe,[Object(c["i"])("div",Re,[Object(c["i"])("div",Ee,[Object(c["i"])("div",Le,[t[12]||(t[12]=Object(c["i"])("h1",null,"Browse Pokémon Cards",-1)),Object(c["i"])("p",Ve,Object(c["H"])(i.totalCards)+" cards available",1)]),Object(c["i"])("div",We,[Object(c["i"])("div",Be,[Object(c["i"])("div",$e,[t[14]||(t[14]=Object(c["i"])("span",{class:"material-symbols-rounded search-icon"},"search",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),placeholder:"Search by name, type, or rarity...",type:"text",onFocus:t[1]||(t[1]=e=>i.searchActive=!0),onBlur:t[2]||(t[2]=e=>i.searchActive=!1)},null,544),[[c["M"],i.searchQuery]]),i.searchQuery?(Object(c["x"])(),Object(c["h"])("button",{key:0,class:"clear-button",onClick:t[3]||(t[3]=(...e)=>l.clearSearch&&l.clearSearch(...e))},t[13]||(t[13]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1)]))):Object(c["g"])("",!0)]),Object(c["i"])("div",ze,[Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.sortBy=e),class:"sort-select"},t[15]||(t[15]=[Object(c["j"])('<option value="name" data-v-27186d76>Name (A-Z)</option><option value="-name" data-v-27186d76>Name (Z-A)</option><option value="-cardmarket.prices.averageSellPrice" data-v-27186d76>Price (High to Low)</option><option value="cardmarket.prices.averageSellPrice" data-v-27186d76>Price (Low to High)</option><option value="-set.releaseDate" data-v-27186d76>Newest First</option><option value="set.releaseDate" data-v-27186d76>Oldest First</option>',6)]),512),[[c["L"],i.sortBy]]),Object(c["i"])("div",Qe,[Object(c["i"])("button",{class:Object(c["r"])(["view-button",{active:"grid"===i.viewMode}]),onClick:t[5]||(t[5]=e=>l.setViewMode("grid")),title:"Grid View"},t[16]||(t[16]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"grid_view",-1)]),2),Object(c["i"])("button",{class:Object(c["r"])(["view-button",{active:"list"===i.viewMode}]),onClick:t[6]||(t[6]=e=>l.setViewMode("list")),title:"List View"},t[17]||(t[17]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"view_list",-1)]),2)])])]),i.searchActive||i.searchQuery?(Object(c["x"])(),Object(c["h"])("div",Je,[Object(c["i"])("label",Ge,[Object(c["P"])(Object(c["i"])("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>i.searchInNames=e)},null,512),[[c["J"],i.searchInNames]]),t[18]||(t[18]=Object(c["i"])("span",{class:"material-symbols-rounded"},"label",-1)),t[19]||(t[19]=Object(c["k"])(" Names "))]),Object(c["i"])("label",Ke,[Object(c["P"])(Object(c["i"])("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>i.searchInTypes=e)},null,512),[[c["J"],i.searchInTypes]]),t[20]||(t[20]=Object(c["i"])("span",{class:"material-symbols-rounded"},"bolt",-1)),t[21]||(t[21]=Object(c["k"])(" Types "))]),Object(c["i"])("label",Ze,[Object(c["P"])(Object(c["i"])("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>i.searchInRarity=e)},null,512),[[c["J"],i.searchInRarity]]),t[22]||(t[22]=Object(c["i"])("span",{class:"material-symbols-rounded"},"diamond",-1)),t[23]||(t[23]=Object(c["k"])(" Rarity "))])])):Object(c["g"])("",!0)])]),Object(c["l"])(n,{sets:i.sets,selectedSet:i.selectedSet,onSelect:l.selectSet,onClear:l.clearSetFilter},null,8,["sets","selectedSet","onSelect","onClear"]),Object(c["l"])(c["b"],{name:"fade",mode:"out-in"},{default:Object(c["O"])(()=>[i.loading?(Object(c["x"])(),Object(c["h"])("div",Xe,t[24]||(t[24]=[Object(c["i"])("div",{class:"loading-content"},[Object(c["i"])("div",{class:"loading-spinner"}),Object(c["i"])("p",null,"Loading Pokémon Cards...")],-1)]))):(Object(c["x"])(),Object(c["h"])("div",Ye,[Object(c["l"])(c["c"],{name:i.viewMode,tag:"div",class:Object(c["r"])(["cards-container",i.viewMode])},{default:Object(c["O"])(()=>[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(l.displayedCards,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:Object(c["r"])(["card-item",{"list-view":"list"===i.viewMode}])},[i.auth.state.session?(Object(c["x"])(),Object(c["h"])("div",et,[Object(c["i"])("button",{class:Object(c["r"])(["action-button",{active:l.isInCollection(e.id)}]),onClick:Object(c["R"])(t=>l.toggleCollection(e),["stop"]),title:l.isInCollection(e.id)?"Remove from Collection":"Add to Collection"},[Object(c["i"])("span",at,Object(c["H"])(l.isInCollection(e.id)?"library_add_check":"library_add"),1)],10,tt),Object(c["i"])("button",{class:Object(c["r"])(["action-button",{active:l.isInWishlist(e.id)}]),onClick:Object(c["R"])(t=>l.toggleWishlist(e),["stop"]),title:l.isInWishlist(e.id)?"Remove from Wishlist":"Add to Wishlist"},[Object(c["i"])("span",st,Object(c["H"])(l.isInWishlist(e.id)?"favorite":"favorite_border"),1)],10,ct)])):Object(c["g"])("",!0),Object(c["i"])("img",{src:e.imageUrl||e.images.small,alt:e.name,loading:"lazy",onClick:t=>l.openCardModal(e)},null,8,it),Object(c["i"])("div",lt,[Object(c["i"])("h3",null,Object(c["H"])(e.name),1),Object(c["i"])("div",nt,[Object(c["i"])("span",rt,Object(c["H"])(e.set.name),1),e.rarity?(Object(c["x"])(),Object(c["h"])("span",ot,Object(c["H"])(e.rarity),1)):Object(c["g"])("",!0)]),"N/A"!==e.price?(Object(c["x"])(),Object(c["h"])("div",dt," €"+Object(c["H"])(e.price.toFixed(2)),1)):Object(c["g"])("",!0)])],2))),128))]),_:1},8,["name","class"]),i.hasMore?Object(c["P"])((Object(c["x"])(),Object(c["h"])("div",bt,t[25]||(t[25]=[Object(c["i"])("div",{class:"loading-spinner small"},null,-1),Object(c["k"])(" Loading more cards... ")]))),[[o,l.loadMore]]):0===l.displayedCards.length?(Object(c["x"])(),Object(c["h"])("div",ut,[t[26]||(t[26]=Object(c["i"])("span",{class:"material-symbols-rounded"},"search_off",-1)),t[27]||(t[27]=Object(c["i"])("p",null,"No cards found matching your criteria",-1)),Object(c["i"])("button",{onClick:t[10]||(t[10]=(...e)=>l.resetFilters&&l.resetFilters(...e)),class:"reset-button"},"Reset Filters")])):Object(c["g"])("",!0)]))]),_:1}),i.selectedCard?(Object(c["x"])(),Object(c["f"])(r,{key:0,card:i.selectedCard,onClose:t[11]||(t[11]=e=>i.selectedCard=null)},null,8,["card"])):Object(c["g"])("",!0)])])}const jt={class:"card-image-container"},mt=["src","alt"],pt={key:0,class:"image-placeholder"},ht={class:"card-details"},vt={class:"card-name"},gt={class:"card-type"},ft={class:"card-rarity"},yt={class:"card-price"};function kt(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",{class:"card",onClick:t[1]||(t[1]=t=>e.$emit("card-selected",a.card))},[Object(c["i"])("div",jt,[Object(c["i"])("img",{src:s.imageUrl,alt:a.card.name,class:"card-image",onError:t[0]||(t[0]=(...e)=>s.handleImageError&&s.handleImageError(...e)),ref:"cardImage"},null,40,mt),i.hasValidImage?Object(c["g"])("",!0):(Object(c["x"])(),Object(c["h"])("div",pt,t[2]||(t[2]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"broken_image",-1),Object(c["i"])("span",null,"No image available",-1)])))]),Object(c["i"])("div",ht,[Object(c["i"])("h3",vt,Object(c["H"])(a.card.name),1),Object(c["i"])("p",gt,Object(c["H"])(a.card.type),1),Object(c["i"])("p",ft,Object(c["H"])(a.card.rarity),1),Object(c["i"])("p",yt,Object(c["H"])(l.formatPrice(a.card.price)),1)])])}var wt=a("b7f1"),Ct={name:"Card",props:{card:{type:Object,required:!0}},data(){return{hasValidImage:!0}},setup(e){const t=computed(()=>Object(wt["a"])(e.card.imageUrl));return{imageUrl:t,handleImageError:wt["b"]}},methods:{handleClick(){this.$emit("card-selected",this.card)},formatPrice(e){return"N/A"===e?"N/A":"$"+Number(e).toFixed(2)}}};a("e069");const St=G()(Ct,[["render",kt],["__scopeId","data-v-538121a9"]]);var _t=St,xt=a("2064");const At={class:"set-filter"},Mt={class:"set-grid",ref:"setGrid"},Pt={class:"set-content"},Ht={class:"set-info"},It={class:"set-date"},Dt=["onClick"],Ut={class:"set-content"},Tt={class:"set-icon"},Nt=["src","alt"],Ft={key:1,class:"material-symbols-rounded"},qt={class:"set-info"},Rt={class:"set-name"},Et={class:"set-date"};function Lt(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",At,[Object(c["i"])("div",{class:Object(c["r"])(["set-list",{expanded:i.isExpanded}])},[Object(c["i"])("div",Mt,[Object(c["i"])("button",{class:Object(c["r"])(["set-button all-sets",{active:!a.selectedSet}]),onClick:t[0]||(t[0]=t=>e.$emit("clear"))},[Object(c["i"])("div",Pt,[t[3]||(t[3]=Object(c["i"])("div",{class:"set-icon"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"category")],-1)),Object(c["i"])("div",Ht,[t[2]||(t[2]=Object(c["i"])("span",{class:"set-name"},"All Sets",-1)),Object(c["i"])("span",It,Object(c["H"])(a.sets.length)+" sets available",1)])])],2),(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(l.displayedSets,e=>(Object(c["x"])(),Object(c["h"])("button",{key:e.id,class:Object(c["r"])(["set-button",{active:a.selectedSet===e.id}]),onClick:t=>l.selectSet(e.id)},[Object(c["i"])("div",Ut,[Object(c["i"])("div",Tt,[l.hasLogo(e)?(Object(c["x"])(),Object(c["h"])("img",{key:0,src:e.images.logo,alt:e.name,class:"set-logo",loading:"lazy"},null,8,Nt)):(Object(c["x"])(),Object(c["h"])("span",Ft,"style"))]),Object(c["i"])("div",qt,[Object(c["i"])("span",Rt,Object(c["H"])(e.name),1),Object(c["i"])("span",Et,Object(c["H"])(l.formatDate(e.releaseDate)),1)]),t[4]||(t[4]=Object(c["i"])("div",{class:"selection-highlight"},null,-1))])],10,Dt))),128))],512)],2),l.canLoadMore?(Object(c["x"])(),Object(c["h"])("button",{key:0,class:"load-more-button",onClick:t[1]||(t[1]=(...e)=>l.loadMoreSets&&l.loadMoreSets(...e))},[t[5]||(t[5]=Object(c["i"])("span",{class:"material-symbols-rounded"},"add_circle",-1)),Object(c["k"])(" Load More Sets ("+Object(c["H"])(l.remainingSets)+" remaining) ",1)])):Object(c["g"])("",!0)])}var Vt={name:"SetFilter",props:{sets:{type:Array,default:()=>[]},selectedSet:{type:String,default:null}},data(){return{displayCount:4,increment:10,isExpanded:!1,defaultVisibleCount:10,canScrollUp:!1,canScrollDown:!1}},computed:{displayedSets(){return this.sets.slice(0,this.displayCount)},canLoadMore(){return this.displayCount<this.sets.length},remainingSets(){return this.sets.length-this.displayCount},visibleSets(){return this.isExpanded?this.sets:this.sets.slice(0,this.defaultVisibleCount)}},methods:{hasLogo(e){return e.images&&e.images.logo},toggleExpand(){this.isExpanded=!this.isExpanded},formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short"}):""},selectSet(e){this.$emit("select",e),this.$nextTick(()=>{const e=this.$refs.setGrid.querySelector(".set-button.active");e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})})},checkScroll(){const e=this.$refs.setGrid;e&&(this.canScrollUp=e.scrollTop>0,this.canScrollDown=e.scrollTop<e.scrollHeight-e.clientHeight)},loadMoreSets(){this.displayCount=Math.min(this.displayCount+this.increment,this.sets.length)}},mounted(){const e=this.$refs.setGrid;e&&(e.addEventListener("scroll",this.checkScroll),this.checkScroll())},beforeUnmount(){const e=this.$refs.setGrid;e&&e.removeEventListener("scroll",this.checkScroll)}};a("8fb5");const Wt=G()(Vt,[["render",Lt],["__scopeId","data-v-eefeb482"]]);var Bt=Wt;const $t={class:"card-showcase"},zt={class:"card-image"},Qt=["src","alt"],Jt={class:"card-info"},Gt={class:"info-header"},Kt={class:"set-info"},Zt=["src","alt"],Xt=["src","alt"],Yt={class:"details-grid"},ea={class:"detail-item"},ta={class:"value"},aa={class:"detail-item"},ca={class:"value"},sa={class:"detail-item"},ia={class:"value"},la={class:"detail-item"},na={class:"value price"},ra={key:0,class:"card-description"},oa={key:1,class:"action-buttons"},da={class:"material-symbols-rounded"},ba={class:"material-symbols-rounded"};function ua(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",{class:"modal-overlay",onClick:t[5]||(t[5]=t=>e.$emit("close"))},[Object(c["i"])("div",{class:"modal-content",onClick:t[4]||(t[4]=Object(c["R"])(()=>{},["stop"]))},[Object(c["i"])("button",{class:"close-button",onClick:t[0]||(t[0]=t=>e.$emit("close"))},t[6]||(t[6]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1)])),Object(c["i"])("div",$t,[Object(c["i"])("div",zt,[Object(c["i"])("img",{src:a.card.imageUrl||a.card.images.large||a.card.images.small,alt:a.card.name},null,8,Qt)]),Object(c["i"])("div",Jt,[Object(c["i"])("div",Gt,[Object(c["i"])("div",null,[Object(c["i"])("h2",null,Object(c["H"])(a.card.name),1),Object(c["i"])("div",Kt,[a.card.set.images&&a.card.set.images.symbol?(Object(c["x"])(),Object(c["h"])("img",{key:0,src:a.card.set.images.symbol,alt:a.card.set.name,class:"set-symbol"},null,8,Zt)):Object(c["g"])("",!0),Object(c["i"])("span",null,Object(c["H"])(a.card.set.name),1)])]),a.card.set.images&&a.card.set.images.logo?(Object(c["x"])(),Object(c["h"])("img",{key:0,src:a.card.set.images.logo,alt:a.card.set.name,class:"set-logo"},null,8,Xt)):Object(c["g"])("",!0)]),Object(c["i"])("div",Yt,[Object(c["i"])("div",ea,[t[7]||(t[7]=Object(c["i"])("span",{class:"label"},"Rarity",-1)),Object(c["i"])("span",ta,Object(c["H"])(a.card.rarity||"Unknown"),1)]),Object(c["i"])("div",aa,[t[8]||(t[8]=Object(c["i"])("span",{class:"label"},"Card Number",-1)),Object(c["i"])("span",ca,Object(c["H"])(a.card.number||"N/A")+"/"+Object(c["H"])(a.card.set.total),1)]),Object(c["i"])("div",sa,[t[9]||(t[9]=Object(c["i"])("span",{class:"label"},"Release Date",-1)),Object(c["i"])("span",ia,Object(c["H"])(l.formatDate(a.card.set.releaseDate)),1)]),Object(c["i"])("div",la,[t[10]||(t[10]=Object(c["i"])("span",{class:"label"},"Market Price",-1)),Object(c["i"])("span",na,Object(c["H"])(l.formatPrice(a.card.price)),1)])]),a.card.flavorText?(Object(c["x"])(),Object(c["h"])("div",ra,[Object(c["i"])("p",null,Object(c["H"])(a.card.flavorText),1)])):Object(c["g"])("",!0),s.auth.state.session?(Object(c["x"])(),Object(c["h"])("div",oa,[s.storeProduct?(Object(c["x"])(),Object(c["h"])("button",{key:0,class:"action-btn store",onClick:t[1]||(t[1]=(...e)=>s.goToStore&&s.goToStore(...e))},[t[11]||(t[11]=Object(c["i"])("span",{class:"material-symbols-rounded"},"shopping_cart",-1)),Object(c["k"])(" Buy in Store - €"+Object(c["H"])(s.storeProduct.price.toFixed(2)),1)])):Object(c["g"])("",!0),Object(c["i"])("button",{class:Object(c["r"])(["action-btn collection",{active:s.isInCollection}]),onClick:t[2]||(t[2]=(...e)=>s.toggleCollection&&s.toggleCollection(...e))},[Object(c["i"])("span",da,Object(c["H"])(s.isInCollection?"library_add_check":"library_add"),1),Object(c["k"])(" "+Object(c["H"])(s.isInCollection?"In Collection":"Add to Collection"),1)],2),Object(c["i"])("button",{class:Object(c["r"])(["action-btn wishlist",{active:s.isInWishlist}]),onClick:t[3]||(t[3]=(...e)=>s.toggleWishlist&&s.toggleWishlist(...e))},[Object(c["i"])("span",ba,Object(c["H"])(s.isInWishlist?"favorite":"favorite_border"),1),Object(c["k"])(" "+Object(c["H"])(s.isInWishlist?"In Wishlist":"Add to Wishlist"),1)],2)])):Object(c["g"])("",!0)])])])])}const Oa=Object(c["z"])({cards:[],loading:!1,error:null,filters:{page:1,query:"",orderBy:"name"},totalCards:0,myCollection:[],wishlist:[]});var ja={state:Oa,async loadCards(e={}){Oa.loading=!0,Oa.error=null;try{const t=await pokemonApi.getCards({...Oa.filters,...e});Oa.cards=t.data,Oa.totalCards=t.totalCount,Oa.filters={...Oa.filters,...e}}catch(t){Oa.error=t.message}finally{Oa.loading=!1}},setFilter(e,t){Oa.filters[e]=t},async initializeUserData(){if(P["a"].state.user)try{Oa.loading=!0;const{data:e}=await z["a"].from("collections").select("*").eq("user_id",P["a"].state.user.id);Oa.myCollection=e?e.map(e=>e.card_data):[];const{data:t}=await z["a"].from("wishlists").select("*").eq("user_id",P["a"].state.user.id);Oa.wishlist=t?t.map(e=>e.card_data):[]}catch(e){Oa.error=e.message}finally{Oa.loading=!1}},async addToCollection(e){if(P["a"].state.user&&!this.isInCollection(e.id))try{const t={...e,price:e.cardmarket&&e.cardmarket.prices&&e.cardmarket.prices.averageSellPrice||"N/A",added_at:(new Date).toISOString()},{error:a}=await z["a"].from("collections").insert({user_id:P["a"].state.user.id,card_id:e.id,card_data:t});if(a)throw a;Oa.myCollection.push(t)}catch(t){Oa.error=t.message}},async removeFromCollection(e){if(P["a"].state.user)try{const{error:t}=await z["a"].from("collections").delete().eq("user_id",P["a"].state.user.id).eq("card_id",e);if(t)throw t;Oa.myCollection=Oa.myCollection.filter(t=>t.id!==e)}catch(t){Oa.error=t.message}},async addToWishlist(e){if(P["a"].state.user&&!this.isInWishlist(e.id))try{const{error:t}=await z["a"].from("wishlists").insert({user_id:P["a"].state.user.id,card_id:e.id,card_data:e});if(t)throw t;Oa.wishlist.push(e)}catch(t){Oa.error=t.message}},async removeFromWishlist(e){if(P["a"].state.user)try{const{error:t}=await z["a"].from("wishlists").delete().eq("user_id",P["a"].state.user.id).eq("card_id",e);if(t)throw t;Oa.wishlist=Oa.wishlist.filter(t=>t.id!==e)}catch(t){Oa.error=t.message}},isInCollection(e){return Oa.myCollection.some(t=>t.id===e)},isInWishlist(e){return Oa.wishlist.some(t=>t.id===e)},getCollection(){return Oa.myCollection},getWishlist(){return Oa.wishlist},subscribeToChanges(){if(!P["a"].state.user)return;const e=z["a"].channel("collection_changes").on("postgres_changes",{event:"*",schema:"public",table:"collections",filter:"user_id=eq."+P["a"].state.user.id},e=>{"INSERT"===e.eventType?Oa.myCollection.push(e.new.card_data):"DELETE"===e.eventType&&(Oa.myCollection=Oa.myCollection.filter(t=>t.id!==e.old.card_id))}).subscribe(),t=z["a"].channel("wishlist_changes").on("postgres_changes",{event:"*",schema:"public",table:"wishlists",filter:"user_id=eq."+P["a"].state.user.id},e=>{"INSERT"===e.eventType?Oa.wishlist.push(e.new.card_data):"DELETE"===e.eventType&&(Oa.wishlist=Oa.wishlist.filter(t=>t.id!==e.old.card_id))}).subscribe();return()=>{e.unsubscribe(),t.unsubscribe()}},getCollectionStats(){const e=Oa.myCollection.length,t=Oa.myCollection.reduce((e,t)=>{const a="number"===typeof t.price?t.price:0;return e+a},0);return{totalCards:e,totalValue:t}}},ma={name:"CardDetailsModal",props:{card:{type:Object,required:!0}},setup(e){const t=Object(X["d"])(),a=Object(c["A"])(null),s=async()=>{try{const{data:t}=await z["a"].from("products").select("*").eq("card_id",e.card.id).eq("active",!0).gt("stock",0).single();a.value=t}catch(t){console.error("Error checking store availability:",t)}},i=()=>{a.value&&t.push({name:"Store",query:{product:a.value.id}})};Object(c["v"])(()=>{s()});const l=Object(c["d"])(()=>ja.isInCollection(e.card.id)),n=Object(c["d"])(()=>ja.isInWishlist(e.card.id)),r=()=>{P["a"].state.session&&(l.value?ja.removeFromCollection(e.card.id):ja.addToCollection(e.card))},o=()=>{P["a"].state.session&&(n.value?ja.removeFromWishlist(e.card.id):ja.addToWishlist(e.card))};return{auth:P["a"],isInCollection:l,isInWishlist:n,toggleCollection:r,toggleWishlist:o,storeProduct:a,goToStore:i}},methods:{formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"},formatPrice(e){return"N/A"===e?"N/A":"€"+Number(e).toFixed(2)}}};a("ee29");const pa=G()(ma,[["render",ua],["__scopeId","data-v-56e52e8a"]]);var ha=pa,va={components:{Card:_t,SetFilter:Bt,CardDetailsModal:ha},data(){return{cards:[],sets:[],selectedSet:null,searchQuery:"",sortBy:"name",viewMode:"grid",page:1,loading:!1,hasMore:!0,selectedCard:null,totalCards:0,searchActive:!1,searchInNames:!0,searchInTypes:!1,searchInRarity:!1,auth:P["a"]}},computed:{displayedCards(){return this.cards}},methods:{async fetchCards(e=!1){e&&(this.page=1,this.cards=[]),this.loading=!0;try{const t={page:this.page,orderBy:this.sortBy,q:this.buildSearchQuery(),select:"id,name,images,types,rarity,cardmarket,set"},a=await xt["a"].getCards(t),c=a.data.map(e=>({id:e.id,name:e.name,imageUrl:e.images&&(e.images.small||e.images.large)||"",type:Array.isArray(e.types)?e.types[0]:"Unknown",rarity:e.rarity||"Common",price:e.cardmarket&&e.cardmarket.prices?e.cardmarket.prices.averageSellPrice:"N/A",set:e.set}));this.cards=e?c:[...this.cards,...c],this.totalCards=a.totalCount,this.hasMore=this.cards.length<this.totalCards}catch(t){console.error("Error fetching cards:",t)}finally{this.loading=!1}},async fetchSets(){try{const e=await xt["a"].getSets();this.sets=e.data}catch(e){console.error("Error fetching sets:",e)}},selectSet(e){this.selectedSet=e,this.fetchCards(!0)},clearSetFilter(){this.selectedSet=null,this.fetchCards(!0)},loadMore(){!this.loading&&this.hasMore&&(this.page++,this.fetchCards())},openCardModal(e){this.selectedCard=e},clearSearch(){this.searchQuery="",this.fetchCards(!0)},setViewMode(e){localStorage.setItem("preferredViewMode",e),this.viewMode=e},resetFilters(){this.searchQuery="",this.selectedSet=null,this.sortBy="name",this.fetchCards(!0)},buildSearchQuery(){let e="";if(this.searchQuery){const t=[];this.searchInNames&&t.push(`name:"*${this.searchQuery}*"`),this.searchInTypes&&t.push(`types:"*${this.searchQuery}*"`),this.searchInRarity&&t.push(`rarity:"*${this.searchQuery}*"`),e=t.join(" OR ")}return this.selectedSet&&(e=e?`(${e}) AND set.id:${this.selectedSet}`:"set.id:"+this.selectedSet),e},isInCollection(e){return ja.isInCollection(e)},isInWishlist(e){return ja.isInWishlist(e)},toggleCollection(e){this.auth.state.session&&(this.isInCollection(e.id)?ja.removeFromCollection(e.id):ja.addToCollection(e))},toggleWishlist(e){this.auth.state.session&&(this.isInWishlist(e.id)?ja.removeFromWishlist(e.id):ja.addToWishlist(e))}},watch:{searchQuery:ga((function(){this.fetchCards(!0)}),300),sortBy(){this.fetchCards(!0)}},mounted(){this.fetchSets(),this.fetchCards(),this.viewMode=localStorage.getItem("preferredViewMode")||"grid"}};function ga(e,t){let a;return function(...c){clearTimeout(a),a=setTimeout(()=>e.apply(this,c),t)}}a("bb18");const fa=G()(va,[["render",Ot],["__scopeId","data-v-27186d76"]]);var ya=fa;const ka={class:"market-widget"},wa={class:"widget-header"};function Ca(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",ka,[Object(c["i"])("div",wa,[t[2]||(t[2]=Object(c["i"])("h2",null,"Market Overview",-1)),Object(c["i"])("button",{class:"refresh-button",onClick:t[0]||(t[0]=(...e)=>l.refreshData&&l.refreshData(...e))},t[1]||(t[1]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"refresh",-1)]))]),t[3]||(t[3]=Object(c["j"])('<div class="market-stats" data-v-336e696f><div class="stat-item" data-v-336e696f><div class="stat-label" data-v-336e696f>Market Volume</div><div class="stat-value" data-v-336e696f>$123,456</div><div class="stat-trend up" data-v-336e696f><span class="material-symbols-rounded" data-v-336e696f>trending_up</span> +5.2% </div></div><div class="stat-item" data-v-336e696f><div class="stat-label" data-v-336e696f>Active Listings</div><div class="stat-value" data-v-336e696f>24,789</div><div class="stat-trend down" data-v-336e696f><span class="material-symbols-rounded" data-v-336e696f>trending_down</span> -2.1% </div></div><div class="stat-item" data-v-336e696f><div class="stat-label" data-v-336e696f>Avg Card Price</div><div class="stat-value" data-v-336e696f>$48.32</div><div class="stat-trend up" data-v-336e696f><span class="material-symbols-rounded" data-v-336e696f>trending_up</span> +1.8% </div></div></div>',1))])}var Sa={name:"MarketWidget",methods:{refreshData(){}}};a("3b4f");const _a=G()(Sa,[["render",Ca],["__scopeId","data-v-336e696f"]]);var xa=_a;const Aa={class:"trending-widget"},Ma={class:"widget-header"},Pa={class:"time-filter"},Ha=["onClick"],Ia={class:"trending-cards"},Da=["src","alt"],Ua={class:"card-info"},Ta={class:"card-name"},Na={class:"card-price"},Fa={class:"material-symbols-rounded"};function qa(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",Aa,[Object(c["i"])("div",Ma,[t[0]||(t[0]=Object(c["i"])("h2",null,"Trending Cards",-1)),Object(c["i"])("div",Pa,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(i.periods,e=>(Object(c["x"])(),Object(c["h"])("button",{key:e,class:Object(c["r"])({active:i.selectedPeriod===e}),onClick:t=>i.selectedPeriod=e},Object(c["H"])(e),11,Ha))),128))])]),Object(c["i"])("div",Ia,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(i.trendingCards,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"trend-card"},[Object(c["i"])("img",{src:e.image,alt:e.name,class:"card-thumbnail"},null,8,Da),Object(c["i"])("div",Ua,[Object(c["i"])("div",Ta,Object(c["H"])(e.name),1),Object(c["i"])("div",Na,"$"+Object(c["H"])(e.price),1),Object(c["i"])("div",{class:Object(c["r"])(["price-change",e.change>0?"up":"down"])},[Object(c["i"])("span",Fa,Object(c["H"])(e.change>0?"trending_up":"trending_down"),1),Object(c["k"])(" "+Object(c["H"])(Math.abs(e.change))+"% ",1)],2)])]))),128))])])}var Ra={name:"TrendingCardsWidget",data(){return{periods:["24h","7d","30d"],selectedPeriod:"24h",trendingCards:[{id:1,name:"Charizard VMAX",price:189.99,change:12.5,image:"path/to/image"}]}}};a("dfd6");const Ea=G()(Ra,[["render",qa],["__scopeId","data-v-c75984e0"]]);var La=Ea,Va={name:"Home",components:{Collection:ya,MarketWidget:xa,TrendingCardsWidget:La},data(){return{mostExpensiveCard:null,topValuedCards:[],trends:[{id:1,name:"Charizard Base Set",change:"+12.5",direction:"up"},{id:2,name:"Pikachu Illustrator",change:"+5.2",direction:"up"},{id:3,name:"Mewtwo GX",change:"-2.1",direction:"down"}],news:[{id:1,title:"New Scarlet & Violet Set Announced",excerpt:"The Pokémon Company reveals exciting new cards...",date:"2 hours ago"},{id:2,title:"Record Breaking Card Sale",excerpt:"Rare Pikachu card sells for unprecedented amount...",date:"1 day ago"}]}},async mounted(){try{const e=await xt["a"].getCards(1,100),t=e.data.map(e=>({id:e.id,name:e.name,imageUrl:e.images.small,price:e.cardmarket&&e.cardmarket.prices?e.cardmarket.prices.averageSellPrice:0})).filter(e=>e.price>0);t.sort((e,t)=>t.price-e.price),this.mostExpensiveCard=t[0],this.topValuedCards=t.slice(0,5)}catch(e){console.error("Error fetching cards:",e)}},computed:{isLoggedIn(){return!!P["a"].state.session}}};a("7307");const Wa=G()(Va,[["render",Fe],["__scopeId","data-v-d72b2e98"]]);var Ba=Wa;const $a={class:"auth-container"},za={class:"auth-card"},Qa={class:"form-group"},Ja={class:"input-wrapper"},Ga={class:"form-group"},Ka={class:"input-wrapper"},Za={key:0,class:"error-message"},Xa=["disabled"],Ya={class:"button-content"},ec={class:"auth-footer"};function tc(e,t,a,s,i,l){const n=Object(c["D"])("router-link");return Object(c["x"])(),Object(c["h"])("div",$a,[Object(c["i"])("div",za,[t[9]||(t[9]=Object(c["i"])("div",{class:"auth-header"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"person_outline"),Object(c["i"])("h1",null,"Welcome Back"),Object(c["i"])("p",{class:"subtitle"},"Sign in to manage your collection")],-1)),Object(c["i"])("form",{onSubmit:t[2]||(t[2]=Object(c["R"])((...e)=>l.handleSubmit&&l.handleSubmit(...e),["prevent"]))},[Object(c["i"])("div",Qa,[Object(c["i"])("div",Ja,[t[3]||(t[3]=Object(c["i"])("span",{class:"material-symbols-rounded"},"mail",-1)),Object(c["P"])(Object(c["i"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),type:"email",placeholder:"Email address",required:""},null,512),[[c["M"],i.email]])])]),Object(c["i"])("div",Ga,[Object(c["i"])("div",Ka,[t[4]||(t[4]=Object(c["i"])("span",{class:"material-symbols-rounded"},"lock",-1)),Object(c["P"])(Object(c["i"])("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),type:"password",placeholder:"Password",required:""},null,512),[[c["M"],i.password]])])]),i.error?(Object(c["x"])(),Object(c["h"])("div",Za,[t[5]||(t[5]=Object(c["i"])("span",{class:"material-symbols-rounded"},"error",-1)),Object(c["k"])(" "+Object(c["H"])(i.error),1)])):Object(c["g"])("",!0),Object(c["i"])("button",{type:"submit",disabled:i.loading,class:Object(c["r"])(["submit-button",{loading:i.loading}])},[Object(c["i"])("span",Ya,[t[6]||(t[6]=Object(c["i"])("span",{class:"material-symbols-rounded"},"login",-1)),Object(c["k"])(" "+Object(c["H"])(i.loading?"Signing in...":"Sign In"),1)])],10,Xa)],32),Object(c["i"])("div",ec,[t[8]||(t[8]=Object(c["i"])("p",null,"Don't have an account?",-1)),Object(c["l"])(n,{to:"/register",class:"auth-link"},{default:Object(c["O"])(()=>t[7]||(t[7]=[Object(c["k"])(" Create Account "),Object(c["i"])("span",{class:"material-symbols-rounded"},"arrow_forward",-1)])),_:1})])])])}var ac={name:"Login",data(){return{email:"",password:"",loading:!1,error:null}},methods:{async handleSubmit(){this.loading=!0,this.error=null;const{user:e,error:t}=await P["a"].signIn(this.email,this.password);t?this.error=t.message:this.$router.push("/dashboard"),this.loading=!1}}};a("15a5");const cc=G()(ac,[["render",tc],["__scopeId","data-v-48df06ae"]]);var sc=cc;const ic={class:"my-collection"},lc={class:"collection-header"},nc={class:"stats"},rc={class:"stat-item"},oc={class:"stat-content"},dc={class:"stat-item"},bc={class:"stat-content"},uc={key:0,class:"cards-grid"},Oc=["onClick"],jc={class:"card-hover-overlay"},mc=["onClick"],pc={class:"card-content"},hc=["src","alt"],vc={class:"card-details"},gc={class:"card-meta"},fc={class:"card-set"},yc={key:0,class:"card-rarity"},kc={key:0,class:"card-price"},wc={key:1,class:"empty-state"};function Cc(e,t,a,s,i,l){const n=Object(c["D"])("router-link"),r=Object(c["D"])("CardDetailsModal");return Object(c["x"])(),Object(c["h"])("div",ic,[Object(c["i"])("div",lc,[t[5]||(t[5]=Object(c["i"])("h1",null,"My Collection",-1)),Object(c["i"])("div",nc,[Object(c["i"])("div",rc,[t[2]||(t[2]=Object(c["i"])("span",{class:"material-symbols-rounded"},"diamond",-1)),Object(c["i"])("div",oc,[t[1]||(t[1]=Object(c["i"])("h3",null,"Total Cards",-1)),Object(c["i"])("p",null,Object(c["H"])(l.collection.length),1)])]),Object(c["i"])("div",dc,[t[4]||(t[4]=Object(c["i"])("span",{class:"material-symbols-rounded"},"payments",-1)),Object(c["i"])("div",bc,[t[3]||(t[3]=Object(c["i"])("h3",null,"Total Value",-1)),Object(c["i"])("p",null,"$"+Object(c["H"])(l.totalValue.toFixed(2)),1)])])])]),l.collection.length?(Object(c["x"])(),Object(c["h"])("div",uc,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(l.collection,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"card-item",onClick:t=>l.showCardDetails(e)},[Object(c["i"])("div",jc,[Object(c["i"])("button",{class:"action-button",onClick:Object(c["R"])(t=>l.removeFromCollection(e.id),["stop"]),title:"Remove from Collection"},t[6]||(t[6]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"remove_circle",-1)]),8,mc)]),Object(c["i"])("div",pc,[Object(c["i"])("img",{src:e.imageUrl||e.images.small,alt:e.name,loading:"lazy"},null,8,hc),Object(c["i"])("div",vc,[Object(c["i"])("h3",null,Object(c["H"])(e.name),1),Object(c["i"])("div",gc,[Object(c["i"])("span",fc,Object(c["H"])(e.set.name),1),e.rarity?(Object(c["x"])(),Object(c["h"])("span",yc,Object(c["H"])(e.rarity),1)):Object(c["g"])("",!0)]),"N/A"!==e.price?(Object(c["x"])(),Object(c["h"])("div",kc," €"+Object(c["H"])(Number(e.price).toFixed(2)),1)):Object(c["g"])("",!0)])])],8,Oc))),128))])):(Object(c["x"])(),Object(c["h"])("div",wc,[t[8]||(t[8]=Object(c["i"])("span",{class:"material-symbols-rounded"},"category",-1)),t[9]||(t[9]=Object(c["i"])("h2",null,"Your collection is empty",-1)),t[10]||(t[10]=Object(c["i"])("p",null,"Start adding cards from the collection page!",-1)),Object(c["l"])(n,{to:"/collection",class:"browse-button"},{default:Object(c["O"])(()=>t[7]||(t[7]=[Object(c["k"])(" Browse Cards ")])),_:1})])),i.selectedCard?(Object(c["x"])(),Object(c["f"])(r,{key:2,card:i.selectedCard,onClose:t[0]||(t[0]=e=>i.selectedCard=null)},null,8,["card"])):Object(c["g"])("",!0)])}var Sc={components:{Card:_t,CardDetailsModal:ha},data(){return{selectedCard:null,unsubscribe:null}},async created(){await ja.initializeUserData(),this.unsubscribe=ja.subscribeToChanges()},unmounted(){this.unsubscribe&&this.unsubscribe()},computed:{collection(){return ja.getCollection()},collectionStats(){return ja.getCollectionStats()},totalValue(){return this.collectionStats.totalValue}},methods:{removeFromCollection(e){ja.removeFromCollection(e)},showCardDetails(e){this.selectedCard=e}}};a("e9a8");const _c=G()(Sc,[["render",Cc],["__scopeId","data-v-58bc3bc8"]]);var xc=_c;const Ac={class:"wishlist"},Mc={class:"wishlist-header"},Pc={class:"stats"},Hc={class:"stat-item"},Ic={class:"stat-content"},Dc={class:"stat-item"},Uc={class:"stat-content"},Tc={key:0,class:"cards-grid"},Nc=["onClick"],Fc={key:0,class:"store-badge"},qc={class:"card-hover-overlay"},Rc=["onClick"],Ec=["onClick"],Lc={class:"card-content"},Vc=["src","alt"],Wc={class:"card-details"},Bc={class:"card-meta"},$c={class:"card-set"},zc={key:0,class:"card-rarity"},Qc={key:0,class:"card-price"},Jc={key:1,class:"empty-state"};function Gc(e,t,a,s,i,l){const n=Object(c["D"])("router-link"),r=Object(c["D"])("CardDetailsModal");return Object(c["x"])(),Object(c["h"])("div",Ac,[Object(c["i"])("div",Mc,[t[5]||(t[5]=Object(c["i"])("h1",null,"My Wishlist",-1)),Object(c["i"])("div",Pc,[Object(c["i"])("div",Hc,[t[2]||(t[2]=Object(c["i"])("span",{class:"material-symbols-rounded"},"favorite",-1)),Object(c["i"])("div",Ic,[t[1]||(t[1]=Object(c["i"])("h3",null,"Wanted Cards",-1)),Object(c["i"])("p",null,Object(c["H"])(i.wishlist.length),1)])]),Object(c["i"])("div",Dc,[t[4]||(t[4]=Object(c["i"])("span",{class:"material-symbols-rounded"},"savings",-1)),Object(c["i"])("div",Uc,[t[3]||(t[3]=Object(c["i"])("h3",null,"Total Value",-1)),Object(c["i"])("p",null,"$"+Object(c["H"])(l.estimatedTotal.toFixed(2)),1)])])])]),i.wishlist.length?(Object(c["x"])(),Object(c["h"])("div",Tc,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(i.wishlist,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:Object(c["r"])(["card-item",{"available-in-store":l.isAvailableInStore(e.id)}]),onClick:t=>l.showCardDetails(e)},[l.isAvailableInStore(e.id)?(Object(c["x"])(),Object(c["h"])("div",Fc,t[6]||(t[6]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"shopping_cart",-1),Object(c["k"])(" Available in Store ")]))):Object(c["g"])("",!0),Object(c["i"])("div",qc,[l.isInCollection(e.id)?Object(c["g"])("",!0):(Object(c["x"])(),Object(c["h"])("button",{key:0,class:"action-button collect",onClick:Object(c["R"])(t=>l.addToCollection(e),["stop"]),title:"Add to Collection"},t[7]||(t[7]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"add_circle",-1)]),8,Rc)),Object(c["i"])("button",{class:"action-button remove",onClick:Object(c["R"])(t=>l.removeFromWishlist(e.id),["stop"]),title:"Remove from Wishlist"},t[8]||(t[8]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"favorite",-1)]),8,Ec)]),Object(c["i"])("div",Lc,[t[9]||(t[9]=Object(c["i"])("div",{class:"card-badge"},"Wishlist",-1)),Object(c["i"])("img",{src:e.imageUrl||e.images.small,alt:e.name,loading:"lazy"},null,8,Vc),Object(c["i"])("div",Wc,[Object(c["i"])("h3",null,Object(c["H"])(e.name),1),Object(c["i"])("div",Bc,[Object(c["i"])("span",$c,Object(c["H"])(e.set.name),1),e.rarity?(Object(c["x"])(),Object(c["h"])("span",zc,Object(c["H"])(e.rarity),1)):Object(c["g"])("",!0)]),"N/A"!==e.price?(Object(c["x"])(),Object(c["h"])("div",Qc," €"+Object(c["H"])(Number(e.price).toFixed(2)),1)):Object(c["g"])("",!0)])])],10,Nc))),128))])):(Object(c["x"])(),Object(c["h"])("div",Jc,[t[11]||(t[11]=Object(c["i"])("span",{class:"material-symbols-rounded"},"favorite_border",-1)),t[12]||(t[12]=Object(c["i"])("h2",null,"Your wishlist is empty",-1)),t[13]||(t[13]=Object(c["i"])("p",null,"Start adding cards you want to collect!",-1)),Object(c["l"])(n,{to:"/collection",class:"browse-button"},{default:Object(c["O"])(()=>t[10]||(t[10]=[Object(c["k"])(" Browse Cards ")])),_:1})])),i.selectedCard?(Object(c["x"])(),Object(c["f"])(r,{key:2,card:i.selectedCard,onClose:t[0]||(t[0]=e=>i.selectedCard=null),onAddedToCollection:l.handleAddedToCollection},null,8,["card","onAddedToCollection"])):Object(c["g"])("",!0)])}function Kc(){const e=Object(c["A"])(new Map),t=async t=>{try{const{data:a}=await z["a"].from("products").select("*").eq("card_id",t).eq("active",!0).gt("stock",0).single();return e.value.set(t,a||null),a}catch(a){return console.error("Error checking store availability:",a),null}};return{availableProducts:e,checkStoreAvailability:t}}var Zc={components:{Card:_t,CardDetailsModal:ha},data(){return{wishlist:[],selectedCard:null,unsubscribe:null}},computed:{estimatedTotal(){return this.wishlist.reduce((e,t)=>{const a="number"===typeof t.price?t.price:0;return e+a},0)}},setup(){const{availableProducts:e,checkStoreAvailability:t}=Kc();return{availableProducts:e,checkStoreAvailability:t}},methods:{loadWishlist(){const e=ja.getWishlist();this.wishlist=e.map(e=>({...e,price:"N/A"!==e.price?Number(e.price):"N/A"}))},removeFromWishlist(e){ja.removeFromWishlist(e),this.loadWishlist()},addToCollection(e){ja.addToCollection(e),ja.removeFromWishlist(e.id),this.loadWishlist()},isInCollection(e){return ja.isInCollection(e)},showCardDetails(e){this.selectedCard=e},handleAddedToCollection(){this.loadWishlist()},isAvailableInStore(e){return void 0!==this.availableProducts.get(e)&&null!==this.availableProducts.get(e)},async checkWishlistAvailability(){for(const e of this.wishlist)await this.checkStoreAvailability(e.id)}},async created(){await ja.initializeUserData(),this.unsubscribe=ja.subscribeToChanges()},async mounted(){this.loadWishlist(),await this.checkWishlistAvailability()},unmounted(){this.unsubscribe&&this.unsubscribe()}};a("0c68");const Xc=G()(Zc,[["render",Gc],["__scopeId","data-v-761fbe7c"]]);var Yc=Xc;const es={class:"admin-container"},ts={class:"admin-header"},as={class:"quick-actions"},cs={class:"quick-stats"},ss={class:"stat-card users"},is={class:"stat-info"},ls={class:"stat-change"},ns={class:"stat-card orders"},rs={class:"stat-info"},os={class:"stat-change"},ds={class:"stat-card revenue"},bs={class:"stat-info"},us={class:"stat-change"},Os={class:"stat-card inventory"},js={class:"stat-info"},ms={class:"stat-change"},ps={class:"admin-tabs"},hs=["onClick"],vs={class:"material-symbols-rounded"},gs={key:0,class:"tab-badge"},fs={key:0,class:"admin-panel"},ys={class:"panel-header"},ks={class:"search-box"},ws={class:"table-container"},Cs={class:"data-table"},Ss={class:"actions"},_s=["onClick"],xs=["onClick"],As={key:1,class:"admin-panel"},Ms={key:2,class:"admin-panel"},Ps={key:3,class:"admin-panel"},Hs={key:4,class:"admin-panel"},Is={key:5,class:"admin-panel"},Ds={key:6,class:"admin-panel"},Us={key:7,class:"admin-panel"},Ts={class:"form-section"},Ns={key:0,class:"form-group"},Fs={class:"input-wrapper"},qs={key:1,class:"form-group"},Rs={class:"input-wrapper"},Es={class:"form-group"},Ls={class:"input-wrapper"},Vs={class:"form-group"},Ws={class:"input-wrapper"},Bs={class:"form-group"},$s={class:"select-wrapper"},zs={class:"form-group"},Qs={class:"select-wrapper"},Js={key:0,class:"error-message"},Gs={class:"form-actions"},Ks=["disabled"],Zs={class:"modal-actions"};function Xs(e,t,a,s,i,l){const n=Object(c["D"])("NewsManager"),r=Object(c["D"])("CardsManager"),o=Object(c["D"])("ReportsManager"),d=Object(c["D"])("SettingsManager"),b=Object(c["D"])("StoreManager"),u=Object(c["D"])("OrderManager"),O=Object(c["D"])("NotificationsManager"),j=Object(c["D"])("Modal");return Object(c["x"])(),Object(c["h"])("div",es,[Object(c["i"])("div",ts,[t[27]||(t[27]=Object(c["i"])("h1",null,"Admin Dashboard",-1)),Object(c["i"])("div",as,[Object(c["i"])("button",{class:"action-btn",onClick:t[0]||(t[0]=(...e)=>s.backupDatabase&&s.backupDatabase(...e))},t[16]||(t[16]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"backup",-1),Object(c["k"])(" Backup Data ")])),Object(c["i"])("button",{class:"action-btn",onClick:t[1]||(t[1]=(...e)=>s.syncCards&&s.syncCards(...e))},t[17]||(t[17]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"sync",-1),Object(c["k"])(" Sync Cards ")])),Object(c["i"])("button",{class:"action-btn warning",onClick:t[2]||(t[2]=(...e)=>s.toggleMaintenance&&s.toggleMaintenance(...e))},[t[18]||(t[18]=Object(c["i"])("span",{class:"material-symbols-rounded"},"build",-1)),Object(c["k"])(" "+Object(c["H"])(s.settings.maintenanceMode?"Disable":"Enable")+" Maintenance ",1)])]),Object(c["i"])("div",cs,[Object(c["i"])("div",ss,[t[20]||(t[20]=Object(c["i"])("div",{class:"stat-icon"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"group")],-1)),Object(c["i"])("div",is,[t[19]||(t[19]=Object(c["i"])("h3",null,"Total Users",-1)),Object(c["i"])("p",null,Object(c["H"])(s.stats.totalUsers),1),Object(c["i"])("span",ls," +"+Object(c["H"])(s.stats.newToday)+" today ",1)])]),Object(c["i"])("div",ns,[t[22]||(t[22]=Object(c["i"])("div",{class:"stat-icon"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"shopping_bag")],-1)),Object(c["i"])("div",rs,[t[21]||(t[21]=Object(c["i"])("h3",null,"Orders",-1)),Object(c["i"])("p",null,Object(c["H"])(s.stats.totalOrders),1),Object(c["i"])("span",os,Object(c["H"])(s.stats.pendingOrders)+" pending ",1)])]),Object(c["i"])("div",ds,[t[24]||(t[24]=Object(c["i"])("div",{class:"stat-icon"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"payments")],-1)),Object(c["i"])("div",bs,[t[23]||(t[23]=Object(c["i"])("h3",null,"Revenue",-1)),Object(c["i"])("p",null,"€"+Object(c["H"])(s.formatMoney(s.stats.totalRevenue)),1),Object(c["i"])("span",us," €"+Object(c["H"])(s.formatMoney(s.stats.revenueToday))+" today ",1)])]),Object(c["i"])("div",Os,[t[26]||(t[26]=Object(c["i"])("div",{class:"stat-icon"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"inventory_2")],-1)),Object(c["i"])("div",js,[t[25]||(t[25]=Object(c["i"])("h3",null,"Inventory",-1)),Object(c["i"])("p",null,Object(c["H"])(s.stats.totalCards),1),Object(c["i"])("span",ms,Object(c["H"])(s.stats.lowStock)+" low stock ",1)])])])]),Object(c["i"])("div",ps,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.tabs,e=>(Object(c["x"])(),Object(c["h"])("button",{key:e.id,class:Object(c["r"])(["tab-btn",{active:s.currentTab===e.id}]),onClick:t=>s.currentTab=e.id},[Object(c["i"])("span",vs,Object(c["H"])(e.icon),1),Object(c["k"])(" "+Object(c["H"])(e.name)+" ",1),e.badge?(Object(c["x"])(),Object(c["h"])("span",gs,Object(c["H"])(e.badge),1)):Object(c["g"])("",!0)],10,hs))),128))]),"users"===s.currentTab?(Object(c["x"])(),Object(c["h"])("div",fs,[Object(c["i"])("div",ys,[Object(c["i"])("div",ks,[t[28]||(t[28]=Object(c["i"])("span",{class:"material-symbols-rounded"},"search",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.userSearch=e),type:"text",placeholder:"Search users..."},null,512),[[c["M"],s.userSearch]])]),Object(c["i"])("button",{class:"add-button",onClick:t[4]||(t[4]=(...e)=>s.initNewUser&&s.initNewUser(...e))},t[29]||(t[29]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"person_add",-1),Object(c["k"])(" Add User ")]))]),Object(c["i"])("div",ws,[Object(c["i"])("table",Cs,[t[32]||(t[32]=Object(c["i"])("thead",null,[Object(c["i"])("tr",null,[Object(c["i"])("th",null,"Email"),Object(c["i"])("th",null,"Name"),Object(c["i"])("th",null,"Role"),Object(c["i"])("th",null,"Status"),Object(c["i"])("th",null,"Joined"),Object(c["i"])("th",null,"Actions")])],-1)),Object(c["i"])("tbody",null,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.filteredUsers,e=>(Object(c["x"])(),Object(c["h"])("tr",{key:e.id},[Object(c["i"])("td",null,Object(c["H"])(e.email),1),Object(c["i"])("td",null,Object(c["H"])(e.full_name||"-"),1),Object(c["i"])("td",null,[Object(c["i"])("span",{class:Object(c["r"])(["role-badge",e.role])},Object(c["H"])(e.role),3)]),Object(c["i"])("td",null,[Object(c["i"])("span",{class:Object(c["r"])(["status-badge",e.status])},Object(c["H"])(e.status),3)]),Object(c["i"])("td",null,Object(c["H"])(s.formatDate(e.created_at)),1),Object(c["i"])("td",Ss,[Object(c["i"])("button",{onClick:t=>s.editUser(e),class:"icon-button"},t[30]||(t[30]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"edit",-1)]),8,_s),Object(c["i"])("button",{onClick:t=>s.confirmDeleteUser(e),class:"icon-button danger"},t[31]||(t[31]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"delete",-1)]),8,xs)])]))),128))])])])])):Object(c["g"])("",!0),"news"===s.currentTab?(Object(c["x"])(),Object(c["h"])("div",As,[Object(c["l"])(n)])):Object(c["g"])("",!0),"cards"===s.currentTab?(Object(c["x"])(),Object(c["h"])("div",Ms,[Object(c["l"])(r)])):Object(c["g"])("",!0),"reports"===s.currentTab?(Object(c["x"])(),Object(c["h"])("div",Ps,[Object(c["l"])(o)])):Object(c["g"])("",!0),"settings"===s.currentTab?(Object(c["x"])(),Object(c["h"])("div",Hs,[Object(c["l"])(d)])):Object(c["g"])("",!0),"store"===s.currentTab?(Object(c["x"])(),Object(c["h"])("div",Is,[Object(c["l"])(b)])):Object(c["g"])("",!0),"orders"===s.currentTab?(Object(c["x"])(),Object(c["h"])("div",Ds,[Object(c["l"])(u)])):Object(c["g"])("",!0),"notifications"===s.currentTab?(Object(c["x"])(),Object(c["h"])("div",Us,[Object(c["l"])(O)])):Object(c["g"])("",!0),s.showEditModal?(Object(c["x"])(),Object(c["f"])(j,{key:8,onClose:s.closeEditModal},{header:Object(c["O"])(()=>[Object(c["i"])("h2",null,Object(c["H"])(s.editingUser&&s.editingUser.id?"Edit User":"Add User"),1)]),default:Object(c["O"])(()=>[Object(c["i"])("form",{onSubmit:t[12]||(t[12]=Object(c["R"])((...e)=>s.saveUser&&s.saveUser(...e),["prevent"])),class:"edit-form"},[Object(c["i"])("div",Ts,[s.editingUser&&s.editingUser.id?Object(c["g"])("",!0):(Object(c["x"])(),Object(c["h"])("div",Ns,[t[33]||(t[33]=Object(c["i"])("label",null,"Email *",-1)),Object(c["i"])("div",Fs,[Object(c["P"])(Object(c["i"])("input",{type:"email","onUpdate:modelValue":t[5]||(t[5]=e=>s.userForm.email=e),required:"",placeholder:"user@example.com"},null,512),[[c["M"],s.userForm.email]])])])),s.editingUser&&s.editingUser.id?Object(c["g"])("",!0):(Object(c["x"])(),Object(c["h"])("div",qs,[t[34]||(t[34]=Object(c["i"])("label",null,"Password *",-1)),Object(c["i"])("div",Rs,[Object(c["P"])(Object(c["i"])("input",{type:"password","onUpdate:modelValue":t[6]||(t[6]=e=>s.userForm.password=e),required:"",placeholder:"Enter password",minlength:"6"},null,512),[[c["M"],s.userForm.password]])])])),Object(c["i"])("div",Es,[t[35]||(t[35]=Object(c["i"])("label",null,"First Name",-1)),Object(c["i"])("div",Ls,[Object(c["P"])(Object(c["i"])("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>s.userForm.first_name=e),placeholder:"Enter first name"},null,512),[[c["M"],s.userForm.first_name]])])]),Object(c["i"])("div",Vs,[t[36]||(t[36]=Object(c["i"])("label",null,"Last Name",-1)),Object(c["i"])("div",Ws,[Object(c["P"])(Object(c["i"])("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>s.userForm.last_name=e),placeholder:"Enter last name"},null,512),[[c["M"],s.userForm.last_name]])])]),Object(c["i"])("div",Bs,[t[39]||(t[39]=Object(c["i"])("label",null,"Role",-1)),Object(c["i"])("div",$s,[Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.userForm.role=e)},t[37]||(t[37]=[Object(c["i"])("option",{value:"user"},"Regular User",-1),Object(c["i"])("option",{value:"admin"},"Administrator",-1)]),512),[[c["L"],s.userForm.role]]),t[38]||(t[38]=Object(c["i"])("span",{class:"material-symbols-rounded"},"expand_more",-1))])]),Object(c["i"])("div",zs,[t[42]||(t[42]=Object(c["i"])("label",null,"Status",-1)),Object(c["i"])("div",Qs,[Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>s.userForm.status=e)},t[40]||(t[40]=[Object(c["i"])("option",{value:"active"},"Active",-1),Object(c["i"])("option",{value:"suspended"},"Suspended",-1)]),512),[[c["L"],s.userForm.status]]),t[41]||(t[41]=Object(c["i"])("span",{class:"material-symbols-rounded"},"expand_more",-1))])])]),s.formError?(Object(c["x"])(),Object(c["h"])("div",Js,Object(c["H"])(s.formError),1)):Object(c["g"])("",!0),Object(c["i"])("div",Gs,[Object(c["i"])("button",{type:"button",class:"cancel-button",onClick:t[11]||(t[11]=(...e)=>s.closeEditModal&&s.closeEditModal(...e))}," Cancel "),Object(c["i"])("button",{type:"submit",class:"save-button",disabled:s.isSubmitting},Object(c["H"])(s.isSubmitting?"Saving...":"Save Changes"),9,Ks)])],32)]),_:1},8,["onClose"])):Object(c["g"])("",!0),s.showDeleteModal?(Object(c["x"])(),Object(c["f"])(j,{key:9,onClose:t[15]||(t[15]=e=>s.showDeleteModal=!1)},{header:Object(c["O"])(()=>t[43]||(t[43]=[Object(c["i"])("h2",null,"Confirm Delete",-1)])),default:Object(c["O"])(()=>[t[44]||(t[44]=Object(c["i"])("p",null,"Are you sure you want to delete this user?",-1)),Object(c["i"])("div",Zs,[Object(c["i"])("button",{onClick:t[13]||(t[13]=e=>s.showDeleteModal=!1)},"Cancel"),Object(c["i"])("button",{onClick:t[14]||(t[14]=(...e)=>s.deleteUser&&s.deleteUser(...e)),class:"danger"},"Delete")])]),_:1})):Object(c["g"])("",!0)])}var Ys=a("714b");const ei={class:"news-manager"},ti={class:"panel-header"},ai={class:"articles-list"},ci={class:"article-content"},si={class:"article-date"},ii={class:"article-tags"},li={class:"article-actions"},ni=["onClick"],ri=["onClick"],oi={class:"form-group"},di={class:"form-group"},bi={class:"form-group"},ui={class:"form-group"},Oi={class:"tags-preview"},ji=["onClick"],mi={class:"form-actions"};function pi(e,t,a,s,i,l){const n=Object(c["D"])("Modal");return Object(c["x"])(),Object(c["h"])("div",ei,[Object(c["i"])("div",ti,[t[9]||(t[9]=Object(c["i"])("h2",null,"News Articles",-1)),Object(c["i"])("button",{class:"add-button",onClick:t[0]||(t[0]=(...e)=>s.showAddModal&&s.showAddModal(...e))},t[8]||(t[8]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"post_add",-1),Object(c["k"])(" Create Article ")]))]),Object(c["i"])("div",ai,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.articles,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"article-card"},[Object(c["i"])("div",ci,[Object(c["i"])("span",si,Object(c["H"])(s.formatDate(e.created_at)),1),Object(c["i"])("h3",null,Object(c["H"])(e.title),1),Object(c["i"])("p",null,Object(c["H"])(e.excerpt),1),Object(c["i"])("div",ii,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(e.tags,e=>(Object(c["x"])(),Object(c["h"])("span",{key:e,class:"tag"},Object(c["H"])(e),1))),128))])]),Object(c["i"])("div",li,[Object(c["i"])("button",{onClick:t=>s.editArticle(e),class:"icon-button"},t[10]||(t[10]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"edit",-1)]),8,ni),Object(c["i"])("button",{onClick:t=>s.deleteArticle(e.id),class:"icon-button danger"},t[11]||(t[11]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"delete",-1)]),8,ri)])]))),128))]),s.showModal?(Object(c["x"])(),Object(c["f"])(n,{key:0,onClose:s.closeModal},{header:Object(c["O"])(()=>[Object(c["i"])("h2",null,Object(c["H"])(s.editingArticle?"Edit Article":"Create Article"),1)]),default:Object(c["O"])(()=>[Object(c["i"])("form",{onSubmit:t[7]||(t[7]=Object(c["R"])((...e)=>s.saveArticle&&s.saveArticle(...e),["prevent"])),class:"article-form"},[Object(c["i"])("div",oi,[t[12]||(t[12]=Object(c["i"])("label",null,"Title *",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.articleForm.title=e),required:"",type:"text"},null,512),[[c["M"],s.articleForm.title]])]),Object(c["i"])("div",di,[t[13]||(t[13]=Object(c["i"])("label",null,"Excerpt *",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.articleForm.excerpt=e),required:"",type:"text"},null,512),[[c["M"],s.articleForm.excerpt]])]),Object(c["i"])("div",bi,[t[14]||(t[14]=Object(c["i"])("label",null,"Content *",-1)),Object(c["P"])(Object(c["i"])("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.articleForm.content=e),required:"",rows:"6"},null,512),[[c["M"],s.articleForm.content]])]),Object(c["i"])("div",ui,[t[15]||(t[15]=Object(c["i"])("label",null,"Tags",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.tagInput=e),onKeydown:t[5]||(t[5]=Object(c["Q"])(Object(c["R"])((...e)=>s.addTag&&s.addTag(...e),["prevent"]),["enter"])),placeholder:"Press enter to add tag"},null,544),[[c["M"],s.tagInput]]),Object(c["i"])("div",Oi,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.articleForm.tags,e=>(Object(c["x"])(),Object(c["h"])("span",{key:e,class:"tag",onClick:t=>s.removeTag(e)},Object(c["H"])(e)+" × ",9,ji))),128))])]),Object(c["i"])("div",mi,[Object(c["i"])("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>s.closeModal&&s.closeModal(...e))},"Cancel"),t[16]||(t[16]=Object(c["i"])("button",{type:"submit",class:"primary"},"Save Article",-1))])],32)]),_:1},8,["onClose"])):Object(c["g"])("",!0)])}var hi={name:"NewsManager",components:{Modal:Ys["a"]},setup(){const e=Object(c["A"])([]),t=Object(c["A"])(!1),a=Object(c["A"])(null),s=Object(c["A"])(""),i=Object(c["A"])({title:"",excerpt:"",content:"",tags:[]}),l=()=>{i.value={title:"",excerpt:"",content:"",tags:[]},a.value=null,s.value=""},n=async()=>{const{data:t,error:a}=await z["a"].from("news_articles").select("*").order("created_at",{ascending:!1});a||(e.value=t)},r=()=>{l(),t.value=!0},o=e=>{a.value=e,i.value={...e},t.value=!0},d=async()=>{const e={...i.value,updated_at:new Date};a.value?await z["a"].from("news_articles").update(e).eq("id",a.value.id):await z["a"].from("news_articles").insert([e]),await n(),j()},b=async e=>{confirm("Are you sure you want to delete this article?")&&(await z["a"].from("news_articles").delete().eq("id",e),await n())},u=()=>{const e=s.value.trim();e&&!i.value.tags.includes(e)&&i.value.tags.push(e),s.value=""},O=e=>{i.value.tags=i.value.tags.filter(t=>t!==e)},j=()=>{t.value=!1,l()};return Object(c["v"])(n),{articles:e,showModal:t,editingArticle:a,articleForm:i,tagInput:s,showAddModal:r,editArticle:o,saveArticle:d,deleteArticle:b,addTag:u,removeTag:O,closeModal:j,formatDate:e=>new Date(e).toLocaleDateString()}}};a("5e33");const vi=G()(hi,[["render",pi],["__scopeId","data-v-075acf4a"]]);var gi=vi;const fi={class:"cards-manager"},yi={class:"panel-header"},ki={class:"actions"},wi={class:"panel-content"},Ci={class:"cards-stats"},Si={class:"stat-item"},_i={class:"stat-item"},xi={class:"cards-grid"},Ai=["src","alt"],Mi={class:"card-info"},Pi={class:"card-actions"},Hi=["onClick"],Ii=["onClick"];function Di(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",fi,[Object(c["i"])("div",yi,[Object(c["i"])("div",ki,[Object(c["i"])("button",{class:"action-button",onClick:t[0]||(t[0]=(...t)=>e.syncCards&&e.syncCards(...t))},t[2]||(t[2]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"sync",-1),Object(c["k"])(" Sync with API ")])),Object(c["i"])("button",{class:"action-button",onClick:t[1]||(t[1]=(...t)=>e.importCards&&e.importCards(...t))},t[3]||(t[3]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"upload_file",-1),Object(c["k"])(" Import Cards ")]))])]),Object(c["i"])("div",wi,[Object(c["i"])("div",Ci,[Object(c["i"])("div",Si,[t[4]||(t[4]=Object(c["i"])("h4",null,"Total Cards",-1)),Object(c["i"])("p",null,Object(c["H"])(s.stats.total),1)]),Object(c["i"])("div",_i,[t[5]||(t[5]=Object(c["i"])("h4",null,"Last Synced",-1)),Object(c["i"])("p",null,Object(c["H"])(s.stats.lastSync?s.formatDate(s.stats.lastSync):"Never"),1)])]),Object(c["i"])("div",xi,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.cards,a=>(Object(c["x"])(),Object(c["h"])("div",{key:a.id,class:"card-item"},[Object(c["i"])("img",{src:a.imageUrl,alt:a.name},null,8,Ai),Object(c["i"])("div",Mi,[Object(c["i"])("h3",null,Object(c["H"])(a.name),1),Object(c["i"])("p",null,"$"+Object(c["H"])(a.price),1),Object(c["i"])("div",Pi,[Object(c["i"])("button",{onClick:t=>e.editCard(a)},t[6]||(t[6]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"edit",-1)]),8,Hi),Object(c["i"])("button",{onClick:t=>e.deleteCard(a.id),class:"danger"},t[7]||(t[7]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"delete",-1)]),8,Ii)])])]))),128))])])])}var Ui={name:"CardsManager",setup(){const e=Object(c["A"])([]),t=Object(c["A"])({total:0,lastSync:null});async function a(){const{data:a,error:c}=await z["a"].from("cards").select("*").order("name");c||(e.value=a,t.value.total=a.length)}return Object(c["v"])(a),{cards:e,stats:t,formatDate:e=>new Date(e).toLocaleDateString()}}};a("0e58");const Ti=G()(Ui,[["render",Di],["__scopeId","data-v-1bee8475"]]);var Ni=Ti;const Fi={class:"reports-manager"},qi={class:"reports-grid"},Ri={class:"report-card"},Ei={class:"stat-list"},Li={class:"stat-item"},Vi={class:"stat-value"},Wi={class:"stat-item"},Bi={class:"stat-value"},$i={class:"report-card"},zi={class:"stat-list"},Qi={class:"stat-item"},Ji={class:"stat-value"},Gi={class:"stat-item"},Ki={class:"stat-value"},Zi={class:"report-card highlight"},Xi={class:"ranking-list"},Yi={class:"rank-info"},el=["src","alt"],tl={class:"report-card"},al={class:"activity-list"},cl={class:"activity-content"},sl={class:"activity-time"};function il(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",Fi,[Object(c["i"])("div",qi,[Object(c["i"])("div",Ri,[t[4]||(t[4]=Object(c["i"])("h3",null,"User Analytics",-1)),Object(c["i"])("div",Ei,[Object(c["i"])("div",Li,[t[0]||(t[0]=Object(c["i"])("span",{class:"stat-label"},"Active Users",-1)),Object(c["i"])("span",Vi,Object(c["H"])(s.stats.activeUsers),1),t[1]||(t[1]=Object(c["i"])("span",{class:"stat-trend up"},"+12.5%",-1))]),Object(c["i"])("div",Wi,[t[2]||(t[2]=Object(c["i"])("span",{class:"stat-label"},"Average Collection Size",-1)),Object(c["i"])("span",Bi,Object(c["H"])(s.stats.avgCollectionSize),1),t[3]||(t[3]=Object(c["i"])("span",{class:"stat-trend up"},"+5.2%",-1))])])]),Object(c["i"])("div",$i,[t[8]||(t[8]=Object(c["i"])("h3",null,"Market Overview",-1)),Object(c["i"])("div",zi,[Object(c["i"])("div",Qi,[t[5]||(t[5]=Object(c["i"])("span",{class:"stat-label"},"Total Market Value",-1)),Object(c["i"])("span",Ji,"$"+Object(c["H"])(s.formatNumber(s.stats.totalMarketValue)),1)]),Object(c["i"])("div",Gi,[t[6]||(t[6]=Object(c["i"])("span",{class:"stat-label"},"Average Card Price",-1)),Object(c["i"])("span",Ki,"$"+Object(c["H"])(s.stats.avgCardPrice),1),t[7]||(t[7]=Object(c["i"])("span",{class:"stat-trend down"},"-2.1%",-1))])])]),Object(c["i"])("div",Zi,[t[9]||(t[9]=Object(c["i"])("h3",null,"Most Popular Cards",-1)),Object(c["i"])("ol",Xi,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.popularCards,e=>(Object(c["x"])(),Object(c["h"])("li",{key:e.id},[Object(c["i"])("div",Yi,[Object(c["i"])("img",{src:e.imageUrl,alt:e.name},null,8,el),Object(c["i"])("div",null,[Object(c["i"])("h4",null,Object(c["H"])(e.name),1),Object(c["i"])("p",null,Object(c["H"])(e.count)+" collections",1)])]),Object(c["i"])("span",{class:Object(c["r"])(["trend",e.trend])},Object(c["H"])(e.change)+"%",3)]))),128))])]),Object(c["i"])("div",tl,[t[10]||(t[10]=Object(c["i"])("h3",null,"Recent Activity",-1)),Object(c["i"])("div",al,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.recentActivity,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"activity-item"},[Object(c["i"])("span",{class:"material-symbols-rounded",style:Object(c["s"])({color:e.color})},Object(c["H"])(e.icon),5),Object(c["i"])("div",cl,[Object(c["i"])("p",null,Object(c["H"])(e.description),1),Object(c["i"])("span",sl,Object(c["H"])(e.time),1)])]))),128))])])])])}var ll={name:"ReportsManager",setup(){const e=Object(c["A"])({activeUsers:1234,avgCollectionSize:156,totalMarketValue:25e5,avgCardPrice:45.99}),t=Object(c["A"])([{id:1,name:"Charizard VMAX",imageUrl:"/path/to/image",count:1560,trend:"up",change:"+15.2"}]),a=Object(c["A"])([{id:1,icon:"add_circle",color:"var(--system-green)",description:"New user registered",time:"5 minutes ago"}]),s=e=>(new Intl.NumberFormat).format(e);async function i(){}return Object(c["v"])(i),{stats:e,popularCards:t,recentActivity:a,formatNumber:s}}};a("c395");const nl=G()(ll,[["render",il],["__scopeId","data-v-df595634"]]);var rl=nl;const ol={class:"settings-manager"},dl={class:"settings-grid"},bl={class:"settings-card"},ul={class:"settings-section"},Ol={class:"setting-item"},jl={class:"switch"},ml={class:"setting-item"},pl={class:"switch"},hl={class:"setting-item"},vl={class:"switch"},gl={class:"settings-card"},fl={class:"settings-section"},yl={class:"setting-field"},kl={class:"input-group"},wl=["type"],Cl={class:"material-symbols-rounded"},Sl={class:"setting-field"},_l={class:"setting-field"},xl={class:"settings-card"},Al={class:"settings-section"},Ml={class:"setting-field"},Pl={class:"settings-actions"},Hl=["disabled"];function Il(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",ol,[Object(c["i"])("div",dl,[Object(c["i"])("div",bl,[t[17]||(t[17]=Object(c["i"])("h3",null,"General Settings",-1)),Object(c["i"])("div",ul,[Object(c["i"])("div",Ol,[t[12]||(t[12]=Object(c["i"])("div",{class:"setting-content"},[Object(c["i"])("h4",null,"Maintenance Mode"),Object(c["i"])("p",null,"Block access to the application")],-1)),Object(c["i"])("label",jl,[Object(c["P"])(Object(c["i"])("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>s.settings.maintenanceMode=e)},null,512),[[c["J"],s.settings.maintenanceMode]]),t[11]||(t[11]=Object(c["i"])("span",{class:"slider"},null,-1))])]),Object(c["i"])("div",ml,[t[14]||(t[14]=Object(c["i"])("div",{class:"setting-content"},[Object(c["i"])("h4",null,"User Registration"),Object(c["i"])("p",null,"Allow new users to register")],-1)),Object(c["i"])("label",pl,[Object(c["P"])(Object(c["i"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>s.settings.allowRegistration=e)},null,512),[[c["J"],s.settings.allowRegistration]]),t[13]||(t[13]=Object(c["i"])("span",{class:"slider"},null,-1))])]),Object(c["i"])("div",hl,[t[16]||(t[16]=Object(c["i"])("div",{class:"setting-content"},[Object(c["i"])("h4",null,"Email Notifications"),Object(c["i"])("p",null,"Send emails for important updates")],-1)),Object(c["i"])("label",vl,[Object(c["P"])(Object(c["i"])("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>s.settings.emailNotifications=e)},null,512),[[c["J"],s.settings.emailNotifications]]),t[15]||(t[15]=Object(c["i"])("span",{class:"slider"},null,-1))])])])]),Object(c["i"])("div",gl,[t[22]||(t[22]=Object(c["i"])("h3",null,"API Configuration",-1)),Object(c["i"])("div",fl,[Object(c["i"])("div",yl,[t[18]||(t[18]=Object(c["i"])("label",null,"API Key",-1)),Object(c["i"])("div",kl,[Object(c["P"])(Object(c["i"])("input",{type:s.showApiKey?"text":"password","onUpdate:modelValue":t[3]||(t[3]=e=>s.settings.apiKey=e)},null,8,wl),[[c["K"],s.settings.apiKey]]),Object(c["i"])("button",{onClick:t[4]||(t[4]=e=>s.showApiKey=!s.showApiKey),class:"icon-button"},[Object(c["i"])("span",Cl,Object(c["H"])(s.showApiKey?"visibility_off":"visibility"),1)])])]),Object(c["i"])("div",Sl,[t[19]||(t[19]=Object(c["i"])("label",null,"Rate Limit (requests/minute)",-1)),Object(c["P"])(Object(c["i"])("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=e=>s.settings.rateLimit=e),min:"1",max:"1000"},null,512),[[c["M"],s.settings.rateLimit]])]),Object(c["i"])("div",_l,[t[21]||(t[21]=Object(c["i"])("label",null,"API Version",-1)),Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.settings.apiVersion=e)},t[20]||(t[20]=[Object(c["i"])("option",{value:"v1"},"Version 1.0",-1),Object(c["i"])("option",{value:"v2"},"Version 2.0",-1)]),512),[[c["L"],s.settings.apiVersion]])])])]),Object(c["i"])("div",xl,[t[25]||(t[25]=Object(c["i"])("h3",null,"Cache Settings",-1)),Object(c["i"])("div",Al,[Object(c["i"])("div",Ml,[t[23]||(t[23]=Object(c["i"])("label",null,"Cache Duration (minutes)",-1)),Object(c["P"])(Object(c["i"])("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=e=>s.settings.cacheDuration=e),min:"5",max:"1440"},null,512),[[c["M"],s.settings.cacheDuration]])]),Object(c["i"])("button",{onClick:t[8]||(t[8]=(...e)=>s.clearCache&&s.clearCache(...e)),class:"action-button"},t[24]||(t[24]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"delete",-1),Object(c["k"])(" Clear Cache ")]))])])]),Object(c["i"])("div",Pl,[Object(c["i"])("button",{class:"secondary",onClick:t[9]||(t[9]=(...e)=>s.resetSettings&&s.resetSettings(...e))},"Reset to Defaults"),Object(c["i"])("button",{class:"primary",onClick:t[10]||(t[10]=(...e)=>s.saveSettings&&s.saveSettings(...e)),disabled:s.isSaving},Object(c["H"])(s.isSaving?"Saving...":"Save Changes"),9,Hl)])])}var Dl={name:"SettingsManager",setup(){const e=Object(c["A"])({maintenanceMode:!1,allowRegistration:!0,emailNotifications:!1,apiKey:"",rateLimit:100,apiVersion:"v1",cacheDuration:60}),t=Object(c["A"])(!1),a=Object(c["A"])(!1);async function s(){const{data:t}=await z["a"].from("app_settings").select("*").single();t&&(e.value={...e.value,...t})}async function i(){a.value=!0,await z["a"].from("app_settings").upsert(e.value),a.value=!1}async function l(){}function n(){e.value={maintenanceMode:!1,allowRegistration:!0,emailNotifications:!1,apiKey:"",rateLimit:100,apiVersion:"v1",cacheDuration:60}}return Object(c["v"])(s),{settings:e,showApiKey:t,isSaving:a,saveSettings:i,clearCache:l,resetSettings:n}}};a("5121");const Ul=G()(Dl,[["render",Il],["__scopeId","data-v-573dd3cd"]]);var Tl=Ul;const Nl={class:"store-manager"},Fl={class:"stats-grid"},ql={class:"stat-card"},Rl={class:"stat-value"},El={key:0,class:"stat-trend up"},Ll={class:"stat-card"},Vl={class:"stat-value"},Wl={key:0,class:"stat-card warning"},Bl={class:"stat-value"},$l={class:"stat-action"},zl={class:"actions-bar"},Ql={class:"search-box"},Jl={class:"action-buttons"},Gl={key:0,class:"bulk-actions-bar"},Kl={class:"selection-info"},Zl={class:"bulk-actions"},Xl={class:"products-table"},Yl=["checked"],en=["value"],tn={class:"product-cell"},an=["src","alt"],cn={class:"product-info"},sn={key:0},ln={class:"actions-cell"},nn=["onClick"],rn=["onClick"],on=["onClick"],dn={class:"material-symbols-rounded"},bn={class:"delete-confirmation"},un={key:0},On={key:1},jn={class:"modal-actions"};function mn(e,t,a,s,i,l){const n=Object(c["D"])("ProductForm"),r=Object(c["D"])("Modal"),o=Object(c["D"])("StockAdjustmentForm");return Object(c["x"])(),Object(c["h"])("div",Nl,[Object(c["i"])("div",Fl,[Object(c["i"])("div",ql,[t[10]||(t[10]=Object(c["i"])("h3",null,"Total Products",-1)),Object(c["i"])("p",Rl,Object(c["H"])(s.stats.totalProducts),1),s.stats.productTrend>0?(Object(c["x"])(),Object(c["h"])("div",El," +"+Object(c["H"])(s.stats.productTrend)+"% from last month ",1)):Object(c["g"])("",!0)]),Object(c["i"])("div",Ll,[t[11]||(t[11]=Object(c["i"])("h3",null,"Total Sales",-1)),Object(c["i"])("p",Vl,"$"+Object(c["H"])(s.stats.totalSales),1),Object(c["i"])("div",{class:Object(c["r"])(["stat-trend",s.stats.salesTrend>0?"up":"down"])},Object(c["H"])(s.stats.salesTrend>0?"+":"")+Object(c["H"])(s.stats.salesTrend)+"% from last month ",3)]),s.stats.lowStock>0?(Object(c["x"])(),Object(c["h"])("div",Wl,[t[12]||(t[12]=Object(c["i"])("h3",null,"Low Stock Items",-1)),Object(c["i"])("p",Bl,Object(c["H"])(s.stats.lowStock),1),Object(c["i"])("div",$l,[Object(c["i"])("button",{onClick:t[0]||(t[0]=(...t)=>e.showLowStock&&e.showLowStock(...t))},"View Items")])])):Object(c["g"])("",!0)]),Object(c["i"])("div",zl,[Object(c["i"])("div",Ql,[t[13]||(t[13]=Object(c["i"])("span",{class:"material-symbols-rounded"},"search",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.search=e),type:"text",placeholder:"Search products..."},null,512),[[c["M"],s.search]])]),Object(c["i"])("div",Jl,[Object(c["i"])("button",{class:"secondary",onClick:t[2]||(t[2]=(...e)=>s.syncWithApi&&s.syncWithApi(...e))},t[14]||(t[14]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"sync",-1),Object(c["k"])(" Sync with API ")])),Object(c["i"])("button",{class:"primary",onClick:t[3]||(t[3]=e=>s.showAddProduct=!0)},t[15]||(t[15]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"add",-1),Object(c["k"])(" Add Product ")]))])]),s.selectedProducts.length>0?(Object(c["x"])(),Object(c["h"])("div",Gl,[Object(c["i"])("div",Kl,Object(c["H"])(s.selectedProducts.length)+" items selected ",1),Object(c["i"])("div",Zl,[Object(c["i"])("button",{class:"danger",onClick:t[4]||(t[4]=(...e)=>s.confirmDeleteSelected&&s.confirmDeleteSelected(...e))},t[16]||(t[16]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"delete",-1),Object(c["k"])(" Delete Selected ")]))])])):Object(c["g"])("",!0),Object(c["i"])("div",Xl,[Object(c["i"])("table",null,[Object(c["i"])("thead",null,[Object(c["i"])("tr",null,[Object(c["i"])("th",null,[Object(c["i"])("input",{type:"checkbox",checked:s.isAllSelected,onChange:t[5]||(t[5]=(...e)=>s.toggleSelectAll&&s.toggleSelectAll(...e))},null,40,Yl)]),t[17]||(t[17]=Object(c["i"])("th",null,"Product",-1)),t[18]||(t[18]=Object(c["i"])("th",null,"Type",-1)),t[19]||(t[19]=Object(c["i"])("th",null,"CMP",-1)),t[20]||(t[20]=Object(c["i"])("th",null,"CSP",-1)),t[21]||(t[21]=Object(c["i"])("th",null,"Stock",-1)),t[22]||(t[22]=Object(c["i"])("th",null,"Status",-1)),t[23]||(t[23]=Object(c["i"])("th",null,"Actions",-1))])]),Object(c["i"])("tbody",null,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.filteredProducts,e=>(Object(c["x"])(),Object(c["h"])("tr",{key:e.id},[Object(c["i"])("td",null,[Object(c["P"])(Object(c["i"])("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[6]||(t[6]=e=>s.selectedProducts=e)},null,8,en),[[c["J"],s.selectedProducts]])]),Object(c["i"])("td",tn,[Object(c["i"])("img",{src:e.image_url,alt:e.name},null,8,an),Object(c["i"])("div",cn,[Object(c["i"])("h4",null,Object(c["H"])(e.name),1),e.metadata&&e.metadata.set?(Object(c["x"])(),Object(c["h"])("p",sn,Object(c["H"])(e.metadata.set.name),1)):Object(c["g"])("",!0)])]),Object(c["i"])("td",null,Object(c["H"])(e.type),1),Object(c["i"])("td",null,"$"+Object(c["H"])(s.getMarketPrice(e)),1),Object(c["i"])("td",null,"$"+Object(c["H"])(e.price),1),Object(c["i"])("td",{class:Object(c["r"])({"low-stock":e.stock<5})},Object(c["H"])(e.stock),3),Object(c["i"])("td",null,[Object(c["i"])("span",{class:Object(c["r"])(["status-badge",e.active?"active":"inactive"])},Object(c["H"])(e.active?"Active":"Inactive"),3)]),Object(c["i"])("td",ln,[Object(c["i"])("button",{class:"icon-button",onClick:t=>s.editProduct(e)},t[24]||(t[24]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"edit",-1)]),8,nn),Object(c["i"])("button",{class:"icon-button",onClick:t=>s.adjustStock(e)},t[25]||(t[25]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"inventory",-1)]),8,rn),Object(c["i"])("button",{class:"icon-button",onClick:t=>s.toggleProductStatus(e)},[Object(c["i"])("span",dn,Object(c["H"])(e.active?"visibility":"visibility_off"),1)],8,on)])]))),128))])])]),s.showAddProduct?(Object(c["x"])(),Object(c["f"])(r,{key:1,onClose:s.closeAddModal},{header:Object(c["O"])(()=>[Object(c["i"])("h2",null,Object(c["H"])(s.editingProduct?"Edit Product":"Add Product"),1)]),default:Object(c["O"])(()=>[Object(c["l"])(n,{product:s.editingProduct,onSave:s.saveProduct,onCancel:s.closeAddModal},null,8,["product","onSave","onCancel"])]),_:1},8,["onClose"])):Object(c["g"])("",!0),s.showStockModal?(Object(c["x"])(),Object(c["f"])(r,{key:2,onClose:s.closeStockModal},{header:Object(c["O"])(()=>t[26]||(t[26]=[Object(c["i"])("h2",null,"Adjust Stock",-1)])),default:Object(c["O"])(()=>[Object(c["l"])(o,{product:s.selectedProduct,onSave:s.updateStock,onCancel:s.closeStockModal},null,8,["product","onSave","onCancel"])]),_:1},8,["onClose"])):Object(c["g"])("",!0),s.showDeleteModal?(Object(c["x"])(),Object(c["f"])(r,{key:3,onClose:t[9]||(t[9]=e=>s.showDeleteModal=!1)},{header:Object(c["O"])(()=>t[27]||(t[27]=[Object(c["i"])("h2",null,"Confirm Delete",-1)])),default:Object(c["O"])(()=>[Object(c["i"])("div",bn,[s.selectedProducts.length===s.filteredProducts.length?(Object(c["x"])(),Object(c["h"])("p",un," Are you sure you want to delete all products? ")):(Object(c["x"])(),Object(c["h"])("p",On," Are you sure you want to delete "+Object(c["H"])(s.selectedProducts.length)+" selected products? ",1)),t[28]||(t[28]=Object(c["i"])("div",{class:"warning"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"warning"),Object(c["k"])(" This action cannot be undone. ")],-1)),Object(c["i"])("div",jn,[Object(c["i"])("button",{class:"secondary",onClick:t[7]||(t[7]=e=>s.showDeleteModal=!1)}," Cancel "),Object(c["i"])("button",{class:"danger",onClick:t[8]||(t[8]=(...e)=>s.deleteSelected&&s.deleteSelected(...e))}," Delete ")])])]),_:1})):Object(c["g"])("",!0)])}const pn={class:"product-form-container"},hn={key:0,class:"mode-selection"},vn={key:1,class:"search-mode"},gn={class:"search-container"},fn={class:"search-box"},yn=["disabled"],kn={key:0,class:"search-loading"},wn={key:1,class:"search-error"},Cn={key:2,class:"no-results"},Sn={key:3,class:"search-results"},_n=["onClick"],xn={class:"card-image"},An=["src","alt"],Mn={class:"card-info"},Pn={class:"card-meta"},Hn={class:"set-name"},In={key:0,class:"price-info"},Dn={key:0,class:"load-more"},Un=["disabled"],Tn={key:0,class:"loading-spinner small"},Nn={key:1},Fn={class:"form-section"},qn={class:"form-group"},Rn={class:"form-group"},En={class:"form-group"},Ln={class:"form-group"},Vn={class:"form-group"},Wn={class:"form-group"},Bn={class:"form-group"},$n={class:"checkbox-label"},zn={class:"form-actions"},Qn={type:"submit",class:"primary"};function Jn(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",pn,[s.selectedMode||a.product?"search"===s.selectedMode?(Object(c["x"])(),Object(c["h"])("div",vn,[Object(c["i"])("button",{class:"back-button",onClick:t[2]||(t[2]=e=>s.selectedMode=null)},t[20]||(t[20]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"arrow_back",-1),Object(c["k"])(" Back to selection ")])),Object(c["i"])("div",gn,[Object(c["i"])("div",fn,[t[22]||(t[22]=Object(c["i"])("span",{class:"material-symbols-rounded"},"search",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.searchQuery=e),type:"text",placeholder:"Search by name, set, or number...",onInput:t[4]||(t[4]=(...e)=>s.debouncedSearch&&s.debouncedSearch(...e)),ref:"searchInput",disabled:s.isSearching},null,40,yn),[[c["M"],s.searchQuery]]),s.searchQuery?(Object(c["x"])(),Object(c["h"])("div",{key:0,class:"search-clear",onClick:t[5]||(t[5]=(...e)=>s.clearSearch&&s.clearSearch(...e))},t[21]||(t[21]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1)]))):Object(c["g"])("",!0)])]),s.isSearching?(Object(c["x"])(),Object(c["h"])("div",kn,t[23]||(t[23]=[Object(c["i"])("div",{class:"loading-spinner"},null,-1),Object(c["i"])("p",null,"Searching cards...",-1)]))):Object(c["g"])("",!0),s.searchError?(Object(c["x"])(),Object(c["h"])("div",wn,[t[24]||(t[24]=Object(c["i"])("span",{class:"material-symbols-rounded"},"error",-1)),t[25]||(t[25]=Object(c["i"])("h3",null,"Error searching cards",-1)),Object(c["i"])("p",null,Object(c["H"])(s.searchError),1),Object(c["i"])("button",{onClick:t[6]||(t[6]=(...e)=>s.retrySearch&&s.retrySearch(...e)),class:"retry-button"}," Try Again ")])):!s.searchQuery||s.isSearching||s.searchResults.length?s.searchResults.length?(Object(c["x"])(),Object(c["h"])("div",Sn,[Object(c["l"])(c["c"],{name:"card-result"},{default:Object(c["O"])(()=>[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.searchResults,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"card-result",onClick:t=>s.selectCard(e)},[Object(c["i"])("div",xn,[Object(c["i"])("img",{src:e.images.small,alt:e.name,loading:"lazy"},null,8,An),t[27]||(t[27]=Object(c["i"])("div",{class:"quick-actions"},[Object(c["i"])("button",{class:"select-button"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"add"),Object(c["k"])(" Select ")])],-1))]),Object(c["i"])("div",Mn,[Object(c["i"])("h4",null,Object(c["H"])(e.name),1),Object(c["i"])("div",Pn,[Object(c["i"])("span",Hn,Object(c["H"])(e.set.name),1),Object(c["i"])("span",{class:Object(c["r"])(["rarity",s.getRarityClass(e.rarity)])},Object(c["H"])(e.rarity),3)]),s.getCardPrice(e)?(Object(c["x"])(),Object(c["h"])("div",In,[t[28]||(t[28]=Object(c["i"])("span",{class:"material-symbols-rounded"},"payments",-1)),Object(c["k"])(" $"+Object(c["H"])(s.getCardPrice(e)),1)])):Object(c["g"])("",!0)])],8,_n))),128))]),_:1}),s.hasMoreResults?(Object(c["x"])(),Object(c["h"])("div",Dn,[Object(c["i"])("button",{onClick:t[7]||(t[7]=(...e)=>s.loadMoreResults&&s.loadMoreResults(...e)),disabled:s.isLoadingMore,class:"load-more-button"},[s.isLoadingMore?(Object(c["x"])(),Object(c["h"])("span",Tn)):(Object(c["x"])(),Object(c["h"])("span",Nn,"Load More Results"))],8,Un)])):Object(c["g"])("",!0)])):Object(c["g"])("",!0):(Object(c["x"])(),Object(c["h"])("div",Cn,t[26]||(t[26]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"search_off",-1),Object(c["i"])("h3",null,"No cards found",-1),Object(c["i"])("p",null,"Try:",-1),Object(c["i"])("ul",{class:"search-tips"},[Object(c["i"])("li",null,'Using the full card name (e.g., "Pikachu V")'),Object(c["i"])("li",null,"Checking for typos"),Object(c["i"])("li",null,"Using fewer keywords"),Object(c["i"])("li",null,"Searching by set name")],-1)])))])):(Object(c["x"])(),Object(c["h"])("form",{key:2,onSubmit:t[17]||(t[17]=Object(c["R"])((...e)=>s.handleSubmit&&s.handleSubmit(...e),["prevent"])),class:"product-form"},[a.product||"manual"!==s.selectedMode?Object(c["g"])("",!0):(Object(c["x"])(),Object(c["h"])("button",{key:0,class:"back-button",onClick:t[8]||(t[8]=e=>s.selectedMode=null)},t[29]||(t[29]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"arrow_back",-1),Object(c["k"])(" Back to selection ")]))),Object(c["i"])("div",Fn,[Object(c["i"])("div",qn,[t[30]||(t[30]=Object(c["i"])("label",null,"Name *",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.form.name=e),type:"text",required:"",placeholder:"Enter product name"},null,512),[[c["M"],s.form.name]])]),Object(c["i"])("div",Rn,[t[32]||(t[32]=Object(c["i"])("label",null,"Type *",-1)),Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>s.form.type=e),required:""},t[31]||(t[31]=[Object(c["i"])("option",{value:"single"},"Single Card",-1),Object(c["i"])("option",{value:"booster"},"Booster Pack",-1),Object(c["i"])("option",{value:"set"},"Card Set",-1)]),512),[[c["L"],s.form.type]])]),Object(c["i"])("div",En,[t[33]||(t[33]=Object(c["i"])("label",null,"Price ($) *",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>s.form.price=e),type:"number",step:"0.01",min:"0",required:""},null,512),[[c["M"],s.form.price,void 0,{number:!0}]])]),Object(c["i"])("div",Ln,[t[34]||(t[34]=Object(c["i"])("label",null,"Stock *",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>s.form.stock=e),type:"number",min:"0",required:""},null,512),[[c["M"],s.form.stock,void 0,{number:!0}]])]),Object(c["i"])("div",Vn,[t[35]||(t[35]=Object(c["i"])("label",null,"Image URL",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>s.form.image_url=e),type:"url",placeholder:"https://..."},null,512),[[c["M"],s.form.image_url]])]),Object(c["i"])("div",Wn,[t[36]||(t[36]=Object(c["i"])("label",null,"Description",-1)),Object(c["P"])(Object(c["i"])("textarea",{"onUpdate:modelValue":t[14]||(t[14]=e=>s.form.description=e),rows:"3",placeholder:"Enter product description"},null,512),[[c["M"],s.form.description]])]),Object(c["i"])("div",Bn,[Object(c["i"])("label",$n,[Object(c["P"])(Object(c["i"])("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>s.form.active=e)},null,512),[[c["J"],s.form.active]]),t[37]||(t[37]=Object(c["k"])(" Active (available for purchase) "))])])]),Object(c["i"])("div",zn,[Object(c["i"])("button",{type:"button",class:"secondary",onClick:t[16]||(t[16]=t=>e.$emit("cancel"))}," Cancel "),Object(c["i"])("button",Qn,Object(c["H"])(a.product?"Update Product":"Create Product"),1)])],32)):(Object(c["x"])(),Object(c["h"])("div",hn,[Object(c["i"])("button",{class:"mode-button",onClick:t[0]||(t[0]=e=>s.selectedMode="manual")},t[18]||(t[18]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"edit_note",-1),Object(c["i"])("h3",null,"Create Product from Scratch",-1),Object(c["i"])("p",null,"Manually enter all product details",-1)])),Object(c["i"])("button",{class:"mode-button",onClick:t[1]||(t[1]=e=>s.selectedMode="search")},t[19]||(t[19]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"search",-1),Object(c["i"])("h3",null,"Search and Add Product",-1),Object(c["i"])("p",null,"Search Pokemon TCG database to auto-fill details",-1)]))]))])}var Gn=a("cee4");const Kn="0c4b0264-73d6-4ada-8edf-ef3ec5db80ea",Zn="https://api.pokemontcg.io/v2",Xn=Gn["a"].create({baseURL:Zn,headers:{"X-Api-Key":Kn}}),Yn={async searchCards({q:e,page:t=1,pageSize:a=20}){try{const c=await Xn.get("/cards",{params:{q:`name:${e}*`,page:t,pageSize:a,orderBy:"name",select:"id,name,images,types,rarity,cardmarket,set,flavorText"}});if(!c.data||!c.data.data)throw new Error("Invalid API response format");return{data:c.data.data,hasMore:c.data.totalCount>t*a,total:c.data.totalCount}}catch(c){if(c.response&&401===c.response.status)throw new Error("Invalid API key. Please check your configuration.");if(c.response&&429===c.response.status)throw new Error("Rate limit exceeded. Please try again later.");throw console.error("Pokemon TCG API Error:",c),new Error("Failed to fetch cards. Please try again.")}}};var er=a("b047"),tr=a.n(er),ar={name:"ProductForm",props:{product:{type:Object,default:null}},emits:["save","cancel"],setup(e,{emit:t}){const a=Object(c["A"])(null),s=Object(c["A"])(""),i=Object(c["A"])([]),l=Object(c["A"])(!1),n=Object(c["A"])(!1),r=Object(c["A"])({name:"",type:"single",price:0,stock:0,image_url:"",description:"",active:!0,metadata:{},...e.product||{}}),o=Object(c["A"])(1),d=Object(c["A"])(!1),b=Object(c["A"])(!1),u=Object(c["A"])(null),O=Object(c["A"])(null),j=tr()(async()=>{o.value=1,await m()},500);async function m(){if(!s.value||s.value.length<2)i.value=[];else{l.value=!0,O.value=null;try{const e=await Yn.searchCards({q:s.value,page:o.value,pageSize:20});1===o.value?i.value=e.data:i.value=[...i.value,...e.data],d.value=e.hasMore,0===i.value.length&&(O.value="No cards found matching your search.")}catch(e){console.error("Search error:",e),O.value=e.message,i.value=[]}finally{l.value=!1}}}async function p(){b.value=!0,o.value++,await m(),b.value=!1}function h(){s.value="",i.value=[],o.value=1,d.value=!1,u.value&&u.value.focus()}function v(){O.value=null,m()}function g(e){return e.cardmarket&&e.cardmarket.prices&&e.cardmarket.prices.averageSellPrice?e.cardmarket.prices.averageSellPrice.toFixed(2):null}function f(e){return e?e.toLowerCase():""}function y(e){const t=g(e)||0;console.log("Selected card:",e),console.log("Card price:",t),r.value={name:e.name,type:"single",price:parseFloat(t),stock:0,image_url:e.images.large,description:e.flavorText||"",active:!0,tcg_id:e.id,metadata:{set:e.set,rarity:e.rarity,number:e.number,artist:e.artist}},console.log("Updated form:",r.value),a.value="manual"}async function k(){if(!n.value){n.value=!0;try{const c={...r.value,price:parseFloat(r.value.price)||0,stock:parseInt(r.value.stock)||0};console.log("Submitting product data:",c),await t("save",c),e.product||(r.value={name:"",type:"single",price:0,stock:0,image_url:"",description:"",active:!0,metadata:{}},a.value=null)}catch(c){console.error("Error submitting form:",c),alert("Failed to save product: "+c.message)}finally{n.value=!1}}}return Object(c["v"])(()=>{"search"===a.value&&u.value&&u.value.focus()}),{selectedMode:a,searchQuery:s,searchResults:i,isSearching:l,form:r,isSubmitting:n,handleSubmit:k,getCardPrice:g,hasMoreResults:d,isLoadingMore:b,searchInput:u,debouncedSearch:j,loadMoreResults:p,clearSearch:h,getRarityClass:f,searchError:O,retrySearch:v,selectCard:y}}};a("9359");const cr=G()(ar,[["render",Jn],["__scopeId","data-v-d40ffdc6"]]);var sr=cr;const ir={class:"form-section"},lr={class:"product-info"},nr=["src","alt"],rr={class:"form-group"},or={class:"adjustment-input"},dr=["disabled"],br={class:"form-group"},ur={key:0,class:"form-group"},Or={class:"form-actions"},jr=["disabled"];function mr(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("form",{onSubmit:t[6]||(t[6]=Object(c["R"])((...e)=>s.handleSubmit&&s.handleSubmit(...e),["prevent"])),class:"stock-form"},[Object(c["i"])("div",ir,[Object(c["i"])("div",lr,[Object(c["i"])("img",{src:a.product.image_url,alt:a.product.name},null,8,nr),Object(c["i"])("div",null,[Object(c["i"])("h3",null,Object(c["H"])(a.product.name),1),Object(c["i"])("p",null,"Current Stock: "+Object(c["H"])(a.product.stock),1)])]),Object(c["i"])("div",rr,[t[7]||(t[7]=Object(c["i"])("label",null,"Adjustment *",-1)),Object(c["i"])("div",or,[Object(c["i"])("button",{type:"button",class:"adjust-button",disabled:s.form.quantity<=-a.product.stock,onClick:t[0]||(t[0]=e=>s.form.quantity--)},"-",8,dr),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.form.quantity=e),type:"number",required:""},null,512),[[c["M"],s.form.quantity]]),Object(c["i"])("button",{type:"button",class:"adjust-button",onClick:t[2]||(t[2]=e=>s.form.quantity++)},"+")])]),Object(c["i"])("div",br,[t[9]||(t[9]=Object(c["i"])("label",null,"Reason *",-1)),Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.form.reason=e),required:""},t[8]||(t[8]=[Object(c["i"])("option",{value:"restock"},"Restock",-1),Object(c["i"])("option",{value:"adjustment"},"Inventory Adjustment",-1),Object(c["i"])("option",{value:"damage"},"Damaged/Lost",-1),Object(c["i"])("option",{value:"other"},"Other",-1)]),512),[[c["L"],s.form.reason]])]),"other"===s.form.reason?(Object(c["x"])(),Object(c["h"])("div",ur,[t[10]||(t[10]=Object(c["i"])("label",null,"Specify Reason",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.form.customReason=e),type:"text",placeholder:"Enter reason",required:""},null,512),[[c["M"],s.form.customReason]])])):Object(c["g"])("",!0)]),Object(c["i"])("div",Or,[Object(c["i"])("button",{type:"button",class:"secondary",onClick:t[5]||(t[5]=t=>e.$emit("cancel"))}," Cancel "),Object(c["i"])("button",{type:"submit",class:"primary",disabled:s.isSubmitting},Object(c["H"])(s.isSubmitting?"Saving...":"Update Stock"),9,jr)])],32)}var pr={name:"StockAdjustmentForm",props:{product:{type:Object,required:!0}},emits:["save","cancel"],setup(e){const t=Object(c["A"])(!1),a=Object(c["A"])({quantity:0,reason:"restock",customReason:""});async function s(){t.value=!0;try{await this.$emit("save",{productId:e.product.id,quantity:a.value.quantity,reason:"other"===a.value.reason?a.value.customReason:a.value.reason})}finally{t.value=!1}}return{form:a,isSubmitting:t,handleSubmit:s}}};a("a3ba");const hr=G()(pr,[["render",mr],["__scopeId","data-v-5151e452"]]);var vr=hr,gr={name:"StoreManager",components:{Modal:Ys["a"],ProductForm:sr,StockAdjustmentForm:vr},setup(){const e=Object(c["A"])(""),t=Object(c["A"])([]),a=Object(c["A"])(!1),s=Object(c["A"])(!1),i=Object(c["A"])(null),l=Object(c["A"])(null),n=Object(c["A"])({totalProducts:0,totalSales:0,lowStock:0,productTrend:0,salesTrend:0}),r=Object(c["A"])([]),o=Object(c["A"])(!1),d=Object(c["d"])(()=>{if(console.log("Filtering products:",t.value),!e.value)return t.value||[];const a=e.value.toLowerCase();return(t.value||[]).filter(e=>{const t=e.name&&e.name.toLowerCase().includes(a),c=e.type&&e.type.toLowerCase().includes(a);return t||c})}),b=Object(c["d"])(()=>d.value.length>0&&r.value.length===d.value.length);async function u(){try{const{data:e,error:a}=await z["a"].from("products").select("\n            id,\n            name,\n            description,\n            price,\n            stock,\n            type,\n            condition,\n            tcg_id,\n            image_url,\n            admin_id,\n            active,\n            metadata,\n            created_at,\n            updated_at\n          ").order("created_at",{ascending:!1});if(a)throw console.error("Database error:",a),a;console.log("Raw products data:",e),t.value=(e||[]).map(e=>({...e,price:parseFloat(e.price)||0,stock:parseInt(e.stock)||0,active:"boolean"!==typeof e.active||e.active,metadata:e.metadata||{},condition:e.condition||"New",type:e.type||"single"})),console.log("Transformed products:",t.value),p()}catch(e){console.error("Error fetching products:",e),alert("Failed to load products. Please try again.")}}function O(){return t.value.reduce((e,t)=>e+t.price*(t.total_sold||0),0).toFixed(2)}function j(){return 0}function m(){return 0}function p(){n.value={totalProducts:t.value.length,totalSales:O(),lowStock:t.value.filter(e=>e.stock<5).length,productTrend:j(),salesTrend:m()}}async function h(){try{const{data:e}=await xt["a"].getCards();if(!e)throw new Error("No data received from API");const t=e.map(e=>{const t=e.cardmarket&&e.cardmarket.prices&&e.cardmarket.prices.averageSellPrice||0;return{name:e.name,type:"single",tcg_id:e.id,price:t,stock:0,image_url:e.images.large,active:!0,metadata:{set:e.set,rarity:e.rarity,number:e.number,artist:e.artist}}}),{error:a}=await z["a"].from("products").upsert(t,{onConflict:"tcg_id",ignoreDuplicates:!1});if(a)throw a;await u()}catch(e){console.error("Error syncing with API:",e),alert("Failed to sync products with API. Please try again.")}}async function v(e){try{const t={name:e.name,description:e.description||"",price:parseFloat(e.price)||0,stock:parseInt(e.stock)||0,type:e.type||"single",condition:e.condition||"New",tcg_id:e.tcg_id||null,image_url:e.image_url||"",active:"boolean"!==typeof e.active||e.active,metadata:e.metadata||{},updated_at:(new Date).toISOString()};if(console.log("Saving product with data:",t),i.value){const{data:e,error:a}=await z["a"].from("products").update(t).eq("id",i.value.id).select();if(a)throw a;console.log("Updated product:",e)}else{const{data:e,error:a}=await z["a"].from("products").insert([{...t,created_at:(new Date).toISOString()}]).select();if(a)throw a;console.log("Created product:",e)}await u(),g()}catch(t){console.error("Error saving product:",t),alert("Failed to save product: "+t.message)}}function g(){a.value=!1,i.value=null}function f(){s.value=!1,l.value=null}async function y({productId:e,quantity:t,reason:a}){await z["a"].from("stock_movements").insert({product_id:e,quantity:t,reason:a}),await u(),f()}function k(e){console.log("Editing product:",e),i.value={...e},a.value=!0}function w(e){console.log("Adjusting stock for:",e),l.value=e,s.value=!0}async function C(e){try{const{error:t}=await z["a"].from("products").update({active:!e.active}).eq("id",e.id);if(t)throw t;await u()}catch(t){console.error("Error toggling product status:",t),alert("Failed to update product status")}}function S(e){if(!e.metadata)return"0.00";const t=e.metadata.tcg_pricing&&e.metadata.tcg_pricing.market,a=e.metadata.cardmarket&&e.metadata.cardmarket.prices&&e.metadata.cardmarket.prices.averageSellPrice,c=t||a||0;return c.toFixed(2)}function _(e){e.target.checked?r.value=d.value.map(e=>e.id):r.value=[]}function x(){o.value=!0}async function A(){try{const{error:e}=await z["a"].from("products").delete().in("id",r.value);if(e)throw e;await u(),r.value=[],o.value=!1}catch(e){console.error("Error deleting products:",e),alert("Failed to delete products: "+e.message)}}return Object(c["v"])(()=>{console.log("StoreManager mounted"),u()}),u(),{search:e,filteredProducts:d,products:t,stats:n,showAddProduct:a,showStockModal:s,editingProduct:i,selectedProduct:l,syncWithApi:h,saveProduct:v,closeAddModal:g,closeStockModal:f,updateStock:y,calculateTotalSales:O,calculateProductTrend:j,calculateSalesTrend:m,editProduct:k,adjustStock:w,toggleProductStatus:C,getMarketPrice:S,selectedProducts:r,isAllSelected:b,showDeleteModal:o,toggleSelectAll:_,confirmDeleteSelected:x,deleteSelected:A}}};a("c63d");const fr=G()(gr,[["render",mn],["__scopeId","data-v-4fe5c552"]]);var yr=fr;const kr={class:"order-manager"},wr={class:"panel-header"},Cr={class:"filters"},Sr={class:"search-box"},_r={class:"filter-group"},xr=["value"],Ar={class:"stat-pills"},Mr={class:"stat-content"},Pr={class:"stat-content"},Hr={class:"stat-content"},Ir={class:"stat-pill success"},Dr={class:"stat-content"},Ur={key:0,class:"loading-overlay"},Tr={key:1,class:"data-table"},Nr={class:"customer-info"},Fr={class:"price"},qr=["onUpdate:modelValue","onChange"],Rr=["value"],Er={class:"actions"},Lr=["onClick"],Vr=["onClick"],Wr={key:2,class:"empty-state"};function Br(e,t,a,s,i,l){const n=Object(c["D"])("OrderDetails"),r=Object(c["D"])("Modal");return Object(c["x"])(),Object(c["h"])("div",kr,[Object(c["i"])("div",wr,[t[18]||(t[18]=Object(c["i"])("div",{class:"header-content"},[Object(c["i"])("h2",null,"Order Management"),Object(c["i"])("p",{class:"subtitle"},"Manage and track customer orders")],-1)),Object(c["i"])("div",Cr,[Object(c["i"])("div",Sr,[t[6]||(t[6]=Object(c["i"])("span",{class:"material-symbols-rounded"},"search",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),type:"text",placeholder:"Search by order ID, customer name or email..."},null,512),[[c["M"],s.search]])]),Object(c["i"])("div",_r,[Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.statusFilter=e),class:"filter-select"},[t[7]||(t[7]=Object(c["i"])("option",{value:""},"All Statuses",-1)),(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.orderStatuses,e=>(Object(c["x"])(),Object(c["h"])("option",{key:e.value,value:e.value,class:Object(c["r"])(e.value)},Object(c["H"])(e.label),11,xr))),128))],512),[[c["L"],s.statusFilter]]),Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.timeFilter=e),class:"filter-select"},t[8]||(t[8]=[Object(c["i"])("option",{value:"all"},"All Time",-1),Object(c["i"])("option",{value:"today"},"Today",-1),Object(c["i"])("option",{value:"week"},"This Week",-1),Object(c["i"])("option",{value:"month"},"This Month",-1)]),512),[[c["L"],s.timeFilter]]),Object(c["i"])("button",{class:"filter-button",onClick:t[3]||(t[3]=(...e)=>s.clearFilters&&s.clearFilters(...e))},t[9]||(t[9]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"filter_alt_off",-1),Object(c["k"])(" Clear Filters ")]))])]),Object(c["i"])("div",Ar,[Object(c["i"])("div",{class:Object(c["r"])(["stat-pill",{active:"pending"===s.statusFilter}])},[t[11]||(t[11]=Object(c["i"])("div",{class:"stat-icon"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"schedule")],-1)),Object(c["i"])("div",Mr,[t[10]||(t[10]=Object(c["i"])("span",null,"Pending Orders",-1)),Object(c["i"])("strong",null,Object(c["H"])(s.pendingCount),1)])],2),Object(c["i"])("div",{class:Object(c["r"])(["stat-pill",{active:"approved"===s.statusFilter}])},[t[13]||(t[13]=Object(c["i"])("div",{class:"stat-icon"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"check_circle")],-1)),Object(c["i"])("div",Pr,[t[12]||(t[12]=Object(c["i"])("span",null,"Approved",-1)),Object(c["i"])("strong",null,Object(c["H"])(s.approvedCount),1)])],2),Object(c["i"])("div",{class:Object(c["r"])(["stat-pill",{active:"preparing"===s.statusFilter}])},[t[15]||(t[15]=Object(c["i"])("div",{class:"stat-icon"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"inventory")],-1)),Object(c["i"])("div",Hr,[t[14]||(t[14]=Object(c["i"])("span",null,"In Preparation",-1)),Object(c["i"])("strong",null,Object(c["H"])(s.preparingCount),1)])],2),Object(c["i"])("div",Ir,[t[17]||(t[17]=Object(c["i"])("div",{class:"stat-icon"},[Object(c["i"])("span",{class:"material-symbols-rounded"},"payments")],-1)),Object(c["i"])("div",Dr,[t[16]||(t[16]=Object(c["i"])("span",null,"Total Revenue",-1)),Object(c["i"])("strong",null,"€"+Object(c["H"])(s.totalRevenue),1)])])])]),Object(c["i"])("div",{class:Object(c["r"])(["table-container",{"is-loading":s.isLoading}])},[s.isLoading?(Object(c["x"])(),Object(c["h"])("div",Ur,t[19]||(t[19]=[Object(c["i"])("span",{class:"material-symbols-rounded spin"},"sync",-1),Object(c["k"])(" Loading orders... ")]))):(Object(c["x"])(),Object(c["h"])("table",Tr,[t[22]||(t[22]=Object(c["i"])("thead",null,[Object(c["i"])("tr",null,[Object(c["i"])("th",null,"Order ID"),Object(c["i"])("th",null,"Customer"),Object(c["i"])("th",null,"Items"),Object(c["i"])("th",null,"Total"),Object(c["i"])("th",null,"Status"),Object(c["i"])("th",null,"Date"),Object(c["i"])("th",null,"Actions")])],-1)),Object(c["i"])("tbody",null,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.filteredOrders,a=>(Object(c["x"])(),Object(c["h"])("tr",{key:a.id},[Object(c["i"])("td",null,"#"+Object(c["H"])(a.id.slice(0,8)),1),Object(c["i"])("td",null,[Object(c["i"])("div",Nr,[Object(c["i"])("span",null,Object(c["H"])(a.customer_name),1),Object(c["i"])("small",null,Object(c["H"])(a.customer_email),1)])]),Object(c["i"])("td",null,Object(c["H"])(a.items.length)+" items",1),Object(c["i"])("td",Fr,"€"+Object(c["H"])(s.formatPrice(a.total_amount)),1),Object(c["i"])("td",null,[Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":e=>a.status=e,onChange:e=>s.updateOrderStatus(a),class:Object(c["r"])(["status-select",a.status])},[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.orderStatuses,e=>(Object(c["x"])(),Object(c["h"])("option",{key:e.value,value:e.value},Object(c["H"])(e.label),9,Rr))),128))],42,qr),[[c["L"],a.status]])]),Object(c["i"])("td",null,Object(c["H"])(s.formatDate(a.created_at)),1),Object(c["i"])("td",Er,[Object(c["i"])("button",{onClick:e=>s.viewOrderDetails(a),class:"icon-button"},t[20]||(t[20]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"visibility",-1)]),8,Lr),Object(c["i"])("button",{onClick:t=>e.downloadInvoice(a),class:"icon-button"},t[21]||(t[21]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"receipt_long",-1)]),8,Vr)])]))),128))])])),s.isLoading||0!==s.filteredOrders.length?Object(c["g"])("",!0):(Object(c["x"])(),Object(c["h"])("div",Wr,[t[23]||(t[23]=Object(c["i"])("span",{class:"material-symbols-rounded"},"inbox",-1)),t[24]||(t[24]=Object(c["i"])("h3",null,"No Orders Found",-1)),t[25]||(t[25]=Object(c["i"])("p",null,"Try adjusting your filters or search criteria",-1)),Object(c["i"])("button",{class:"action-button",onClick:t[4]||(t[4]=(...e)=>s.clearFilters&&s.clearFilters(...e))},"Clear Filters")]))],2),s.selectedOrder?(Object(c["x"])(),Object(c["f"])(r,{key:0,onClose:t[5]||(t[5]=e=>s.selectedOrder=null)},{header:Object(c["O"])(()=>[Object(c["i"])("h3",null,"Order Details #"+Object(c["H"])(s.selectedOrder.id.slice(0,8)),1)]),default:Object(c["O"])(()=>[Object(c["l"])(n,{order:s.selectedOrder,onUpdate:s.refreshOrders},null,8,["order","onUpdate"])]),_:1})):Object(c["g"])("",!0)])}const $r={class:"order-details"},zr={class:"detail-section"},Qr={class:"info-grid"},Jr={class:"info-item"},Gr={class:"value"},Kr={class:"info-item"},Zr={class:"value"},Xr={class:"detail-section"},Yr={class:"address-box"},eo={class:"detail-section"},to={class:"items-list"},ao={class:"item-image"},co=["src","alt"],so={key:1,class:"image-placeholder"},io={class:"item-info"},lo={class:"item-meta"},no={class:"quantity"},ro={class:"price"},oo={class:"item-total"},bo={class:"detail-section"},uo={class:"summary-box"},Oo={class:"summary-row"},jo={class:"summary-row total"},mo={class:"detail-section"},po={class:"status-timeline"},ho={class:"timeline-content"},vo={class:"status"},go={class:"date"},fo={class:"actions-bar"},yo=["disabled"];function ko(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",$r,[Object(c["i"])("section",zr,[t[5]||(t[5]=Object(c["i"])("h4",null,"Customer Information",-1)),Object(c["i"])("div",Qr,[Object(c["i"])("div",Jr,[t[3]||(t[3]=Object(c["i"])("span",{class:"label"},"Name",-1)),Object(c["i"])("span",Gr,Object(c["H"])(a.order.customer_name),1)]),Object(c["i"])("div",Kr,[t[4]||(t[4]=Object(c["i"])("span",{class:"label"},"Email",-1)),Object(c["i"])("span",Zr,Object(c["H"])(a.order.customer_email),1)])])]),Object(c["i"])("section",Xr,[t[6]||(t[6]=Object(c["i"])("h4",null,"Shipping Address",-1)),Object(c["i"])("div",Yr,[Object(c["i"])("p",null,Object(c["H"])(a.order.shipping_address.first_name)+" "+Object(c["H"])(a.order.shipping_address.last_name),1),Object(c["i"])("p",null,Object(c["H"])(a.order.shipping_address.address),1),Object(c["i"])("p",null,Object(c["H"])(a.order.shipping_address.postal_code)+" "+Object(c["H"])(a.order.shipping_address.city),1),Object(c["i"])("p",null,Object(c["H"])(a.order.shipping_address.country),1)])]),Object(c["i"])("section",eo,[t[8]||(t[8]=Object(c["i"])("h4",null,"Order Items",-1)),Object(c["i"])("div",to,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(a.order.items,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"order-item"},[Object(c["i"])("div",ao,[e.image_url?(Object(c["x"])(),Object(c["h"])("img",{key:0,src:e.image_url,alt:e.name},null,8,co)):(Object(c["x"])(),Object(c["h"])("div",so,t[7]||(t[7]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"image",-1)])))]),Object(c["i"])("div",io,[Object(c["i"])("h5",null,Object(c["H"])(e.name),1),Object(c["i"])("div",lo,[Object(c["i"])("span",no,Object(c["H"])(e.quantity)+"x",1),Object(c["i"])("span",ro,"€"+Object(c["H"])(s.formatPrice(e.price)),1)])]),Object(c["i"])("div",oo," €"+Object(c["H"])(s.formatPrice(e.price*e.quantity)),1)]))),128))])]),Object(c["i"])("section",bo,[t[12]||(t[12]=Object(c["i"])("h4",null,"Order Summary",-1)),Object(c["i"])("div",uo,[Object(c["i"])("div",Oo,[t[9]||(t[9]=Object(c["i"])("span",null,"Subtotal",-1)),Object(c["i"])("span",null,"€"+Object(c["H"])(s.formatPrice(a.order.total_amount)),1)]),t[11]||(t[11]=Object(c["i"])("div",{class:"summary-row"},[Object(c["i"])("span",null,"Shipping"),Object(c["i"])("span",null,"Free")],-1)),Object(c["i"])("div",jo,[t[10]||(t[10]=Object(c["i"])("span",null,"Total",-1)),Object(c["i"])("span",null,"€"+Object(c["H"])(s.formatPrice(a.order.total_amount)),1)])])]),Object(c["i"])("section",mo,[t[13]||(t[13]=Object(c["i"])("h4",null,"Status History",-1)),Object(c["i"])("div",po,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(a.order.status_history,(e,t)=>(Object(c["x"])(),Object(c["h"])("div",{key:t,class:"timeline-item"},[Object(c["i"])("div",{class:Object(c["r"])(["timeline-dot",e.status])},null,2),Object(c["i"])("div",ho,[Object(c["i"])("span",vo,Object(c["H"])(e.status),1),Object(c["i"])("span",go,Object(c["H"])(s.formatDate(e.timestamp)),1)])]))),128))])]),Object(c["i"])("div",fo,[Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.newStatus=e),class:"status-select"},t[14]||(t[14]=[Object(c["j"])('<option value="" data-v-f07f3e98>Update Status</option><option value="processing" data-v-f07f3e98>Mark as Processing</option><option value="shipped" data-v-f07f3e98>Mark as Shipped</option><option value="delivered" data-v-f07f3e98>Mark as Delivered</option><option value="cancelled" data-v-f07f3e98>Cancel Order</option>',5)]),512),[[c["L"],s.newStatus]]),Object(c["i"])("button",{onClick:t[1]||(t[1]=(...e)=>s.updateStatus&&s.updateStatus(...e)),class:"action-button",disabled:!s.newStatus}," Update Status ",8,yo),Object(c["i"])("button",{onClick:t[2]||(t[2]=(...e)=>s.downloadInvoice&&s.downloadInvoice(...e)),class:"action-button secondary"},t[15]||(t[15]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"receipt_long",-1),Object(c["k"])(" Download Invoice ")]))])])}var wo={name:"OrderDetails",props:{order:{type:Object,required:!0}},emits:["update"],setup(e,{emit:t}){const a=Object(c["A"])(""),s=e=>Number(e).toFixed(2),i=e=>new Date(e).toLocaleString(),l=async()=>{if(a.value)try{const{error:c}=await z["a"].from("orders").update({status:a.value,status_history:[...e.order.status_history||[],{status:a.value,timestamp:new Date}]}).eq("id",e.order.id);if(c)throw c;te.success("Order status updated"),t("update")}catch(c){console.error("Error updating order:",c),te.error("Failed to update order status")}},n=()=>{console.log("Downloading invoice for order:",e.order.id)};return{newStatus:a,formatPrice:s,formatDate:i,updateStatus:l,downloadInvoice:n}}};a("2161");const Co=G()(wo,[["render",ko],["__scopeId","data-v-f07f3e98"]]);var So=Co,_o={name:"OrderManager",components:{Modal:Ys["a"],OrderDetails:So},setup(){const e=Object(c["A"])([]),t=Object(c["A"])(""),a=Object(c["A"])(""),s=Object(c["A"])("all"),i=Object(c["A"])(null),l=Object(c["A"])(!1),n=[{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"paid",label:"Paid"},{value:"preparing",label:"Preparing"},{value:"waiting_for_shipping",label:"Ready to Ship"},{value:"shipped",label:"Shipped"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}],r=Object(c["d"])(()=>{let c=e.value;if(t.value){const e=t.value.toLowerCase();c=c.filter(t=>t.id.toLowerCase().includes(e)||t.customer_name.toLowerCase().includes(e)||t.customer_email.toLowerCase().includes(e))}a.value&&(c=c.filter(e=>e.status===a.value));const i=new Date;switch(s.value){case"today":c=c.filter(e=>new Date(e.created_at).toDateString()===i.toDateString());break;case"week":const e=new Date(i.setDate(i.getDate()-7));c=c.filter(t=>new Date(t.created_at)>=e);break;case"month":const t=new Date(i.setMonth(i.getMonth()-1));c=c.filter(e=>new Date(e.created_at)>=t);break}return c}),o=Object(c["d"])(()=>e.value.filter(e=>"pending"===e.status).length),d=Object(c["d"])(()=>e.value.filter(e=>"processing"===e.status).length),b=Object(c["d"])(()=>e.value.reduce((e,t)=>e+(t.total_amount||0),0).toFixed(2)),u=Object(c["d"])(()=>e.value.filter(e=>"approved"===e.status).length),O=Object(c["d"])(()=>e.value.filter(e=>"preparing"===e.status).length),j=async()=>{l.value=!0;try{const{data:t,error:a}=await z["a"].from("orders").select("*").order("created_at",{ascending:!1});if(a)throw a;e.value=t.map(e=>{const t="string"===typeof e.items?JSON.parse(e.items):e.items,a="string"===typeof e.shipping_address?JSON.parse(e.shipping_address):e.shipping_address;return{...e,items:t,shipping_address:a,customer_name:`${a.first_name} ${a.last_name}`,customer_email:a.email}}),te.success("Orders loaded successfully")}catch(t){console.error("Error fetching orders:",t),te.error("Failed to load orders: "+t.message)}finally{l.value=!1}},m=async e=>{try{const{data:t}=await z["a"].auth.getUser(),a=t&&t.user?t.user.id:null;if(!a)throw new Error("No admin user found");const{error:c}=await z["a"].from("orders").update({status:e.status,admin_id:a,admin_action_at:(new Date).toISOString()}).eq("id",e.id);if(c)throw c;te.success("Order status updated"),await j()}catch(t){console.error("Error updating order:",t),te.error("Failed to update order status")}},p=e=>{i.value=e},h=e=>Number(e).toFixed(2),v=e=>new Date(e).toLocaleString(),g=()=>{t.value="",a.value="",s.value="all"};return Object(c["v"])(j),{orders:e,search:t,statusFilter:a,timeFilter:s,selectedOrder:i,orderStatuses:n,filteredOrders:r,pendingCount:o,processingCount:d,totalRevenue:b,updateOrderStatus:m,viewOrderDetails:p,formatPrice:h,formatDate:v,refreshOrders:j,isLoading:l,approvedCount:u,preparingCount:O,clearFilters:g}}};a("36a6");const xo=G()(_o,[["render",Br],["__scopeId","data-v-42b2be45"]]);var Ao=xo;const Mo={class:"notifications-manager"},Po={class:"panel-header"},Ho=["disabled"],Io={class:"notification-form"},Do={class:"form-group"},Uo={key:0,class:"form-group"},To={class:"users-select"},No=["id","value"],Fo=["for"],qo={class:"form-group"},Ro={class:"form-group"},Eo={class:"form-group"},Lo={key:0,class:"error-message"};function Vo(e,t,a,s,i,l){return Object(c["x"])(),Object(c["h"])("div",Mo,[Object(c["i"])("div",Po,[t[7]||(t[7]=Object(c["i"])("h3",null,"Send Notifications",-1)),Object(c["i"])("button",{class:"send-button",onClick:t[0]||(t[0]=(...e)=>s.sendNotification&&s.sendNotification(...e)),disabled:s.isSending},[t[6]||(t[6]=Object(c["i"])("span",{class:"material-symbols-rounded"},"send",-1)),Object(c["k"])(" "+Object(c["H"])(s.isSending?"Sending...":"Send Notification"),1)],8,Ho)]),Object(c["i"])("div",Io,[Object(c["i"])("div",Do,[t[9]||(t[9]=Object(c["i"])("label",null,"Recipients",-1)),Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.recipients=e),class:"select-input"},t[8]||(t[8]=[Object(c["i"])("option",{value:"all"},"All Users",-1),Object(c["i"])("option",{value:"specific"},"Specific Users",-1)]),512),[[c["L"],s.recipients]])]),"specific"===s.recipients?(Object(c["x"])(),Object(c["h"])("div",Uo,[t[10]||(t[10]=Object(c["i"])("label",null,"Select Users",-1)),Object(c["i"])("div",To,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.users,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"user-checkbox"},[Object(c["P"])(Object(c["i"])("input",{type:"checkbox",id:e.id,"onUpdate:modelValue":t[2]||(t[2]=e=>s.selectedUsers=e),value:e.id},null,8,No),[[c["J"],s.selectedUsers]]),Object(c["i"])("label",{for:e.id},Object(c["H"])(e.email),9,Fo)]))),128))])])):Object(c["g"])("",!0),Object(c["i"])("div",qo,[t[12]||(t[12]=Object(c["i"])("label",null,"Type",-1)),Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.type=e),class:"select-input"},t[11]||(t[11]=[Object(c["i"])("option",{value:"info"},"Info",-1),Object(c["i"])("option",{value:"success"},"Success",-1),Object(c["i"])("option",{value:"warning"},"Warning",-1),Object(c["i"])("option",{value:"error"},"Error",-1)]),512),[[c["L"],s.type]])]),Object(c["i"])("div",Ro,[t[13]||(t[13]=Object(c["i"])("label",null,"Message",-1)),Object(c["P"])(Object(c["i"])("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.message=e),placeholder:"Enter notification message...",rows:"4",class:"text-input"},null,512),[[c["M"],s.message]])]),Object(c["i"])("div",Eo,[t[14]||(t[14]=Object(c["i"])("label",null,"Duration (seconds)",-1)),Object(c["P"])(Object(c["i"])("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=e=>s.duration=e),min:"0",step:"1",class:"number-input"},null,512),[[c["M"],s.duration,void 0,{number:!0}]]),t[15]||(t[15]=Object(c["i"])("span",{class:"hint"},"Set to 0 for permanent notification",-1))])]),s.error?(Object(c["x"])(),Object(c["h"])("div",Lo,Object(c["H"])(s.error),1)):Object(c["g"])("",!0)])}var Wo={name:"NotificationsManager",setup(){const e=Object(c["A"])("all"),t=Object(c["A"])([]),a=Object(c["A"])("info"),s=Object(c["A"])(""),i=Object(c["A"])(5),l=Object(c["A"])([]),n=Object(c["A"])(""),r=Object(c["A"])(!1),o=async()=>{const{data:e}=await z["a"].from("profiles").select("id, email");l.value=e||[]},d=async()=>{if(s.value.trim()){r.value=!0,n.value="";try{if("all"===e.value)await te.sendToAll({message:s.value,type:a.value,duration:1e3*i.value});else{if(!t.value.length)return void(n.value="Please select at least one user");await te.sendToUsers({userIds:t.value,message:s.value,type:a.value,duration:1e3*i.value})}s.value="",t.value=[],te.success("Notification sent successfully")}catch(c){n.value=c.message}finally{r.value=!1}}else n.value="Please enter a message"};return Object(c["v"])(o),{recipients:e,selectedUsers:t,type:a,message:s,duration:i,users:l,error:n,isSending:r,sendNotification:d}}};a("4ab2");const Bo=G()(Wo,[["render",Vo],["__scopeId","data-v-48c1d7e6"]]);var $o=Bo,zo={name:"Admin",components:{Modal:Ys["a"],NewsManager:gi,CardsManager:Ni,ReportsManager:rl,SettingsManager:Tl,StoreManager:yr,OrderManager:Ao,NotificationsManager:$o},setup(){const e=Object(c["A"])("users"),t=Object(c["A"])([]),a=Object(c["A"])(""),s=Object(c["A"])(!1),i=Object(c["A"])(!1),l=Object(c["A"])(null),n=Object(c["A"])({totalUsers:0,newToday:0,totalOrders:0,pendingOrders:0,totalRevenue:0,revenueToday:0,totalCards:0,lowStock:0}),r=Object(c["A"])({maintenanceMode:!1,allowRegistrations:!0}),o=Object(c["A"])({email:"",password:"",first_name:"",last_name:"",role:"user",status:"active"}),d=Object(c["A"])(""),b=Object(c["A"])(!1),u=[{id:"users",name:"Users",icon:"group"},{id:"store",name:"Store",icon:"store"},{id:"orders",name:"Orders",icon:"local_shipping"},{id:"news",name:"News",icon:"newspaper"},{id:"cards",name:"Cards",icon:"style"},{id:"reports",name:"Reports",icon:"monitoring"},{id:"settings",name:"Settings",icon:"settings"},{id:"notifications",name:"Notifications",icon:"notifications_active"}],O=Object(c["d"])(()=>{if(!a.value)return t.value;const e=a.value.toLowerCase();return t.value.filter(t=>t.email.toLowerCase().includes(e)||t.full_name&&t.full_name.toLowerCase().includes(e))}),j=e=>(e/100).toFixed(2),m=async()=>{const e=new Date;e.setHours(0,0,0,0);try{const{count:t}=await z["a"].from("profiles").select("*",{count:"exact"}).gte("created_at",e.toISOString()),{data:a,error:c}=await z["a"].from("orders").select("status, total_amount, created_at");if(c)return void console.error("Error fetching orders:",c);const s=a||[],i=s.filter(e=>"pending"===e.status).length,l=s.filter(t=>new Date(t.created_at)>=e),r=s.reduce((e,t)=>e+(t.total_amount||0),0),o=l.reduce((e,t)=>e+(t.total_amount||0),0),{count:d}=await z["a"].from("store_items").select("*",{count:"exact"}).lt("quantity",5);n.value={...n.value,newToday:t||0,totalOrders:s.length,pendingOrders:i,totalRevenue:r,revenueToday:o,lowStock:d||0}}catch(t){console.error("Error fetching stats:",t)}};async function p(){try{const{data:e,error:a}=await z["a"].rpc("get_users_with_profiles");if(a)return void console.error("Error fetching users:",a);console.log("Fetched users:",e),t.value=e.map(e=>({id:e.id,email:e.email,full_name:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:"-",role:e.role||"user",status:e.status||"active",created_at:e.created_at})),n.value.totalUsers=t.value.length}catch(e){console.error("Unexpected error:",e)}}function h(){l.value=null,o.value={email:"",password:"",first_name:"",last_name:"",role:"user",status:"active"},s.value=!0}async function v(e){const[t,a]=(e.full_name||"-").split(" ");l.value=e,o.value={...o.value,first_name:"-"!==t?t:"",last_name:a||"",role:e.role||"user",status:e.status||"active"},s.value=!0}async function g(e){l.value=e,i.value=!0}async function f(){if(!l.value)return;const{error:e}=await z["a"].from("profiles").delete().eq("id",l.value.id);e?console.error("Error deleting user:",e):(i.value=!1,l.value=null,await p())}async function y(){b.value=!0,d.value="";try{if(l.value&&l.value.id){const{error:e}=await z["a"].from("profiles").update({first_name:o.value.first_name,last_name:o.value.last_name,role:o.value.role,status:o.value.status}).eq("id",l.value.id);if(e)throw e}else{const{data:e,error:t}=await z["a"].auth.signUp({email:o.value.email,password:o.value.password});if(t)throw t;const{error:a}=await z["a"].from("profiles").insert({id:e.user.id,first_name:o.value.first_name,last_name:o.value.last_name,role:o.value.role,status:o.value.status});if(a)throw a}_(),await p()}catch(e){console.error("Error saving user:",e),d.value=e.message}finally{b.value=!1}}async function k(){console.log("Saving settings:",r.value)}async function w(){console.log("Backing up database...")}async function C(){console.log("Syncing cards...")}const S=async()=>{r.value.maintenanceMode=!r.value.maintenanceMode,await k(),notifications.info("Maintenance mode "+(r.value.maintenanceMode?"enabled":"disabled"))};function _(){s.value=!1,l.value=null,o.value={email:"",password:"",first_name:"",last_name:"",role:"user",status:"active"},d.value=""}return Object(c["v"])(async()=>{await p(),await m()}),{currentTab:e,tabs:u,users:t,userSearch:a,filteredUsers:O,stats:n,settings:r,showEditModal:s,showDeleteModal:i,editingUser:l,userForm:o,formError:d,isSubmitting:b,editUser:v,confirmDeleteUser:g,deleteUser:f,saveUser:y,saveSettings:k,backupDatabase:w,syncCards:C,closeEditModal:_,initNewUser:h,formatDate:e=>new Date(e).toLocaleDateString(),formatMoney:j,toggleMaintenance:S}}};a("204a");const Qo=G()(zo,[["render",Xs],["__scopeId","data-v-07720f9f"]]);var Jo=Qo;const Go={class:"store"},Ko={class:"store-hero"},Zo={class:"quick-categories"},Xo=["onClick"],Yo={class:"material-symbols-rounded"},ed={class:"filter-section"},td={class:"search-container"},ad={class:"search-box"},cd={class:"advanced-filters"},sd={key:0,class:"active-filters"},id={class:"products-grid"},ld={class:"product-image"},nd=["src","alt"],rd={class:"product-badges"},od={key:0,class:"set-info"},dd=["src","alt"],bd={key:1,class:"rarity-badge"},ud={class:"product-info"},Od={class:"product-header"},jd={key:0,class:"product-subinfo"},md={key:0,class:"pack-count"},pd={key:1,class:"product-subinfo"},hd={key:0,class:"card-count"},vd={class:"product-meta"},gd={class:"meta-left"},fd={key:0,class:"product-set"},yd={class:"condition"},kd={class:"product-price"},wd=["disabled","onClick"],Cd={class:"product-actions"},Sd=["onClick"],_d={class:"material-symbols-rounded"},xd=["onClick"],Ad={key:1,class:"pagination"},Md=["disabled"],Pd=["onClick"],Hd=["disabled"];function Id(e,t,a,s,i,l){const n=Object(c["D"])("QuickPreview"),r=Object(c["D"])("Modal"),o=Object(c["D"])("AppleNotification");return Object(c["x"])(),Object(c["h"])("div",Go,[Object(c["i"])("div",Ko,[t[12]||(t[12]=Object(c["i"])("div",{class:"hero-content"},[Object(c["i"])("h1",null,"Card Market"),Object(c["i"])("p",{class:"subtitle"},"Discover rare and valuable Pokémon cards")],-1)),Object(c["i"])("div",Zo,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.categories,e=>(Object(c["x"])(),Object(c["h"])("button",{key:e.id,class:Object(c["r"])(["category-pill",{active:s.filters.category===e.id}]),onClick:t=>s.filters.category=e.id},[Object(c["i"])("span",Yo,Object(c["H"])(e.icon),1),Object(c["k"])(" "+Object(c["H"])(e.name),1)],10,Xo))),128))])]),Object(c["i"])("div",ed,[Object(c["i"])("div",td,[Object(c["i"])("div",ad,[t[13]||(t[13]=Object(c["i"])("span",{class:"material-symbols-rounded"},"search",-1)),Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),type:"text",placeholder:"Search for cards, sets, or boosters..."},null,512),[[c["M"],s.search]])]),Object(c["i"])("div",cd,[Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.filters.priceRange=e)},t[14]||(t[14]=[Object(c["i"])("option",{value:""},"All Prices",-1),Object(c["i"])("option",{value:"under10"},"Under $10",-1),Object(c["i"])("option",{value:"10to50"},"$10 - $50",-1),Object(c["i"])("option",{value:"50plus"},"$50+",-1)]),512),[[c["L"],s.filters.priceRange]]),Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.filters.rarity=e)},t[15]||(t[15]=[Object(c["j"])('<option value="" data-v-e81fc950>All Rarities</option><option value="common" data-v-e81fc950>Common</option><option value="uncommon" data-v-e81fc950>Uncommon</option><option value="rare" data-v-e81fc950>Rare</option><option value="ultra" data-v-e81fc950>Ultra Rare</option>',5)]),512),[[c["L"],s.filters.rarity]]),Object(c["P"])(Object(c["i"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.filters.condition=e)},t[16]||(t[16]=[Object(c["j"])('<option value="" data-v-e81fc950>All Conditions</option><option value="mint" data-v-e81fc950>Mint</option><option value="near_mint" data-v-e81fc950>Near Mint</option><option value="excellent" data-v-e81fc950>Excellent</option><option value="good" data-v-e81fc950>Good</option>',5)]),512),[[c["L"],s.filters.condition]])])])]),s.activeFiltersCount?(Object(c["x"])(),Object(c["h"])("div",sd,[s.filters.priceRange?(Object(c["x"])(),Object(c["h"])("span",{key:0,class:"filter-tag",onClick:t[4]||(t[4]=e=>s.filters.priceRange="")},[Object(c["k"])(Object(c["H"])(e.formatPriceRange(s.filters.priceRange))+" ",1),t[17]||(t[17]=Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1))])):Object(c["g"])("",!0),s.filters.rarity?(Object(c["x"])(),Object(c["h"])("span",{key:1,class:"filter-tag",onClick:t[5]||(t[5]=e=>s.filters.rarity="")},[Object(c["k"])(Object(c["H"])(s.filters.rarity)+" ",1),t[18]||(t[18]=Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1))])):Object(c["g"])("",!0),s.filters.condition?(Object(c["x"])(),Object(c["h"])("span",{key:2,class:"filter-tag",onClick:t[6]||(t[6]=e=>s.filters.condition="")},[Object(c["k"])(Object(c["H"])(s.filters.condition)+" ",1),t[19]||(t[19]=Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1))])):Object(c["g"])("",!0),Object(c["i"])("button",{class:"clear-filters",onClick:t[7]||(t[7]=(...e)=>s.clearFilters&&s.clearFilters(...e))},"Clear All")])):Object(c["g"])("",!0),Object(c["i"])("div",id,[Object(c["l"])(c["c"],{name:"product-card"},{default:Object(c["O"])(()=>[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.paginatedProducts,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:Object(c["r"])(["product-card",[e.type,{"out-of-stock":e.stock<=0,"in-wishlist":s.isInWishlist(e.id)}]])},[Object(c["i"])("div",ld,[Object(c["i"])("img",{src:e.image_url,alt:e.name},null,8,nd),Object(c["i"])("div",rd,[Object(c["i"])("span",{class:Object(c["r"])(["type-badge",e.type])},Object(c["H"])(s.formatProductType(e.type)),3),"single"===e.type&&e.metadata&&e.metadata.set?(Object(c["x"])(),Object(c["h"])("div",od,[e.metadata.set.images&&e.metadata.set.images.symbol?(Object(c["x"])(),Object(c["h"])("img",{key:0,src:e.metadata.set.images.symbol,class:"set-symbol",alt:e.metadata.set.name},null,8,dd)):Object(c["g"])("",!0),Object(c["i"])("span",null,Object(c["H"])(e.metadata.set.name),1)])):Object(c["g"])("",!0),e.metadata&&e.metadata.rarity?(Object(c["x"])(),Object(c["h"])("span",bd,Object(c["H"])(e.metadata.rarity),1)):Object(c["g"])("",!0),e.stock<5&&e.stock>0?(Object(c["x"])(),Object(c["h"])("span",{key:2,class:Object(c["r"])(["stock-badge",s.getStockLevel(e.stock)])},Object(c["H"])(e.stock)+" left ",3)):Object(c["g"])("",!0)])]),Object(c["i"])("div",ud,[Object(c["i"])("div",Od,[Object(c["i"])("h3",null,Object(c["H"])(e.name),1),"booster"===e.type?(Object(c["x"])(),Object(c["h"])("div",jd,[e.metadata&&e.metadata.packCount?(Object(c["x"])(),Object(c["h"])("span",md,Object(c["H"])(e.metadata.packCount)+" Packs ",1)):Object(c["g"])("",!0)])):Object(c["g"])("",!0),"set"===e.type?(Object(c["x"])(),Object(c["h"])("div",pd,[e.metadata&&e.metadata.cardCount?(Object(c["x"])(),Object(c["h"])("span",hd,Object(c["H"])(e.metadata.cardCount)+" Cards ",1)):Object(c["g"])("",!0)])):Object(c["g"])("",!0)]),Object(c["i"])("div",vd,[Object(c["i"])("div",gd,[e.metadata&&e.metadata.set?(Object(c["x"])(),Object(c["h"])("span",fd,Object(c["H"])(e.metadata.set.name),1)):Object(c["g"])("",!0),Object(c["i"])("span",yd,Object(c["H"])(e.condition),1)]),Object(c["i"])("span",kd,"$"+Object(c["H"])(s.formatPrice(e.price)),1)]),Object(c["i"])("button",{class:"buy-button",disabled:e.stock<=0,onClick:t=>s.addToCart(e)},Object(c["H"])(e.stock<=0?"Out of Stock":"Add to Cart"),9,wd)]),Object(c["i"])("div",Cd,[Object(c["i"])("button",{class:Object(c["r"])(["wishlist-button",{active:s.isInWishlist(e.id)}]),onClick:t=>s.toggleWishlist(e)},[Object(c["i"])("span",_d,Object(c["H"])(s.isInWishlist(e.id)?"favorite":"favorite_border"),1)],10,Sd),Object(c["i"])("button",{class:"quick-view-button",onClick:t=>s.showQuickView(e)},t[20]||(t[20]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"visibility",-1)]),8,xd)])],2))),128))]),_:1})]),s.totalPages>1?(Object(c["x"])(),Object(c["h"])("div",Ad,[Object(c["i"])("button",{disabled:1===s.currentPage,onClick:t[8]||(t[8]=e=>s.currentPage--)},t[21]||(t[21]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"chevron_left",-1)]),8,Md),(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(s.displayedPages,e=>(Object(c["x"])(),Object(c["h"])("button",{key:e,class:Object(c["r"])({active:s.currentPage===e}),onClick:t=>s.currentPage=e},Object(c["H"])(e),11,Pd))),128)),Object(c["i"])("button",{disabled:s.currentPage===s.totalPages,onClick:t[9]||(t[9]=e=>s.currentPage++)},t[22]||(t[22]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"chevron_right",-1)]),8,Hd)])):Object(c["g"])("",!0),s.quickViewProduct?(Object(c["x"])(),Object(c["f"])(n,{key:2,product:s.quickViewProduct,onClose:t[10]||(t[10]=e=>s.quickViewProduct=null)},null,8,["product"])):Object(c["g"])("",!0),s.showFilters?(Object(c["x"])(),Object(c["f"])(r,{key:3,onClose:t[11]||(t[11]=e=>s.showFilters=!1)},{header:Object(c["O"])(()=>t[23]||(t[23]=[Object(c["i"])("h2",null,"Filter Products",-1)])),default:Object(c["O"])(()=>t[24]||(t[24]=[Object(c["i"])("div",{class:"filters-form"},null,-1)])),_:1})):Object(c["g"])("",!0),Object(c["l"])(o,{show:s.notification.show,title:s.notification.title,message:s.notification.message,type:s.notification.type,onClose:s.hideNotification},null,8,["show","title","message","type","onClose"])])}const Dd={class:"material-symbols-rounded icon"},Ud={class:"content"};function Td(e,t,a,s,i,l){return Object(c["x"])(),Object(c["f"])(c["b"],{name:"notification"},{default:Object(c["O"])(()=>[a.show?(Object(c["x"])(),Object(c["h"])("div",{key:0,class:Object(c["r"])(["notification",a.type])},[Object(c["i"])("span",Dd,Object(c["H"])(l.icon),1),Object(c["i"])("div",Ud,[Object(c["i"])("h4",null,Object(c["H"])(a.title),1),Object(c["i"])("p",null,Object(c["H"])(a.message),1)]),Object(c["i"])("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn"},t[1]||(t[1]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1)]))],2)):Object(c["g"])("",!0)]),_:1})}var Nd={name:"AppleNotification",props:{show:Boolean,title:String,message:String,type:{type:String,default:"success",validator:e=>["success","error","info"].includes(e)}},computed:{icon(){const e={success:"check_circle",error:"error",info:"info"};return e[this.type]}},emits:["close"]};a("5f9e");const Fd=G()(Nd,[["render",Td],["__scopeId","data-v-109d7732"]]);var qd=Fd;const Rd={class:"quick-preview-content"},Ed={class:"preview-image"},Ld=["src","alt"],Vd={class:"preview-details"},Wd={class:"details-content"},Bd={class:"meta"},$d={key:0,class:"set-badge"},zd={key:1,class:"badge"},Qd={class:"pricing-info"},Jd={class:"price-box"},Gd={class:"value"},Kd={class:"price-box"},Zd={class:"value highlight"},Xd={class:"stock-info"},Yd={class:"material-symbols-rounded"},eb={key:0,class:"description"},tb={class:"action-buttons"};function ab(e,t,a,s,i,l){const n=Object(c["D"])("Modal");return Object(c["x"])(),Object(c["f"])(n,{maxWidth:1200,onClose:e.close},{header:Object(c["O"])(()=>[Object(c["i"])("h2",null,Object(c["H"])(e.product.name),1)]),default:Object(c["O"])(()=>[Object(c["i"])("div",Rd,[Object(c["i"])("div",Ed,[Object(c["i"])("img",{src:e.product.image_url,alt:e.product.name},null,8,Ld)]),Object(c["i"])("div",Vd,[Object(c["i"])("div",Wd,[Object(c["i"])("div",Bd,[e.product.metadata&&e.product.metadata.set?(Object(c["x"])(),Object(c["h"])("span",$d,Object(c["H"])(e.product.metadata.set.name),1)):Object(c["g"])("",!0),e.product.metadata&&e.product.metadata.rarity?(Object(c["x"])(),Object(c["h"])("span",zd,Object(c["H"])(e.product.metadata.rarity),1)):Object(c["g"])("",!0)]),Object(c["i"])("div",Qd,[Object(c["i"])("div",Jd,[t[1]||(t[1]=Object(c["i"])("span",{class:"label"},"Market Price",-1)),Object(c["i"])("span",Gd,"$"+Object(c["H"])(e.product.marketPrice||e.product.price),1)]),Object(c["i"])("div",Kd,[t[2]||(t[2]=Object(c["i"])("span",{class:"label"},"Our Price",-1)),Object(c["i"])("span",Zd,"$"+Object(c["H"])(e.product.price),1)])]),Object(c["i"])("div",Xd,[Object(c["i"])("span",Yd,Object(c["H"])(e.product.stock>0?"inventory_2":"inventory_2_off"),1),Object(c["i"])("span",null,Object(c["H"])(e.product.stock>0?e.product.stock+" in stock":"Out of stock"),1)]),e.product.description?(Object(c["x"])(),Object(c["h"])("p",eb,Object(c["H"])(e.product.description),1)):Object(c["g"])("",!0)]),Object(c["i"])("div",tb,[Object(c["i"])("button",{class:"add-to-cart",onClick:t[0]||(t[0]=(...t)=>e.addToCart&&e.addToCart(...t))}," Add to Cart ")])])])]),_:1},8,["onClose"])}var cb=Object(c["m"])({name:"QuickPreview",components:{Modal:Ys["a"]},props:{product:Object},emits:["close"],setup(e,{emit:t}){function a(){t("close")}function c(){H["a"].addItem(e.product),a()}return{close:a,addToCart:c}}});a("62b4");const sb=G()(cb,[["render",ab],["__scopeId","data-v-19faff9e"]]);var ib=sb,lb={name:"Store",components:{Modal:Ys["a"],CartSlideOver:Z,QuickPreview:ib,AppleNotification:qd},setup(){const e=Object(c["A"])(""),t=Object(c["A"])(!1),a=Object(c["A"])(!1),s=Object(c["A"])(!1),i=Object(c["A"])(null),l=Object(c["A"])([]),n=Object(c["A"])({condition:"",sort:"newest",category:"",priceRange:"",rarity:""}),r=Object(c["A"])(1),o=12,d=Object(c["A"])(null),b=Object(c["A"])([{id:"all",name:"All",icon:"category"},{id:"rare",name:"Rare",icon:"star"},{id:"common",name:"Common",icon:"circle"},{id:"uncommon",name:"Uncommon",icon:"diamond"}]),u=Object(c["A"])([]),O=Object(c["A"])(!0),j=Object(c["d"])(()=>P["a"].state.user?P["a"].state.user.id:null),m=Object(c["d"])(()=>Object.values(n.value).filter(Boolean).length),p=Object(c["d"])(()=>{let t=[...u.value];if(e.value){const a=e.value.toLowerCase();t=t.filter(e=>e.name.toLowerCase().includes(a))}return n.value.category&&"all"!==n.value.category&&(t=t.filter(e=>e.type===n.value.category)),n.value.priceRange&&(t=I(t,n.value.priceRange)),n.value.rarity&&(t=t.filter(e=>e.metadata&&e.metadata.rarity&&e.metadata.rarity.toLowerCase()===n.value.rarity)),n.value.condition&&(t=t.filter(e=>e.metadata&&e.metadata.condition&&e.metadata.condition.toLowerCase()===n.value.condition)),D(t,n.value.sort)}),h=Object(c["d"])(()=>{const e=(r.value-1)*o;return p.value.slice(e,e+o)}),v=Object(c["d"])(()=>Math.ceil(p.value.length/o)),g=Object(c["d"])(()=>{const e=v.value,t=r.value,a=2,c=[],s=[];let i;c.push(1);for(let l=t-a;l<=t+a;l++)l>=1&&l<=e&&c.push(l);return c.push(e),c.forEach(e=>{i&&(e-i===2?s.push(i+1):e-i!==1&&s.push("...")),s.push(e),i=e}),s});async function f(){const{data:e,error:t}=await z["a"].from("products").select("*").eq("active",!0);t?console.error("Error fetching listings:",t):l.value=e||[]}async function y(){console.log("Fetching products..."),O.value=!0;try{const{data:e,error:t}=await z["a"].from("products").select("*").eq("active",!0).order("created_at",{ascending:!1});if(t)throw console.error("Supabase error:",t),t;if(console.log("Raw data from Supabase:",e),!e||0===e.length)return console.log("No products found in database"),void(u.value=[]);u.value=e.map(e=>({...e,price:parseFloat(e.price)||0,stock:parseInt(e.stock)||0})),console.log("Transformed products:",u.value)}catch(e){console.error("Error fetching products:",e)}finally{O.value=!1}}function k(e){return e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}function w(e){i.value=e,a.value=!0}async function C(){if(i.value&&P["a"].state.user)try{const{error:e}=await z["a"].from("orders").insert({product_id:i.value.id,user_id:P["a"].state.user.id,quantity:1,total_amount:i.value.price,status:"completed"});if(e)throw e;const{error:t}=await z["a"].from("products").update({active:!1,stock:i.value.stock-1}).eq("id",i.value.id);if(t)throw t;a.value=!1,await f()}catch(e){console.error("Error processing purchase:",e)}}const S=Object(c["A"])(null),_=Object(c["A"])(!1);function x(e){S.value=e,_.value=!0}function A(){n.value={priceRange:"",rarity:"",condition:"",sort:"newest",category:""},r.value=1}function M(e){d.value={...e,marketPrice:q(e)}}function I(e,t){switch(t){case"under10":return e.filter(e=>e.price<10);case"10to50":return e.filter(e=>e.price>=10&&e.price<=50);case"50plus":return e.filter(e=>e.price>50);default:return e}}function D(e,t){switch(t){case"price_low":return e.sort((e,t)=>e.price-t.price);case"price_high":return e.sort((e,t)=>t.price-e.price);case"newest":return e.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at));case"popularity":return e.sort((e,t)=>t.popularity-e.popularity);default:return e}}const U=Object(c["A"])([]);async function T(){if(P["a"].state.user)try{const{data:e,error:t}=await z["a"].from("wishlists").select("card_id").eq("user_id",P["a"].state.user.id);if(t)throw t;U.value=e.map(e=>e.card_id),console.log("Fetched wishlist:",U.value)}catch(e){console.error("Error fetching wishlist:",e)}}function N(e){return U.value.includes(e)}async function F(e){if(P["a"].state.user)try{const t=N(e.id);if(t){const{error:t}=await z["a"].from("wishlists").delete().eq("user_id",P["a"].state.user.id).eq("card_id",e.id);if(t)throw t;U.value=U.value.filter(t=>t!==e.id)}else{const{error:t}=await z["a"].from("wishlists").insert({user_id:P["a"].state.user.id,card_id:e.id,card_data:{name:e.name,image_url:e.image_url,price:e.price,type:e.type,metadata:e.metadata}});if(t)throw t;U.value.push(e.id)}}catch(t){console.error("Error updating wishlist:",t),alert("Failed to update wishlist")}else alert("Please log in to add items to your wishlist")}function q(e){if(!e.metadata)return"0.00";let t=e.price;return e.metadata.cardmarket&&e.metadata.cardmarket.prices&&e.metadata.cardmarket.prices.averageSellPrice?t=e.metadata.cardmarket.prices.averageSellPrice:e.metadata.tcgplayer&&e.metadata.tcgplayer.prices&&e.metadata.tcgplayer.prices.market&&(t=e.metadata.tcgplayer.prices.market),parseFloat(t).toFixed(2)}function R(e){console.log("Adding product to cart:",e);const t=(e,t,a)=>t.split(".").reduce((e,t)=>e&&void 0!==e[t]?e[t]:a,e),a={id:e.id,name:e.name,price:parseFloat(e.price||0),image_url:e.image_url,set:t(e,"metadata.set.name","Unknown Set"),rarity:t(e,"metadata.rarity","Common"),type:e.type||"Unknown Type",quantity:1};console.log("Processed card item:",a),H["a"].addItem(a),L("Added to Cart",e.name+" has been added to your cart.","success")}const E=Object(c["A"])({show:!1,title:"",message:"",type:"success"});function L(e,t,a="success"){E.value={show:!0,title:e,message:t,type:a},setTimeout(()=>{V()},3e3)}function V(){E.value.show=!1}function R(e){H["a"].addItem({id:e.id,name:e.name,price:e.price,image_url:e.image,quantity:1}),L("Added to Cart",e.name+" has been added to your cart.","success")}function W(e){const t={single:"Single Card",booster:"Booster Pack",set:"Card Set",box:"Booster Box",collection:"Collection",accessory:"Accessory"};return t[e.toLowerCase()]||e}function B(e){return Number(e).toFixed(2)}function $(e){return e<=0?"out":e<5?"low":e<20?"medium":"high"}return Object(c["v"])(async()=>{await Promise.all([y(),P["a"].state.user?T():Promise.resolve()])}),{search:e,filters:n,filteredProducts:p,showSellModal:t,showBuyModal:a,showFilters:s,selectedListing:i,buyCard:w,confirmPurchase:C,formatCondition:k,currentUserId:j,categories:b,selectedProduct:S,showPreview:_,showQuickPreview:x,cart:H["a"],currentPage:r,quickViewProduct:d,activeFiltersCount:m,paginatedProducts:h,totalPages:v,displayedPages:g,clearFilters:A,showQuickView:M,products:u,isLoading:O,isInWishlist:N,toggleWishlist:F,fetchProducts:y,wishlist:U,getMarketPrice:q,addToCart:R,notification:E,hideNotification:V,formatProductType:W,formatPrice:B,getStockLevel:$}}};a("e492");const nb=G()(lb,[["render",Id],["__scopeId","data-v-e81fc950"]]);var rb=nb;const ob=[{path:"/",name:"Home",component:Ba,meta:{public:!0}},{path:"/collection",name:"Collection",component:ya,meta:{public:!0}},{path:"/pricing",name:"Pricing",component:()=>a.e("chunk-62ad9a69").then(a.bind(null,"8aff")),meta:{public:!0}},{path:"/about",name:"About",component:()=>a.e("chunk-2fe52e9a").then(a.bind(null,"f820")),meta:{public:!0}},{path:"/my-collection",name:"MyCollection",component:xc,meta:{requiresAuth:!0}},{path:"/wishlist",name:"Wishlist",component:Yc,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:sc,meta:{public:!0}},{path:"/register",name:"Register",component:()=>a.e("chunk-13be29f5").then(a.bind(null,"73cf")),meta:{public:!0}},{path:"/admin",name:"Admin",component:Jo,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/profile",name:"Profile",component:()=>a.e("chunk-28a89ab6").then(a.bind(null,"c66d")),meta:{requiresAuth:!0}},{path:"/store",name:"Store",component:rb,meta:{requiresAuth:!0}},{path:"/cart",name:"Cart",component:()=>a.e("chunk-0173399f").then(a.bind(null,"b789"))},{path:"/checkout",name:"Checkout",component:()=>a.e("chunk-8a95aeea").then(a.bind(null,"7cb4")),meta:{requiresAuth:!0,title:"Checkout"}},{path:"/checkout/success",name:"CheckoutSuccess",component:()=>a.e("chunk-c066c090").then(a.bind(null,"4625")),meta:{requiresAuth:!0}},{path:"/order-confirmation/:orderId",name:"OrderConfirmation",component:()=>a.e("chunk-7229211b").then(a.bind(null,"6eb9")),props:!0,meta:{requiresAuth:!0}},{path:"/orders",name:"Orders",component:()=>a.e("chunk-781b0d1e").then(a.bind(null,"159d")),meta:{requiresAuth:!0}}],db=Object(X["a"])({history:Object(X["b"])("/"),routes:ob});db.beforeEach(async(e,t,a)=>{P["a"].state.initialized||await P["a"].initializeAuth();const c=!!P["a"].state.session,s=P["a"].state.isAdmin;!e.meta.requiresAuth||c?!e.meta.requiresAdmin||s?a():a("/"):a("/login")});var bb=db;const ub=Object(c["e"])(he);ub.use(bb),ub.mount("#app")},"5e33":function(e,t,a){"use strict";a("4a66")},"5f9e":function(e,t,a){"use strict";a("3f66")},"62b4":function(e,t,a){"use strict";a("7388")},"6fff":function(e,t,a){},"714b":function(e,t,a){"use strict";var c=a("7a23");const s={class:"modal-header"},i={class:"modal-content"};function l(e,t,a,l,n,r){return Object(c["x"])(),Object(c["h"])("div",{class:"modal-overlay",onClick:t[2]||(t[2]=t=>e.$emit("close"))},[Object(c["i"])("div",{class:"modal-container",style:Object(c["s"])({maxWidth:a.maxWidth+"px"}),onClick:t[1]||(t[1]=Object(c["R"])(()=>{},["stop"]))},[Object(c["i"])("div",s,[Object(c["C"])(e.$slots,"header",{},void 0,!0),Object(c["i"])("button",{class:"close-button",onClick:t[0]||(t[0]=t=>e.$emit("close"))},t[3]||(t[3]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"close",-1)]))]),Object(c["i"])("div",i,[Object(c["C"])(e.$slots,"default",{},void 0,!0)])],4)])}var n={name:"Modal",props:{maxWidth:{type:Number,default:600}},emits:["close"]},r=(a("752b"),a("6b0d")),o=a.n(r);const d=o()(n,[["render",l],["__scopeId","data-v-11fcb19d"]]);t["a"]=d},7307:function(e,t,a){"use strict";a("d351")},7388:function(e,t,a){},"752b":function(e,t,a){"use strict";a("34f1")},7770:function(e,t,a){},"79a7":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var c=a("940b");const s="https://qhghblgzpgoftoovbmes.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFoZ2hibGd6cGdvZnRvb3ZibWVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkzNjI4MzUsImV4cCI6MjA1NDkzODgzNX0.ifNQ2s7hjm0VinL8m1nJTTUnL7ZOLzdZ6z9Ycp4gqmQ",l=Object(c["a"])(s,i)},"7dbe":function(e,t,a){},"889e":function(e,t,a){"use strict";var c=a("7a23"),s=a("79a7");const i=Object(c["z"])({user:null,session:null,profile:null,isAdmin:!1,initialized:!1}),l={state:i,async initializeAuth(){try{const{data:e}=await s["a"].auth.getSession(),t=e.session||null;if(i.session=t,i.user=t?t.user:null,t){const{data:e}=await s["a"].from("profiles").select("*").eq("id",t.user.id).single();i.profile=e,i.isAdmin=!!e&&"admin"===e.role}}catch(e){console.error("Auth initialization error:",e),i.session=null,i.user=null,i.profile=null,i.isAdmin=!1}finally{i.initialized=!0}},async signIn(e,t){const{data:a,error:c}=await s["a"].auth.signInWithPassword({email:e,password:t});if(c)return{error:c};if(i.session=a.session,i.user=a.user,a.user){const{data:e}=await s["a"].from("profiles").select("*").eq("id",a.user.id).single();i.profile=e,i.isAdmin=!!e&&"admin"===e.role}return{user:i.user}},async signOut(){const{error:e}=await s["a"].auth.signOut();return e||(i.user=null,i.session=null,i.profile=null,i.isAdmin=!1),{error:e}}};s["a"].auth.onAuthStateChange((e,t)=>{i.session=t,i.user=t?t.user:null,t?s["a"].from("profiles").select("*").eq("id",t.user.id).single().then(({data:e})=>{i.profile=e,i.isAdmin=!!e&&"admin"===e.role}):(i.profile=null,i.isAdmin=!1)}),t["a"]=l},"8c2f":function(e,t,a){"use strict";var c=a("7a23");a("2064");const s=localStorage.getItem("cart"),i=s?JSON.parse(s):{items:[],total:0,show:!1},l=Object(c["z"])(i);Object(c["N"])(()=>l.items,e=>{localStorage.setItem("cart",JSON.stringify({items:e,total:l.total,show:l.show}))},{deep:!0}),t["a"]={state:l,toggleCart(){l.show=!l.show},addItem(e){const t=this.state.items.find(t=>t.id===e.id);if(t)t.quantity+=1;else{const t=e.tcgCard&&e.tcgCard.id?e.tcgCard.id:e.tcg_id||null;this.state.items.push({id:e.id,name:e.name,price:parseFloat(e.price)||0,image_url:e.image_url,type:e.type||"single",tcg_id:t,condition:e.condition,metadata:e.metadata||{},quantity:1})}this.calculateTotal(),this.saveCart()},removeItem(e){l.items=l.items.filter(t=>t.id!==e),this.calculateTotal()},updateQuantity(e,t){const a=l.items.find(t=>t.id===e);a&&(a.quantity=t,this.calculateTotal())},calculateTotal(){l.total=l.items.reduce((e,t)=>{const a=parseFloat(t.price)||0,c=parseInt(t.quantity)||0;return e+a*c},0)},clear(){l.items=[],l.total=0,l.show=!1,localStorage.removeItem("cart")},saveCart(){localStorage.setItem("cart",JSON.stringify({items:l.items,total:l.total,show:l.show}))}}},"8fb5":function(e,t,a){"use strict";a("ad02")},9359:function(e,t,a){"use strict";a("d683")},"996c":function(e,t,a){},"9fb6":function(e,t,a){},a087:function(e,t,a){"use strict";a("36e4")},a317:function(e,t,a){"use strict";a("3f47")},a3ba:function(e,t,a){"use strict";a("f8c8")},a98f:function(e,t,a){},aafd:function(e,t,a){},ad02:function(e,t,a){},b6cb:function(e,t,a){},b7f1:function(e,t,a){"use strict";function c(e){if(!e||"string"!==typeof e)return"/placeholder.png";if(e.startsWith("https://")){const t=e.split("/").pop(),a=e.split("/").slice(-2)[0];return`https://qhghblgzpgoftoovbmes.supabase.co/storage/v1/object/public/card-images/${a}/${t}`}return"/placeholder.png"}function s(e){console.warn("Image failed to load:",e.target.src),e.target.src="/placeholder.png"}a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return s}))},bb18:function(e,t,a){"use strict";a("6fff")},c395:function(e,t,a){"use strict";a("487e")},c63d:function(e,t,a){"use strict";a("996c")},d351:function(e,t,a){},d683:function(e,t,a){},da9c:function(e,t,a){},dcfb:function(e,t,a){},dd72:function(e,t,a){"use strict";a("da9c")},dfd6:function(e,t,a){"use strict";a("0731")},e069:function(e,t,a){"use strict";a("aafd")},e492:function(e,t,a){"use strict";a("dcfb")},e9a8:function(e,t,a){"use strict";a("06ad")},ee29:function(e,t,a){"use strict";a("7dbe")},f76e:function(e,t,a){},f8c8:function(e,t,a){}});
//# sourceMappingURL=app.e233af5c.js.map