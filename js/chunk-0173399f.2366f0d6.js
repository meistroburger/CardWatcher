(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0173399f"],{b789:function(t,e,a){"use strict";a.r(e);var c=a("7a23");const s={class:"cart-page"},i={class:"cart-header"},n={key:0,class:"items-count"},l={key:0,class:"cart-content"},r={class:"cart-items"},o={class:"item-info"},b={class:"item-image-container"},m=["src","alt"],u={key:1,class:"image-placeholder"},d={class:"item-details"},O={key:0,class:"item-meta"},j={key:0,class:"set-info"},g=["src","alt"],p={class:"set-name"},y={class:"set-code"},h={key:1,class:"card-number"},v={key:1,class:"item-meta"},k={class:"product-type"},f={key:0,class:"condition-badge"},_={class:"price-info"},S={class:"price"},C={key:0,class:"market-price"},x={class:"item-actions"},H={class:"quantity-controls"},w=["onClick","disabled"],I={class:"quantity"},P=["onClick"],q={class:"subtotal"},N={class:"subtotal-value"},$=["onClick"],F={class:"cart-summary"},D={class:"summary-details"},M={class:"summary-row"},Q={class:"summary-total"},R={key:1,class:"empty-cart"};function T(t,e,a,T,A,E){const J=Object(c["D"])("router-link");return Object(c["x"])(),Object(c["h"])("div",s,[Object(c["i"])("div",i,[e[1]||(e[1]=Object(c["i"])("h1",null,"Shopping Cart",-1)),t.cart.state.items.length?(Object(c["x"])(),Object(c["h"])("p",n,Object(c["H"])(t.cart.state.items.length)+" "+Object(c["H"])(1===t.cart.state.items.length?"item":"items"),1)):Object(c["g"])("",!0)]),t.cart.state.items.length?(Object(c["x"])(),Object(c["h"])("div",l,[Object(c["i"])("div",r,[Object(c["l"])(c["c"],{name:"list"},{default:Object(c["O"])(()=>[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(t.cart.state.items,a=>(Object(c["x"])(),Object(c["h"])("div",{key:a.id,class:"cart-item"},[Object(c["i"])("div",o,[Object(c["i"])("div",b,[t.getCardImage(a)?(Object(c["x"])(),Object(c["h"])("img",{key:0,src:t.getCardImage(a),alt:a.name,class:Object(c["r"])(["card-image",{"product-image":"single"!==a.type}])},null,10,m)):(Object(c["x"])(),Object(c["h"])("div",u,e[2]||(e[2]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"hourglass_empty",-1)])))]),Object(c["i"])("div",d,[Object(c["i"])("h3",null,Object(c["H"])(a.name),1),"single"===a.type?(Object(c["x"])(),Object(c["h"])("div",O,[t.cardData[a.name]?(Object(c["x"])(),Object(c["h"])("div",j,[t.getSetSymbol(a.name)?(Object(c["x"])(),Object(c["h"])("img",{key:0,src:t.getSetSymbol(a.name),alt:t.getSetName(a.name),class:"set-symbol"},null,8,g)):Object(c["g"])("",!0),Object(c["i"])("span",p,Object(c["H"])(t.getSetName(a.name)),1),Object(c["i"])("span",y,Object(c["H"])(t.getSetSeries(a.name)),1)])):Object(c["g"])("",!0),t.cardData[a.name]?(Object(c["x"])(),Object(c["h"])("div",h,Object(c["H"])(t.getCardNumber(a.name)),1)):Object(c["g"])("",!0),t.getRarity(a.name)?(Object(c["x"])(),Object(c["h"])("span",{key:2,class:Object(c["r"])(["rarity-badge",t.getRarity(a.name).toLowerCase()])},Object(c["H"])(t.getRarity(a.name)),3)):Object(c["g"])("",!0)])):(Object(c["x"])(),Object(c["h"])("div",v,[Object(c["i"])("span",k,Object(c["H"])(a.type),1),a.condition?(Object(c["x"])(),Object(c["h"])("span",f,Object(c["H"])(a.condition),1)):Object(c["g"])("",!0)])),Object(c["i"])("div",_,[Object(c["i"])("span",S,"€"+Object(c["H"])(t.formatPrice(a.price)),1),t.getMarketPrice(a.name)?(Object(c["x"])(),Object(c["h"])("span",C," Market: €"+Object(c["H"])(t.formatPrice(t.getMarketPrice(a.name))),1)):Object(c["g"])("",!0)])])]),Object(c["i"])("div",x,[Object(c["i"])("div",H,[Object(c["i"])("button",{onClick:e=>t.updateQuantity(a.id,a.quantity-1),disabled:a.quantity<=1,class:"quantity-btn"},e[3]||(e[3]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"remove",-1)]),8,w),Object(c["i"])("span",I,Object(c["H"])(a.quantity),1),Object(c["i"])("button",{onClick:e=>t.updateQuantity(a.id,a.quantity+1),class:"quantity-btn"},e[4]||(e[4]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"add",-1)]),8,P)]),Object(c["i"])("div",q,[e[5]||(e[5]=Object(c["i"])("span",{class:"subtotal-label"},"Subtotal",-1)),Object(c["i"])("span",N,"€"+Object(c["H"])(t.formatPrice(a.price*a.quantity)),1)]),Object(c["i"])("button",{class:"remove-button",onClick:e=>t.removeItem(a.id)},e[6]||(e[6]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"delete",-1)]),8,$)])]))),128))]),_:1})]),Object(c["i"])("div",F,[e[11]||(e[11]=Object(c["i"])("h2",null,"Order Summary",-1)),Object(c["i"])("div",D,[Object(c["i"])("div",M,[e[7]||(e[7]=Object(c["i"])("span",null,"Subtotal",-1)),Object(c["i"])("span",null,"€"+Object(c["H"])(t.formatPrice(t.cart.state.total)),1)]),e[9]||(e[9]=Object(c["i"])("div",{class:"summary-row"},[Object(c["i"])("span",null,"Shipping"),Object(c["i"])("span",null,"Free")],-1)),Object(c["i"])("div",Q,[e[8]||(e[8]=Object(c["i"])("span",null,"Total",-1)),Object(c["i"])("span",null,"€"+Object(c["H"])(t.formatPrice(t.cart.state.total||0)),1)])]),Object(c["i"])("button",{onClick:e[0]||(e[0]=(...e)=>t.checkout&&t.checkout(...e)),class:"checkout-button"},e[10]||(e[10]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"shopping_bag",-1),Object(c["k"])(" Checkout ")]))])])):(Object(c["x"])(),Object(c["h"])("div",R,[e[13]||(e[13]=Object(c["i"])("span",{class:"material-symbols-rounded"},"shopping_cart",-1)),e[14]||(e[14]=Object(c["i"])("h2",null,"Your cart is empty",-1)),e[15]||(e[15]=Object(c["i"])("p",null,"Looks like you haven't added anything to your cart yet",-1)),Object(c["l"])(J,{to:"/store",class:"continue-shopping"},{default:Object(c["O"])(()=>e[12]||(e[12]=[Object(c["k"])(" Continue Shopping ")])),_:1})]))])}var A=a("6605"),E=a("8c2f"),J=a("b7f1"),L=a("2064"),U=Object(c["m"])({name:"Cart",setup(){const t=Object(A["d"])(),e=Object(c["A"])({}),a=Object(c["A"])({}),s=async t=>{if("single"!==t.type){const c=t.metadata||{};return a.value[t.name]={...t,images:{small:t.image_url},set:c.set||{},rarity:c.rarity||null},void(e.value[t.name]=t.image_url)}if(!a.value[t.name])try{let c;if(t.tcg_id){console.log("Fetching by tcg_id:",t.tcg_id);const e=await L["a"].getCard(t.tcg_id);e.data&&(c=e.data)}if(!c){console.log("Falling back to name search");const e=await L["a"].getCards({q:`name:"${t.name}"`,pageSize:1});c=e.data[0]}c&&(console.log("Found card data:",c),a.value[t.name]=c,e.value[t.name]=c.images.small)}catch(c){console.error("Error fetching card:",c);const s=t.metadata||{};a.value[t.name]={...t,images:{small:t.image_url},set:s.set||{},rarity:s.rarity||null},e.value[t.name]=t.image_url}};function i(t){return Object(J["a"])(t.image_url)}function n(t,e){const a=parseInt(e);a>0&&E["a"].updateQuantity(t,a)}function l(t){E["a"].removeItem(t)}function r(){t.push("/checkout")}Object(c["v"])(async()=>{await Promise.all(E["a"].state.items.map(s))}),Object(c["N"])(()=>E["a"].state.items,async t=>{const a=t.filter(t=>!e.value[t.name]);a.length>0&&await Promise.all(a.map(s))},{deep:!0});const o=t=>{const e=parseFloat(t);return isNaN(e)?"0.00":e.toFixed(2)},b=t=>{const e=a.value[t];return e&&e.set&&e.set.images&&"single"===e.type?e.set.images.symbol:null},m=t=>{const e=a.value[t];return e&&e.set?e.set.name:"Unknown Set"},u=t=>{const e=a.value[t];return e&&e.set?e.set.series:null},d=t=>{const e=a.value[t];if(!e)return"";const c=e.metadata||{},s=e.number||(c?c.number:null),i=e.set||{},n=c.set||{},l=i.printedTotal||(n?n.printedTotal:null);return s&&l?`${s}/${l}`:""},O=t=>{const e=a.value[t];return e?e.rarity:null},j=t=>{const e=a.value[t];return e&&e.tcgplayer&&e.tcgplayer.prices&&e.tcgplayer.prices.holofoil?e.tcgplayer.prices.holofoil.market:null},g=t=>{if("single"!==t.type)return t.image_url;if(t.image_url)return t.image_url;if(e.value[t.name])return e.value[t.name];if(t.tcg_id){const[e,a]=t.tcg_id.split("-");return`https://images.pokemontcg.io/${e}/${a}_hires.png`}return t.metadata&&t.metadata.set&&t.metadata.set.id&&t.metadata.number?`https://images.pokemontcg.io/${t.metadata.set.id}/${t.metadata.number}_hires.png`:null};return{cart:E["a"],cardImages:e,cardData:a,getImageUrl:i,handleImageError:J["b"],updateQuantity:n,removeItem:l,checkout:r,formatPrice:o,getSetSymbol:b,getSetName:m,getSetSeries:u,getCardNumber:d,getRarity:O,getMarketPrice:j,getCardImage:g}}}),z=(a("d6af"),a("6b0d")),B=a.n(z);const Y=B()(U,[["render",T],["__scopeId","data-v-4d4736a4"]]);e["default"]=Y},d6af:function(t,e,a){"use strict";a("e95d")},e95d:function(t,e,a){}}]);
//# sourceMappingURL=chunk-0173399f.2366f0d6.js.map