(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53d5b976"],{"159d":function(e,t,r){"use strict";r.r(t);var c=r("7a23");const s={class:"orders-page"},a={key:0,class:"orders-list"},i={class:"order-header"},l={class:"order-info"},n={class:"order-date"},d={class:"order-items"},o=["src","alt"],b={class:"item-details"},O={class:"order-footer"},j={class:"order-total"},u={key:0,class:"order-actions"},p=["href"],m=["onClick"],h={key:1,class:"empty-orders"};function g(e,t,r,g,v,y){const _=Object(c["D"])("router-link"),f=Object(c["D"])("OrderDetailsModal");return Object(c["x"])(),Object(c["h"])("div",s,[t[7]||(t[7]=Object(c["i"])("div",{class:"orders-header"},[Object(c["i"])("h1",null,"My Orders")],-1)),g.orders.length?(Object(c["x"])(),Object(c["h"])("div",a,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(g.orders,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"order-card"},[Object(c["i"])("div",i,[Object(c["i"])("div",l,[Object(c["i"])("h3",null,"Order #"+Object(c["H"])(e.id.slice(0,8)),1),Object(c["i"])("p",n,Object(c["H"])(g.formatDate(e.created_at)),1)]),Object(c["i"])("span",{class:Object(c["r"])(["status-badge",e.status])},Object(c["H"])(e.status),3)]),Object(c["i"])("div",d,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(e.items,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"order-item"},[Object(c["i"])("img",{src:e.image_url,alt:e.name},null,8,o),Object(c["i"])("div",b,[Object(c["i"])("h4",null,Object(c["H"])(e.name),1),Object(c["i"])("p",null,"Qty: "+Object(c["H"])(e.quantity)+" × $"+Object(c["H"])(e.price),1)])]))),128))]),Object(c["i"])("div",O,[Object(c["i"])("div",j,[t[1]||(t[1]=Object(c["i"])("span",null,"Total:",-1)),Object(c["i"])("strong",null,"$"+Object(c["H"])(e.total_amount.toFixed(2)),1)]),"approved"===e.status?(Object(c["x"])(),Object(c["h"])("div",u,[e.stripe_session_id?(Object(c["x"])(),Object(c["h"])("a",{key:0,href:g.getPaymentLink(e.stripe_session_id),class:"pay-button",target:"_blank"}," Pay Now ",8,p)):Object(c["g"])("",!0)])):Object(c["g"])("",!0),Object(c["i"])("button",{class:"view-details-btn",onClick:t=>g.viewOrderDetails(e)},t[2]||(t[2]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"visibility",-1),Object(c["k"])(" View Details ")]),8,m)])]))),128))])):(Object(c["x"])(),Object(c["h"])("div",h,[t[4]||(t[4]=Object(c["i"])("span",{class:"material-symbols-rounded"},"receipt_long",-1)),t[5]||(t[5]=Object(c["i"])("h2",null,"No Orders Yet",-1)),t[6]||(t[6]=Object(c["i"])("p",null,"When you place orders, they will appear here",-1)),Object(c["l"])(_,{to:"/store",class:"shop-button"},{default:Object(c["O"])(()=>t[3]||(t[3]=[Object(c["k"])(" Browse Store ")])),_:1})])),g.selectedOrder?(Object(c["x"])(),Object(c["f"])(f,{key:2,order:g.selectedOrder,onClose:t[0]||(t[0]=e=>g.selectedOrder=null)},null,8,["order"])):Object(c["g"])("",!0)])}var v=r("79a7");const y={class:"modal-title"},_={class:"order-meta"},f={class:"order-details"},k={class:"details-header"},H={class:"order-meta"},w={class:"order-date"},x={class:"details-content"},D={class:"section items-section"},S={class:"items-list"},C=["src","alt"],I={class:"item-info"},M={class:"item-meta"},P={class:"item-total"},$={class:"section shipping-section"},q={class:"address-info"},L={key:0,class:"tracking-info"},E=["href"],F={class:"section summary-section"},T={class:"summary-rows"},B={class:"summary-row"},A={class:"summary-total"},N={key:0,class:"details-footer"},J=["href"];function Q(e,t,r,s,a,i){const l=Object(c["D"])("Modal");return Object(c["x"])(),Object(c["f"])(l,{onClose:t[1]||(t[1]=t=>e.$emit("close")),maxWidth:800},{header:Object(c["O"])(()=>[Object(c["i"])("div",y,[t[3]||(t[3]=Object(c["i"])("h2",null,"Order Details",-1)),Object(c["i"])("div",_,[Object(c["i"])("span",null,"Order #"+Object(c["H"])(e.order.id.slice(0,8)),1),t[2]||(t[2]=Object(c["i"])("span",{class:"dot"},"•",-1)),Object(c["i"])("span",null,Object(c["H"])(e.formatDate(e.order.created_at)),1)])])]),default:Object(c["O"])(()=>[Object(c["i"])("div",f,[Object(c["i"])("div",k,[Object(c["i"])("div",H,[Object(c["i"])("h2",null,"Order #"+Object(c["H"])(e.order.id.slice(0,8)),1),Object(c["i"])("p",w,Object(c["H"])(e.formatDate(e.order.created_at)),1)]),Object(c["i"])("div",{class:Object(c["r"])(["status-badge",e.order.status])},Object(c["H"])(e.formatStatus(e.order.status)),3)]),Object(c["i"])("div",x,[Object(c["i"])("div",D,[t[4]||(t[4]=Object(c["i"])("h3",null,"Order Items",-1)),Object(c["i"])("div",S,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(e.order.items,r=>(Object(c["x"])(),Object(c["h"])("div",{key:r.id,class:"item"},[Object(c["i"])("img",{src:r.image_url,alt:r.name,onError:t[0]||(t[0]=(...t)=>e.handleImageError&&e.handleImageError(...t))},null,40,C),Object(c["i"])("div",I,[Object(c["i"])("h4",null,Object(c["H"])(r.name),1),Object(c["i"])("div",M,[Object(c["i"])("span",null,"Quantity: "+Object(c["H"])(r.quantity),1),Object(c["i"])("span",null,"$"+Object(c["H"])(r.price),1)])]),Object(c["i"])("div",P," $"+Object(c["H"])((r.price*r.quantity).toFixed(2)),1)]))),128))])]),Object(c["i"])("div",$,[t[9]||(t[9]=Object(c["i"])("h3",null,"Shipping Details",-1)),Object(c["i"])("div",q,[Object(c["i"])("p",null,[Object(c["i"])("strong",null,Object(c["H"])(e.order.shipping_address.first_name)+" "+Object(c["H"])(e.order.shipping_address.last_name),1)]),Object(c["i"])("p",null,Object(c["H"])(e.order.shipping_address.address),1),Object(c["i"])("p",null,Object(c["H"])(e.order.shipping_address.postal_code)+" "+Object(c["H"])(e.order.shipping_address.city),1),Object(c["i"])("p",null,Object(c["H"])(e.order.shipping_address.email),1)]),e.order.tracking_info?(Object(c["x"])(),Object(c["h"])("div",L,[t[8]||(t[8]=Object(c["i"])("h4",null,"Tracking Information",-1)),Object(c["i"])("p",null,[t[5]||(t[5]=Object(c["i"])("strong",null,"Carrier:",-1)),Object(c["k"])(" "+Object(c["H"])(e.order.tracking_info.carrier),1)]),Object(c["i"])("p",null,[t[6]||(t[6]=Object(c["i"])("strong",null,"Tracking Number:",-1)),Object(c["k"])(" "+Object(c["H"])(e.order.tracking_info.number),1)]),Object(c["i"])("a",{href:e.order.tracking_info.url,target:"_blank",class:"tracking-link"},t[7]||(t[7]=[Object(c["k"])(" Track Package "),Object(c["i"])("span",{class:"material-symbols-rounded"},"open_in_new",-1)]),8,E)])):Object(c["g"])("",!0)]),Object(c["i"])("div",F,[t[13]||(t[13]=Object(c["i"])("h3",null,"Order Summary",-1)),Object(c["i"])("div",T,[Object(c["i"])("div",B,[t[10]||(t[10]=Object(c["i"])("span",null,"Subtotal",-1)),Object(c["i"])("span",null,"$"+Object(c["H"])(e.calculateSubtotal().toFixed(2)),1)]),t[12]||(t[12]=Object(c["i"])("div",{class:"summary-row"},[Object(c["i"])("span",null,"Shipping"),Object(c["i"])("span",null,"Free")],-1)),Object(c["i"])("div",A,[t[11]||(t[11]=Object(c["i"])("span",null,"Total",-1)),Object(c["i"])("span",null,"$"+Object(c["H"])(e.order.total_amount.toFixed(2)),1)])])])]),"approved"===e.order.status?(Object(c["x"])(),Object(c["h"])("div",N,[e.order.stripe_session_id?(Object(c["x"])(),Object(c["h"])("a",{key:0,href:e.getPaymentLink(e.order.stripe_session_id),class:"pay-button",target:"_blank"}," Complete Payment ",8,J)):Object(c["g"])("",!0)])):Object(c["g"])("",!0)])]),_:1})}var U=r("714b"),W=Object(c["m"])({name:"OrderDetailsModal",components:{Modal:U["a"]},props:{order:{type:Object,required:!0}},methods:{formatDate(e){return new Date(e).toLocaleString()},formatStatus(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")},calculateSubtotal(){return this.order.items.reduce((e,t)=>e+t.price*t.quantity,0)},getPaymentLink(e){return"/payment/"+e},handleImageError(e){e.target.src="/placeholder.png"}}}),V=(r("37e6"),r("6b0d")),Y=r.n(V);const z=Y()(W,[["render",Q],["__scopeId","data-v-0cda3a40"]]);var G=z,K={name:"Orders",components:{OrderDetailsModal:G,Modal:U["a"]},setup(){const e=Object(c["A"])([]),t=Object(c["A"])(null),r=async()=>{const{data:{user:t}}=await v["a"].auth.getUser();if(!t)return;const{data:r,error:c}=await v["a"].from("orders").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});c?console.error("Error fetching orders:",c):e.value=r},s=e=>new Date(e).toLocaleString(),a=e=>"/payment/"+e,i=e=>{t.value=e};return Object(c["v"])(r),{orders:e,formatDate:s,getPaymentLink:a,selectedOrder:t,viewOrderDetails:i}}};r("4602");const R=Y()(K,[["render",g],["__scopeId","data-v-051277b0"]]);t["default"]=R},"37e6":function(e,t,r){"use strict";r("c9be")},4602:function(e,t,r){"use strict";r("728e")},"728e":function(e,t,r){},c9be:function(e,t,r){}}]);
//# sourceMappingURL=chunk-53d5b976.7af5d1d4.js.map