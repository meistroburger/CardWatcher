(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-781b0d1e"],{"159d":function(e,t,a){"use strict";a.r(t);var c=a("7a23");const s={class:"orders-page"},i={key:0,class:"orders-list"},r={class:"order-header"},l={class:"order-info"},n={class:"order-date"},b={class:"order-items"},d={class:"card-image-container"},O=["src","alt"],o=["src","alt"],j={key:2,class:"card-image-placeholder"},u={class:"item-details"},p={class:"price-details"},m={class:"line-item"},g={class:"value"},h={class:"line-item"},y={class:"value"},v={class:"line-item subtotal"},f={class:"value"},_={key:0,class:"item-meta"},k={key:0,class:"set-name"},H={key:1,class:"rarity-badge"},x={class:"order-details"},w={class:"shipping-info"},P={key:0},D={class:"status-info"},S={class:"status-label"},q={class:"status-value"},C={key:0,class:"status-label"},I={class:"status-value"},M={class:"status-label"},$={class:"status-value"},F={class:"order-footer"},L={class:"order-total"},T={key:0,class:"order-actions"},A=["href"],E=["onClick"],N={key:1,class:"empty-orders"};function B(e,t,a,B,Q,U){const z=Object(c["D"])("router-link"),J=Object(c["D"])("OrderDetailsModal");return Object(c["x"])(),Object(c["h"])("div",s,[t[15]||(t[15]=Object(c["i"])("div",{class:"orders-header"},[Object(c["i"])("h1",null,"My Orders")],-1)),B.orders.length?(Object(c["x"])(),Object(c["h"])("div",i,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(B.orders,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"order-card"},[Object(c["i"])("div",r,[Object(c["i"])("div",l,[Object(c["i"])("h3",null,"Order #"+Object(c["H"])(e.id.slice(0,8)),1),Object(c["i"])("p",n,Object(c["H"])(B.formatDate(e.created_at)),1)]),Object(c["i"])("span",{class:Object(c["r"])(["status-badge",e.status])},Object(c["H"])(e.status),3)]),Object(c["i"])("div",b,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(e.items,e=>(Object(c["x"])(),Object(c["h"])("div",{key:e.id,class:"order-item"},[Object(c["i"])("div",d,[e.image_url?(Object(c["x"])(),Object(c["h"])("img",{key:0,src:e.image_url,alt:e.name},null,8,O)):B.cardImages[e.name]?(Object(c["x"])(),Object(c["h"])("img",{key:1,src:B.cardImages[e.name],alt:e.name},null,8,o)):(Object(c["x"])(),Object(c["h"])("div",j,t[1]||(t[1]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"hourglass_empty",-1)])))]),Object(c["i"])("div",u,[Object(c["i"])("h4",null,Object(c["H"])(e.name),1),Object(c["i"])("div",p,[Object(c["i"])("div",m,[t[2]||(t[2]=Object(c["i"])("span",{class:"label"},"Unit Price",-1)),Object(c["i"])("span",g,"€ "+Object(c["H"])(B.formatPrice(e.price)),1)]),Object(c["i"])("div",h,[t[3]||(t[3]=Object(c["i"])("span",{class:"label"},"Quantity",-1)),Object(c["i"])("span",y,Object(c["H"])(e.quantity),1)]),Object(c["i"])("div",v,[t[4]||(t[4]=Object(c["i"])("span",{class:"label"},"Subtotal",-1)),Object(c["i"])("span",f,"€ "+Object(c["H"])(B.formatPrice(e.price*e.quantity)),1)])]),e.set||e.rarity?(Object(c["x"])(),Object(c["h"])("div",_,[e.set?(Object(c["x"])(),Object(c["h"])("span",k,Object(c["H"])(e.set),1)):Object(c["g"])("",!0),e.rarity?(Object(c["x"])(),Object(c["h"])("span",H,Object(c["H"])(e.rarity),1)):Object(c["g"])("",!0)])):Object(c["g"])("",!0)])]))),128))]),Object(c["i"])("div",x,[Object(c["i"])("div",w,[t[5]||(t[5]=Object(c["i"])("h4",null,"Shipping Address",-1)),Object(c["i"])("p",null,Object(c["H"])(e.shipping_address.first_name)+" "+Object(c["H"])(e.shipping_address.last_name),1),Object(c["i"])("p",null,Object(c["H"])(e.shipping_address.address),1),Object(c["i"])("p",null,Object(c["H"])(e.shipping_address.postal_code)+" "+Object(c["H"])(e.shipping_address.city),1),e.shipping_address.country?(Object(c["x"])(),Object(c["h"])("p",P,Object(c["H"])(e.shipping_address.country),1)):Object(c["g"])("",!0)]),Object(c["i"])("div",D,[Object(c["i"])("p",S,[t[6]||(t[6]=Object(c["k"])("Payment Method: ")),Object(c["i"])("span",q,Object(c["H"])(B.formatPaymentMethod(e.payment_method)),1)]),e.tracking_info?(Object(c["x"])(),Object(c["h"])("p",C,[t[7]||(t[7]=Object(c["k"])("Tracking: ")),Object(c["i"])("span",I,Object(c["H"])(e.tracking_info),1)])):Object(c["g"])("",!0),Object(c["i"])("p",M,[t[8]||(t[8]=Object(c["k"])("Last Updated: ")),Object(c["i"])("span",$,Object(c["H"])(B.formatDate(e.updated_at)),1)])])]),Object(c["i"])("div",F,[Object(c["i"])("div",L,[t[9]||(t[9]=Object(c["i"])("span",null,"Total:",-1)),Object(c["i"])("strong",null,"$"+Object(c["H"])(e.total_amount.toFixed(2)),1)]),"approved"===e.status?(Object(c["x"])(),Object(c["h"])("div",T,[e.stripe_session_id?(Object(c["x"])(),Object(c["h"])("a",{key:0,href:B.getPaymentLink(e.stripe_session_id),class:"pay-button",target:"_blank"}," Pay Now ",8,A)):Object(c["g"])("",!0)])):Object(c["g"])("",!0),Object(c["i"])("button",{class:"view-details-btn",onClick:t=>B.viewOrderDetails(e)},t[10]||(t[10]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"visibility",-1),Object(c["k"])(" View Details ")]),8,E)])]))),128))])):(Object(c["x"])(),Object(c["h"])("div",N,[t[12]||(t[12]=Object(c["i"])("span",{class:"material-symbols-rounded"},"receipt_long",-1)),t[13]||(t[13]=Object(c["i"])("h2",null,"No Orders Yet",-1)),t[14]||(t[14]=Object(c["i"])("p",null,"When you place orders, they will appear here",-1)),Object(c["l"])(z,{to:"/store",class:"shop-button"},{default:Object(c["O"])(()=>t[11]||(t[11]=[Object(c["k"])(" Browse Store ")])),_:1})])),B.selectedOrder?(Object(c["x"])(),Object(c["f"])(J,{key:2,order:B.selectedOrder,onClose:t[0]||(t[0]=e=>B.selectedOrder=null)},null,8,["order"])):Object(c["g"])("",!0)])}var Q=a("79a7");const U={class:"modal-title"},z={class:"order-meta"},J={class:"order-details"},W={class:"details-header"},V={class:"order-meta"},Y={class:"order-date"},G={class:"details-content"},K={class:"section items-section"},R={class:"items-list"},X={class:"card-image-container"},Z=["src","alt"],ee=["src","alt"],te={key:2,class:"card-image-placeholder"},ae={class:"item-info"},ce={class:"price-container"},se={class:"price-row"},ie={class:"quantity-label"},re={class:"price-value"},le={class:"subtotal-row"},ne={class:"subtotal-value"},be={class:"item-details-row"},de={class:"quantity"},Oe={class:"price"},oe={class:"subtotal"},je={class:"item-meta"},ue={key:0,class:"set-name"},pe={key:1,class:"rarity-badge"},me={class:"item-total"},ge={class:"section shipping-section"},he={class:"address-info"},ye={key:0,class:"tracking-info"},ve=["href"],fe={class:"section summary-section"},_e={class:"summary-rows"},ke={class:"summary-row"},He={class:"summary-total"},xe={key:0,class:"details-footer"},we=["href"];function Pe(e,t,a,s,i,r){const l=Object(c["D"])("Modal");return Object(c["x"])(),Object(c["f"])(l,{onClose:t[0]||(t[0]=t=>e.$emit("close")),maxWidth:800},{header:Object(c["O"])(()=>[Object(c["i"])("div",U,[t[2]||(t[2]=Object(c["i"])("h2",null,"Order Details",-1)),Object(c["i"])("div",z,[Object(c["i"])("span",null,"Order #"+Object(c["H"])(e.order.id.slice(0,8)),1),t[1]||(t[1]=Object(c["i"])("span",{class:"dot"},"•",-1)),Object(c["i"])("span",null,Object(c["H"])(e.formatDate(e.order.created_at)),1)])])]),default:Object(c["O"])(()=>[Object(c["i"])("div",J,[Object(c["i"])("div",W,[Object(c["i"])("div",V,[Object(c["i"])("h2",null,"Order #"+Object(c["H"])(e.order.id.slice(0,8)),1),Object(c["i"])("p",Y,Object(c["H"])(e.formatDate(e.order.created_at)),1)]),Object(c["i"])("div",{class:Object(c["r"])(["status-badge",e.order.status])},Object(c["H"])(e.formatStatus(e.order.status)),3)]),Object(c["i"])("div",G,[Object(c["i"])("div",K,[t[5]||(t[5]=Object(c["i"])("h3",null,"Order Items",-1)),Object(c["i"])("div",R,[(Object(c["x"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(e.order.items,a=>(Object(c["x"])(),Object(c["h"])("div",{key:a.id,class:"item"},[Object(c["i"])("div",X,[a.image_url?(Object(c["x"])(),Object(c["h"])("img",{key:0,src:a.image_url,alt:a.name},null,8,Z)):e.cardImages[a.name]?(Object(c["x"])(),Object(c["h"])("img",{key:1,src:e.cardImages[a.name],alt:a.name},null,8,ee)):(Object(c["x"])(),Object(c["h"])("div",te,t[3]||(t[3]=[Object(c["i"])("span",{class:"material-symbols-rounded"},"hourglass_empty",-1)])))]),Object(c["i"])("div",ae,[Object(c["i"])("h4",null,Object(c["H"])(a.name),1),Object(c["i"])("div",ce,[Object(c["i"])("div",se,[Object(c["i"])("span",ie,"Qty: "+Object(c["H"])(a.quantity)+"x",1),Object(c["i"])("span",re,"€ "+Object(c["H"])(e.formatPrice(a.price)),1)]),Object(c["i"])("div",le,[t[4]||(t[4]=Object(c["i"])("span",{class:"subtotal-label"},"Subtotal",-1)),Object(c["i"])("span",ne,"€ "+Object(c["H"])(e.formatPrice(a.price*a.quantity)),1)])]),Object(c["i"])("div",be,[Object(c["i"])("div",de,"Qty: "+Object(c["H"])(a.quantity)+"x",1),Object(c["i"])("div",Oe,"€ "+Object(c["H"])(e.formatPrice(a.price)),1)]),Object(c["i"])("div",oe,"Subtotal: € "+Object(c["H"])(e.formatPrice(a.price*a.quantity)),1),Object(c["i"])("div",je,[Object(c["i"])("span",null,"Quantity: "+Object(c["H"])(a.quantity),1),Object(c["i"])("span",null,"$"+Object(c["H"])(a.price),1),a.set?(Object(c["x"])(),Object(c["h"])("span",ue,Object(c["H"])(a.set),1)):Object(c["g"])("",!0),a.rarity?(Object(c["x"])(),Object(c["h"])("span",pe,Object(c["H"])(a.rarity),1)):Object(c["g"])("",!0)])]),Object(c["i"])("div",me," $"+Object(c["H"])((a.price*a.quantity).toFixed(2)),1)]))),128))])]),Object(c["i"])("div",ge,[t[10]||(t[10]=Object(c["i"])("h3",null,"Shipping Details",-1)),Object(c["i"])("div",he,[Object(c["i"])("p",null,[Object(c["i"])("strong",null,Object(c["H"])(e.order.shipping_address.first_name)+" "+Object(c["H"])(e.order.shipping_address.last_name),1)]),Object(c["i"])("p",null,Object(c["H"])(e.order.shipping_address.address),1),Object(c["i"])("p",null,Object(c["H"])(e.order.shipping_address.postal_code)+" "+Object(c["H"])(e.order.shipping_address.city),1),Object(c["i"])("p",null,Object(c["H"])(e.order.shipping_address.email),1)]),e.order.tracking_info?(Object(c["x"])(),Object(c["h"])("div",ye,[t[9]||(t[9]=Object(c["i"])("h4",null,"Tracking Information",-1)),Object(c["i"])("p",null,[t[6]||(t[6]=Object(c["i"])("strong",null,"Carrier:",-1)),Object(c["k"])(" "+Object(c["H"])(e.order.tracking_info.carrier),1)]),Object(c["i"])("p",null,[t[7]||(t[7]=Object(c["i"])("strong",null,"Tracking Number:",-1)),Object(c["k"])(" "+Object(c["H"])(e.order.tracking_info.number),1)]),Object(c["i"])("a",{href:e.order.tracking_info.url,target:"_blank",class:"tracking-link"},t[8]||(t[8]=[Object(c["k"])(" Track Package "),Object(c["i"])("span",{class:"material-symbols-rounded"},"open_in_new",-1)]),8,ve)])):Object(c["g"])("",!0)]),Object(c["i"])("div",fe,[t[14]||(t[14]=Object(c["i"])("h3",null,"Order Summary",-1)),Object(c["i"])("div",_e,[Object(c["i"])("div",ke,[t[11]||(t[11]=Object(c["i"])("span",null,"Subtotal",-1)),Object(c["i"])("span",null,"$"+Object(c["H"])(e.calculateSubtotal().toFixed(2)),1)]),t[13]||(t[13]=Object(c["i"])("div",{class:"summary-row"},[Object(c["i"])("span",null,"Shipping"),Object(c["i"])("span",null,"Free")],-1)),Object(c["i"])("div",He,[t[12]||(t[12]=Object(c["i"])("span",null,"Total",-1)),Object(c["i"])("span",null,"$"+Object(c["H"])(e.order.total_amount.toFixed(2)),1)])])])]),"approved"===e.order.status?(Object(c["x"])(),Object(c["h"])("div",xe,[e.order.stripe_session_id?(Object(c["x"])(),Object(c["h"])("a",{key:0,href:e.getPaymentLink(e.order.stripe_session_id),class:"pay-button",target:"_blank"}," Complete Payment ",8,we)):Object(c["g"])("",!0)])):Object(c["g"])("",!0)])]),_:1})}var De=a("714b"),Se=a("2064"),qe=Object(c["m"])({name:"OrderDetailsModal",components:{Modal:De["a"]},emits:["close"],props:{order:{type:Object,required:!0}},setup(e){const t=Object(c["A"])({}),a=async e=>{if(!t.value[e])try{const{data:a}=await Se["a"].getCards({q:`name:"${e}"`,pageSize:1});a&&a.length>0&&(t.value[e]=a[0].images.small)}catch(a){console.error(`Error fetching card image for ${e}:`,a),t.value[e]=null}},s=e=>new Date(e).toLocaleString(),i=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),r=()=>e.order.items.reduce((e,t)=>e+t.price*t.quantity,0),l=e=>"/payment/"+e,n=e=>{e.target.src="/placeholder.png"},b=e=>Number(e).toFixed(2).replace(".",",");return Object(c["v"])(async()=>{const t=e.order.items.filter(e=>!e.image_url).map(e=>a(e.name));await Promise.all(t)}),{cardImages:t,formatDate:s,formatStatus:i,calculateSubtotal:r,getPaymentLink:l,handleImageError:n,formatPrice:b}}}),Ce=(a("702a"),a("6b0d")),Ie=a.n(Ce);const Me=Ie()(qe,[["render",Pe],["__scopeId","data-v-54a3997d"]]);var $e=Me,Fe={name:"Orders",components:{OrderDetailsModal:$e},setup(){const e=Object(c["A"])([]),t=Object(c["A"])(null),a=Object(c["A"])({}),s=async e=>{if(!a.value[e])try{const{data:t}=await Se["a"].getCards({q:`name:"${e}"`,pageSize:1});t&&t.length>0&&(a.value[e]=t[0].images.small)}catch(t){console.error(`Error fetching card image for ${e}:`,t),a.value[e]=null}},i=async()=>{const{data:{user:t}}=await Q["a"].auth.getUser();if(!t)return;const{data:a,error:c}=await Q["a"].from("orders").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(c)return void console.error("Error fetching orders:",c);e.value=a;const i=new Set;a.forEach(e=>{e.items.forEach(e=>{e.name&&!e.image_url&&i.add(e.name)})}),await Promise.all([...i].map(s))},r=e=>new Date(e).toLocaleString(),l=e=>"/payment/"+e,n=e=>{t.value=e},b=e=>{const t={pending:"Pending Payment",manual:"Manual Transfer",stripe:"Credit Card"};return t[e]||e},d=e=>Number(e).toFixed(2).replace(".",",");return Object(c["v"])(i),{orders:e,cardImages:a,formatDate:r,formatPaymentMethod:b,getPaymentLink:l,selectedOrder:t,viewOrderDetails:n,formatPrice:d}}};a("dcdc");const Le=Ie()(Fe,[["render",B],["__scopeId","data-v-253f8995"]]);t["default"]=Le},"4f48":function(e,t,a){},"702a":function(e,t,a){"use strict";a("4f48")},d748:function(e,t,a){},dcdc:function(e,t,a){"use strict";a("d748")}}]);
//# sourceMappingURL=chunk-781b0d1e.3c9ab5b2.js.map